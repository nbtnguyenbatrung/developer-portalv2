# NAPAS API SPECIFICATION DPP TOKEN VAULT (PART 02 - PAYMENT) v1.2 - GET STATED

# 1. Introduction

## 1.1. Audience

This document is intended to be used by developers, technical personnel and business analysts to facilitate a successful integration between partner’s system (banks, other organizations, …) and Napas API.

## 1.2. Scope

## 1.3. Support

## 1.4. How to Use this document

All technical APIs described in this document are displayed in the form of tables for request and response messages, by main function:

- **Verify Payment**
- **Purchase**
- **Retrieve**
- **Void**
- **Confirm**
- **Refund**
- **Create CPQR**

All API’s fields are described by their attributes:

- **Field Name:** Name of field as used to form the system call
- **Field Type:** this field is numerical, alphabet …
- **Length:** length of field value
- **Mandatory:** specify whether data element is required
  - O: Optional
  - R: Required – field must be presented
  - C: Conditional – presenting this field if some conditions are met.
- **Description:** Field detail description.

# 2. Technical Specification

## 2.1. Business Message Format

This section describes the business message format to be used in message payload for each api.

### 2.1.1. Verify Payment

> This api is for verifying the customer's card/account information if it's able to make a payment.

<table><tbody><tr><td><p>Operation URL</p></td><td><p>{{domain}}/api/{version}/verifypayment</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>POST</p></td></tr><tr><td><p>Protocol</p></td><td><p>REST-JSON</p></td></tr><tr><td><p>Security Method</p></td><td><p>Encryption/Digital Signature</p></td></tr><tr><td><p>Current Version</p></td><td><p>1</p></td></tr><tr><td><p>API</p></td><td><p>verifypayment</p></td></tr><tr><td><p>Role</p></td><td><p>NAPAS: client</p><p>ISSUER: server</p></td></tr></tbody></table>

**_Request Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>requestorCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Requestor Code (the issuer provides to Napas during integration)</p></td></tr><tr><td><p>requestorTransId</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Napas Transaction ID (which is unique and consistent for all requests of one transaction: VerifyPayment, Purchase, Retrieve, Void…)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>SHA256 with RSA (requestorCode + requestorTransId + data + secretKey)</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>merchant</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>Merchant info</p></td></tr><tr><td><p>merchant.id</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>O</p></td><td><p>Merchant ID</p></td></tr><tr><td><p>merchant.code</p></td><td><p>String</p></td><td><p>1..32</p></td><td><p>O</p></td><td><p>Merchant Code</p></td></tr><tr><td><p>merchant.name</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>O</p></td><td><p>Merchant Business Name</p></td></tr><tr><td><p>merchant.categoryCode</p></td><td><p>String</p></td><td><p>1..4</p></td><td><p>O</p></td><td><p>Merchant category code</p></td></tr><tr><td><p>merchant.addInfo</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>O</p></td><td><p>Other info</p></td></tr><tr><td><p>merchant.submerchant</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>Merchant’s sub-merchant info</p></td></tr><tr><td><p>merchant.submerchant.code</p></td><td><p>String</p></td><td><p>1..32</p></td><td><p>C</p></td><td><p>Sub-merchant code</p></td></tr><tr><td><p>merchant.submerchant.name</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>C</p></td><td><p>Sub-merchant name</p></td></tr><tr><td><p>merchant.submerchant.categoryCode</p></td><td><p>String</p></td><td><p>1..4</p></td><td><p>C</p></td><td><p>Sub-merchant category code</p></td></tr><tr><td><p>merchant.submerchant.referenceID</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>C</p></td><td><p>Sub-merchant reference id</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td><p>R</p></td><td><p>Transaction info</p></td></tr><tr><td><p>transaction.trace</p></td><td><p>String</p></td><td><p>1..6</p></td><td><p>O</p></td><td><p>Transaction trace (unique for each request), digits from 0-9</p></td></tr><tr><td><p>transaction.info</p></td><td><p>String</p></td><td><p>1..512</p></td><td><p>O</p></td><td><p>Detail about the order</p></td></tr><tr><td><p>transaction.date</p></td><td><p>String</p></td><td><p>1..8</p></td><td><p>R</p></td><td><p>Transaction date, format yyyyMMdd</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>String</p></td><td><p>1..12</p></td><td><p>R</p></td><td><p>Transaction amount (multiplied by 100). For example: if order’s amount is 100,000 vnd then transaction.amount=10000000</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>String</p></td><td><p>1..5</p></td><td><p>R</p></td><td><p>Transaction currency</p></td></tr><tr><td><p>transaction.serviceType</p></td><td><p>String</p></td><td><p>1..30</p></td><td><p>O</p></td><td><p>Service type such as:</p><p>CARDPAY – pay by card</p><p>ACCOUNTPAY – pay by account</p><p>DEEPLINK – redirect to issuer system to select payment method and authorize the transaction</p><p>APPLEPAY – pay by Apple pay</p><p>FASTPAY – fast pay by card token</p><p>FASTPAY_ACC – fast pay by account token</p><p>AUTOPAY_CARD – auto pay by card token</p><p>AUTOPAY_ACC – auto pay by account token</p><p>PAYSAVE_CARD – pay by card and create a token after the payment</p><p>PAYSAVE_ACC – pay by account and create a token after the payment</p><p>PAYSAVE_DEEPLINK – redirect consumer to issuer app for payment authorization and returns payment data to create a token.</p><p>CREATE_TOKEN_DEEPLINK</p><p>CARDPAY_3DS – pay by card using 3ds authentication</p><p>PAYSAVE_CARD_3DS – pay by card using 3ds authentication and create a token after the payment</p><p>CSP_RETAIL – pay by CPQR from retail merchant</p><p>CSP_TRANSIT – pay by CPQR from transit merchant</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Transaction type such as:</p><p>ECOM - ecommerce transaction</p><p>CASHIN - cash-in transaction</p></td></tr><tr><td><p>transaction.localDateTime</p></td><td><p>String</p></td><td><p>1..14</p></td><td><p>O</p></td><td><p>Local date and time when the transaction is submitted, format yyyyMMddHHmmss</p></td></tr><tr><td><p>transaction.callbackRedirectURL</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>C</p></td><td><p>Callback Redirect URL would be used to return back to Merchant site.</p></td></tr><tr><td><p>payment</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Additional Info of token and cryptogram verification in case merchant uses token for payment</p></td></tr><tr><td><p>payment.tokenDPAN</p></td><td><p>String</p></td><td><p>1..19</p></td><td><p>C</p></td><td><p>DPAN, digits from 0-9</p></td></tr><tr><td><p>payment.cardReferenceId</p></td><td><p>String</p></td><td><p>1..64</p></td><td><p>C</p></td><td><p>Card Reference Id, Max Length 64 bytes, provided by Issuer on card enrollment</p></td></tr><tr><td><p>payment.tokenId</p></td><td><p>String</p></td><td><p>1..64</p></td><td><p>C</p></td><td><p>Token Id, Max Length 64 bytes, as provided by Issuer on token enrollment</p></td></tr><tr><td><p>payment.tokenRequestorId</p></td><td><p>String</p></td><td><p>1..16</p></td><td><p>C</p></td><td><p>Token Requestor Id, Max Length 16 bytes</p></td></tr><tr><td><p>payment.cryptogramVerificationStatus</p></td><td><p>String</p></td><td><p>1..4</p></td><td><p>C</p></td><td><p>Global Cryptogram Verification Status</p><p>• 0200 - Cryptography verification ok</p><p>• 0201 - Cryptography verification failed</p><p>• E001 - Processing skipped</p><p>• E002 - Processing disabled</p><p>• F0FF - General processing error</p></td></tr><tr><td><p>payment.atcStatus</p></td><td><p>String</p></td><td><p>1..4</p></td><td><p>C</p></td><td><p>ATC Status</p><p>• 0500 - ATC verification ok</p><p>• 0581 - ATC too big</p><p>• 0582 - ATC gap is bigger than configured in profile or default gap</p><p>• 0584 - ATC gap is negative</p><p>• 0588 - Provided msd ATC Track1 and Track2 are not equal</p><p>• 0590 - ATC reconstruction failed</p><p>• 05A0 - Track1 and Track2 ATC not found</p><p>• 05C0 - ATC value was already processed</p><p>• 05xx - Logical binary sum of multiple error codes</p><p>• E001 - Processing skipped</p><p>• E002 - Processing disabled</p><p>• F0FF - General processing error</p></td></tr><tr><td><p>payment.credentialStatus</p></td><td><p>String</p></td><td><p>1..4</p></td><td><p>C</p></td><td><p>Credential Status</p><p>• 0800 - Credential ok</p><p>• 0801 - Credential not found</p><p>• 0802 - Credential terminated</p><p>• 0803 - Credential expired</p><p>• E001 - Processing skipped</p><p>• E002 - Processing disabled</p><p>• F0FF - General processing error</p></td></tr><tr><td><p>payment.posEntryMode</p></td><td><p>String</p></td><td><p>1..3</p></td><td><p>O</p></td><td><p>Point of service entry mode (include value “810”)</p></td></tr><tr><td><p>payment.acquiringInstitutionId</p></td><td><p>String</p></td><td><p>1..15</p></td><td><p>O</p></td><td><p>Acquiring institution identification code</p></td></tr><tr><td><p>payment.receivingInstitutionId</p></td><td><p>String</p></td><td><p>1..15</p></td><td><p>O</p></td><td><p>Receiving institution identification code</p></td></tr><tr><td><p>card</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Card information</p></td></tr><tr><td><p>card.number</p></td><td><p>String</p></td><td><p>1..19</p></td><td><p>C</p></td><td><p>Card number</p></td></tr><tr><td><p>card.nameOnCard</p></td><td><p>String</p></td><td><p>1..100</p></td><td><p>C</p></td><td><p>Card holder name</p></td></tr><tr><td><p>card.month</p></td><td><p>String</p></td><td><p>1..2</p></td><td><p>C</p></td><td><p>Card month, example “07”</p></td></tr><tr><td><p>card.year</p></td><td><p>String</p></td><td><p>1..5</p></td><td><p>C</p></td><td><p>Card year, example “2024”</p></td></tr><tr><td><p>card.issueDate</p></td><td><p>String</p></td><td><p>1..6</p></td><td><p>C</p></td><td><p>Card issue date, format “MMyyyy”, example “072024”</p></td></tr><tr><td><p>card.securityCode</p></td><td><p>String</p></td><td><p>1..4</p></td><td><p>C</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>card.type</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Card type (DOM_CREDIT - domestic credit card…)</p></td></tr><tr><td><p>account</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Account information</p></td></tr><tr><td><p>account.number</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>C</p></td><td><p>Account number</p></td></tr><tr><td><p>account.name</p></td><td><p>String</p></td><td><p>1..100</p></td><td><p>C</p></td><td><p>Account name</p></td></tr><tr><td><p>account.type</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Account type</p></td></tr><tr><td><p>account.personalId</p></td><td><p>String</p></td><td><p>1..100</p></td><td><p>O</p></td><td><p>Customer personal ID</p></td></tr><tr><td><p>account.phoneNumber</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>O</p></td><td><p>Customer phone number</p></td></tr><tr><td><p>account.email</p></td><td><p>String</p></td><td><p>1..100</p></td><td><p>O</p></td><td><p>Customer email</p></td></tr><tr><td><p>account.ibUsername</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Customer IB username</p></td></tr><tr><td><p>account.taxCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Customer tax code</p></td></tr><tr><td><p>account.hardToken</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Customer hard token</p></td></tr><tr><td><p>account.customerCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Customer code</p></td></tr><tr><td><p>3ds</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>3ds authentication information</p></td></tr><tr><td><p>3ds.authenticationTransactionId</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>C</p></td><td><p>3ds authentication transaction Id.</p></td></tr><tr><td><p>3ds.status</p></td><td><p>String</p></td><td><p>1..1</p></td><td><p>C</p></td><td><p>3ds transaction authentication status, such as:</p><p>• Y: Authentication Successful.</p><p>• A: Authentication Attempt.</p><p>• U: Authentication Could Not Be Performed.</p><p>• R: Authentication Rejected.</p><p>• N: Authentication Failed.</p></td></tr><tr><td><p>3ds.npav</p></td><td><p>String</p></td><td><p>1..28</p></td><td><p>C</p></td><td><p>3ds authentication value (NPAV)</p></td></tr><tr><td><p>3ds.eci</p></td><td><p>String</p></td><td><p>1..2</p></td><td><p>C</p></td><td><p>3ds electronic commerce indicator, such as:</p><p>• 05: Cardholder authentication successful (this includes successful authentication using risk-based authentication and/or a dynamic password).</p><p>• 06: Merchant attempted to authenticate the cardholder.</p><p>• 07: Non-authenticated e-commerce transaction.</p></td></tr><tr><td><p>qrString</p></td><td><p>String</p></td><td><p>800</p></td><td><p>O</p></td><td><p>The encoded <strong>QR</strong> content. This string follows the Napas VietQR-Pay standard and can be directly rendered into a QR code image for scanning</p></td></tr><tr><td><p>barcodeString</p></td><td><p>String</p></td><td><p>30</p></td><td><p>O</p></td><td><p>The encoded content used to generate a <strong>barcode</strong> representation of the Consumer Presented QR. This string can be directly converted into a supported barcode format (e.g., Code128, Code39, or EAN-13 depending on implementation) for scanning by merchant POS or barcode readers.</p></td></tr><tr><td><p>otherInfo</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfo.[].name</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfo.[].value</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

**_Response Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>partnerTransId</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Partner Transaction Id (Issuer Transaction ID)</p></td></tr><tr><td><p>requestorTransId</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Napas Transaction ID (which is unique and consistent for all requests of one transaction: VerifyPayment, Purchase, Retrieve, Void…)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>SHA256 with RSA (partnerTransId + requestorTransId + data + secretKey)</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>approvedCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Approved Code (Used in cases where the bank differentiates between the transaction code and the authorization code. If they are the same, enter the same value as the partnerTransId field.)</p></td></tr><tr><td><p>resCode</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Result response code.</p><p>(Refer to the Response Code table in section 2.2)</p></td></tr><tr><td><p>resMessage</p></td><td><p>String</p></td><td><p>1..200</p></td><td><p>R</p></td><td><p>Result response message</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>C</p></td><td><p>The URL is used to navigate to the issuer’s internet banking application to authorize the transaction. However, NAPAS recommends to use the transaction.authenType, transaction.authenUrl information to comply with Circular 50 of SBV.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>Transaction information.</p></td></tr><tr><td><p>transaction.authenGroup</p></td><td><p>String</p></td><td><p>1..10</p></td><td><p>O</p></td><td><p>Transaction group such as: A, B, C, D, E, F, G (according to Circular 50 of SBV)</p></td></tr><tr><td><p>transaction.authenType</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>C</p></td><td><p>Customer authentication type, example: SMS_OTP, SOFT_OTP, MOBILE_BANKING, 3DS</p></td></tr><tr><td><p>transaction.authenUrl</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>C</p></td><td><p>The URL is used to navigate to the issuer’s mobile banking application to authorize the transaction in case of authenType = MOBILE_BANKING</p></td></tr><tr><td><p>3ds</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>3ds authentication information</p></td></tr><tr><td><p>3ds.authenticationTransactionId</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>C</p></td><td><p>3ds authentication transaction Id (which is unique and consistent for request and response message).</p></td></tr><tr><td><p>3ds.npavVerificationResult</p></td><td><p>String</p></td><td><p>1..1</p></td><td><p>C</p></td><td><p>Verification result for 3ds authentication value:</p><p>1: NPAV failed verification - Issuer ACS’s cardholder authentication.</p><p>2: NPAV passed verification - Issuer ACS’s cardholder authentication.</p><p>D: NPAV was not verified - Issuer ACS’s cardholder authentication.</p><p>7: NPAV failed verification - NAPAS attempted authentication</p><p>8: NPAV passed verification - NAPAS attempted authentication (Non-participating issuer or cardholder).</p><p>9: NPAV failed verification - NAPAS attempted authentication (Issuer ACS was not available).</p><p>A: NPAV passed verification - NAPAS attempted authentication (Issuer ACS was not available).</p><p>Blank: NPAV not present OR NPAV not verified, issuer has not selected NPAV verification option.</p><p>0: NPAV could not be verified OR NPAV data was not provided when expected</p><p>6: NPAV not verified, issuer not participating in NPAV verification (Only Napas generates this code, issuers do not).</p><p>B: NPAV passed verification - no liability shift.</p></td></tr><tr><td><p>otherInfo</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfo[].name</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfo[].value</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

### 2.1.2. Purchase

> This api is for making a payment.

<table><tbody><tr><td><p>Operation URL</p></td><td><p>{{domain}}/api/{version}/purchase</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>POST</p></td></tr><tr><td><p>Protocol</p></td><td><p>REST-JSON</p></td></tr><tr><td><p>Security Method</p></td><td><p>Encryption/Digital Signature</p></td></tr><tr><td><p>Current Version</p></td><td><p>1</p></td></tr><tr><td><p>API</p></td><td><p>purchase</p></td></tr><tr><td><p>Role</p></td><td><p>NAPAS: client</p><p>ISSUER: server</p></td></tr></tbody></table>

**_Request Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>requestorCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Requestor Code (the issuer provides to Napas during integration)</p></td></tr><tr><td><p>requestorTransId</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Napas Transaction ID (which is unique and consistent for all requests of one transaction: Verify Payment, Purchase, Retrieve, Void…)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>SHA256 with RSA (requestorCode + requestorTransId + data + secretKey)</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>transaction</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Transaction info</p></td></tr><tr><td><p>transaction.trace</p></td><td><p>String</p></td><td><p>1..6</p></td><td><p>O</p></td><td><p>Transaction trace (unique for each request), 6 digits from 0-9</p></td></tr><tr><td><p>transaction.otp</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>C</p></td><td><p>SMS OTP or Soft OTP value (used when Issuer verifies OTP and Purchase in one request)</p></td></tr><tr><td><p>otherInfo</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfo[].name</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfo[].value</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

**_Response Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>partnerTransId</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Partner Transaction ID (Issuer Transaction ID)</p></td></tr><tr><td><p>requestorTransId</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Napas Transaction ID (which is unique and consistent for all requests of one transaction: Verify Payment, Purchase, Retrieve, Void…)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>SHA256 with RSA (partnerTransId + requestorTransId + data + secretKey)</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>approvedCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Approved Code (Used in cases where the bank differentiates between the transaction code and the authorization code. If they are the same, enter the same value as the partnerTransId field.)</p></td></tr><tr><td><p>resCode</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Result response code.</p><p>(Refer to the Response Code table in section 2.2)</p></td></tr><tr><td><p>resMessage</p></td><td><p>String</p></td><td><p>1..200</p></td><td><p>R</p></td><td><p>Result response message</p></td></tr><tr><td><p>otherInfo</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfo[].name</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfo[].value</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

### 2.1.3. Retrieve

> This api is for making a payment retrieving.

<table><tbody><tr><td><p>Operation URL</p></td><td><p>{{domain}}/api/{version}/retrieve</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>POST</p></td></tr><tr><td><p>Protocol</p></td><td><p>REST-JSON</p></td></tr><tr><td><p>Security Method</p></td><td><p>Encryption/Digital Signature</p></td></tr><tr><td><p>Current Version</p></td><td><p>1</p></td></tr><tr><td><p>API</p></td><td><p>retrieve</p></td></tr><tr><td><p>Role</p></td><td><p>NAPAS: client</p><p>ISSUER: server</p></td></tr></tbody></table>

**_Request Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>requestorCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Requestor Code (the issuer provides to Napas during integration)</p></td></tr><tr><td><p>requestorTransId</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Napas Transaction ID (which is unique and consistent for all requests of one transaction: VerifyPayment, Purchase, Retrieve, Void…)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>SHA256 with RSA (requestorCode + requestorTransId + data + secretKey)</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>merchant</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>Merchant info</p></td></tr><tr><td><p>merchant.id</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>O</p></td><td><p>Merchant ID</p></td></tr><tr><td><p>merchant.code</p></td><td><p>String</p></td><td><p>1..32</p></td><td><p>O</p></td><td><p>Merchant Code</p></td></tr><tr><td><p>merchant.name</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>O</p></td><td><p>Merchant Business Name</p></td></tr><tr><td><p>merchant.categoryCode</p></td><td><p>String</p></td><td><p>1..4</p></td><td><p>O</p></td><td><p>Merchant category code</p></td></tr><tr><td><p>merchant.addInfo</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>O</p></td><td><p>Other info</p></td></tr><tr><td><p>merchant.submerchant</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>Merchant’s sub-merchant info</p></td></tr><tr><td><p>merchant.submerchant.code</p></td><td><p>String</p></td><td><p>1..32</p></td><td><p>C</p></td><td><p>Sub-merchant code</p></td></tr><tr><td><p>merchant.submerchant.name</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>C</p></td><td><p>Sub-merchant name</p></td></tr><tr><td><p>merchant.submerchant.categoryCode</p></td><td><p>String</p></td><td><p>1..4</p></td><td><p>C</p></td><td><p>Sub-merchant category code</p></td></tr><tr><td><p>merchant.submerchant.referenceID</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>C</p></td><td><p>Sub-merchant reference id</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Transaction info</p></td></tr><tr><td><p>transaction.trace</p></td><td><p>String</p></td><td><p>1..6</p></td><td><p>O</p></td><td><p>Transaction trace (unique for each request), digits from 0-9</p></td></tr><tr><td><p>transaction.partnerTransId</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>C</p></td><td><p>Issuer transaction id</p></td></tr><tr><td><p>transaction.info</p></td><td><p>String</p></td><td><p>1..512</p></td><td><p>O</p></td><td><p>Detail about the order</p></td></tr><tr><td><p>transaction.date</p></td><td><p>String</p></td><td><p>1..8</p></td><td><p>O</p></td><td><p>Transaction date, format yyyyMMdd</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>String</p></td><td><p>1..12</p></td><td><p>O</p></td><td><p>Transaction amount (multiplied by 100). For example: if order’s amount is 100,000 vnd then transaction.amount=10000000</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>String</p></td><td><p>1..5</p></td><td><p>O</p></td><td><p>Transaction currency</p></td></tr><tr><td><p>transaction.serviceType</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>O</p></td><td><p>Service type such as:</p><p>CARDPAY – pay by card</p><p>ACCOUNTPAY – pay by account</p><p>DEEPLINK – redirect to issuer system to select payment method and authorize the transaction</p><p>APPLEPAY – pay by Apple pay</p><p>FASTPAY – fast pay by card token</p><p>FASTPAY_ACC – fast pay by account token</p><p>AUTOPAY_CARD – auto pay by card token</p><p>AUTOPAY_ACC – auto pay by account token</p><p>PAYSAVE_CARD – pay by card and create a token after the payment</p><p>PAYSAVE_ACC – pay by account and create a token after the payment</p><p>CARDPAY_3DS – pay by card using 3ds authentication</p><p>PAYSAVE_CARD_3DS – pay by card using 3ds authentication and create a token after the payment</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Transaction type such as:</p><p>ECOM – ecommerce transaction</p><p>CASHIN - cash-in transaction</p></td></tr><tr><td><p>otherInfo</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfo[].name</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfo[].value</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

**_Response Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>partnerTransId</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Partner Transaction ID (Issuer Transaction ID)</p></td></tr><tr><td><p>requestorTransId</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Napas Transaction ID (which is unique and consistent for all requests of one transaction: VerifyPayment, Purchase, Retrieve, Void…)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>SHA256 with RSA (partnerTransId + requestorTransId + data + secretKey)</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>approvedCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Approved Code (Used in cases where the bank differentiates between the transaction code and the authorization code. If they are the same, enter the same value as the partnerTransId field.)</p></td></tr><tr><td><p>resCode</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Result response code.</p><p>(Refer to the Response Code table in section 2.2)</p></td></tr><tr><td><p>resMessage</p></td><td><p>String</p></td><td><p>1..200</p></td><td><p>R</p></td><td><p>Result response message</p></td></tr><tr><td><p>otherInfo</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfo[].name</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfo[].value</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

### 2.1.4. Void

> This api is for making a payment void.

<table><tbody><tr><td><p>Operation URL</p></td><td><p>{{domain}}/api/{version}/void</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>POST</p></td></tr><tr><td><p>Protocol</p></td><td><p>REST-JSON</p></td></tr><tr><td><p>Security Method</p></td><td><p>Encryption/Digital Signature</p></td></tr><tr><td><p>Current Version</p></td><td><p>1</p></td></tr><tr><td><p>API</p></td><td><p>void</p></td></tr><tr><td><p>Role</p></td><td><p>NAPAS: client</p><p>ISSUER: server</p></td></tr></tbody></table>

**_Request Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>requestorCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Requestor Code (the issuer provides to Napas during integration)</p></td></tr><tr><td><p>requestorTransId</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Napas Transaction ID (which is unique and consistent for all requests of one transaction: VerifyPayment, Purchase, Retrieve, Void…)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>SHA256 with RSA (requestorCode + requestorTransId + data + secretKey)</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>merchant</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>Merchant info</p></td></tr><tr><td><p>merchant.id</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>O</p></td><td><p>Merchant ID</p></td></tr><tr><td><p>merchant.code</p></td><td><p>String</p></td><td><p>1..32</p></td><td><p>O</p></td><td><p>Merchant Code</p></td></tr><tr><td><p>merchant.name</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>O</p></td><td><p>Merchant Business Name</p></td></tr><tr><td><p>merchant.categoryCode</p></td><td><p>String</p></td><td><p>1..4</p></td><td><p>O</p></td><td><p>Merchant category code</p></td></tr><tr><td><p>merchant.addInfo</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>O</p></td><td><p>Other info</p></td></tr><tr><td><p>merchant.submerchant</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>Merchant’s sub-merchant info</p></td></tr><tr><td><p>merchant.submerchant.code</p></td><td><p>String</p></td><td><p>1..32</p></td><td><p>C</p></td><td><p>Sub-merchant code</p></td></tr><tr><td><p>merchant.submerchant.name</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>C</p></td><td><p>Sub-merchant name</p></td></tr><tr><td><p>merchant.submerchant.categoryCode</p></td><td><p>String</p></td><td><p>1..4</p></td><td><p>C</p></td><td><p>Sub-merchant category code</p></td></tr><tr><td><p>merchant.submerchant.referenceID</p></td><td><p>String</p></td><td><p>1..255</p></td><td><p>C</p></td><td><p>Sub-merchant reference id</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td><p>R</p></td><td><p>Transaction info</p></td></tr><tr><td><p>transaction.trace</p></td><td><p>String</p></td><td><p>1..6</p></td><td><p>O</p></td><td><p>Transaction trace (unique for each request), digits from 0-9</p></td></tr><tr><td><p>transaction.partnerTransId</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Issuer transaction id</p></td></tr><tr><td><p>transaction.info</p></td><td><p>String</p></td><td><p>1..512</p></td><td><p>O</p></td><td><p>Detail about the order</p></td></tr><tr><td><p>transaction.date</p></td><td><p>String</p></td><td><p>1..8</p></td><td><p>O</p></td><td><p>Transaction date, format yyyyMMdd</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>String</p></td><td><p>1..12</p></td><td><p>O</p></td><td><p>Transaction amount (multiplied by 100). For example: if order’s amount is 100,000 vnd then transaction.amount=10000000</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>String</p></td><td><p>1..5</p></td><td><p>O</p></td><td><p>Transaction currency</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Transaction type such as:</p><p>ECOM – ecommerce transaction</p><p>CASHIN - cash-in transaction</p></td></tr><tr><td><p>otherInfo</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfo[].name</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfo[].value</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

**_Response Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>partnerTransId</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Partner Transaction ID (Issuer Transaction Id)</p></td></tr><tr><td><p>requestorTransId</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Napas Transaction ID (which is unique and consistent for all requests of one transaction: VerifyPayment, Purchase, Retrieve, Void…)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>SHA256 with RSA (partnerTransId + requestorTransId + data + secretKey)</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>approvedCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Approved Code (Used in cases where the bank differentiates between the transaction code and the authorization code. If they are the same, enter the same value as the partnerTransId field.)</p></td></tr><tr><td><p>resCode</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Result response code.</p><p>(Refer to the Response Code table in section 2.2)</p></td></tr><tr><td><p>resMessage</p></td><td><p>String</p></td><td><p>1..200</p></td><td><p>R</p></td><td><p>Result response message</p></td></tr><tr><td><p>otherInfo</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfo[].name</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfo[].value</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

### 2.1.5. Confirm

> This process is for receiving partner's transaction processing results and perform some necessary tasks to complete the transaction when the customer is authenticated via the DEEPLINK/Internet Banking/Mobile Banking method.

<table><tbody><tr><td><p>Operation URL</p></td><td><p>{{domain}}/bankcallback/confirm</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>POST</p></td></tr><tr><td><p>Protocol</p></td><td><p>REST-JSON</p></td></tr><tr><td><p>Security Method</p></td><td><p>Encryption/Digital Signature</p></td></tr><tr><td><p>Current Version</p></td><td><p>1</p></td></tr><tr><td><p>API</p></td><td><p>confirm</p></td></tr><tr><td><p>Role</p></td><td><p>ISSUER: client</p><p>NAPAS: server</p></td></tr></tbody></table>

**_Request Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>bankCode</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Bank Code provided by Napas</p></td></tr><tr><td><p>bankPassword</p></td><td><p>String</p></td><td><p>50</p></td><td><p>R</p></td><td><p>Bank Password provided by Napas</p></td></tr><tr><td><p>napasTransId</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>Napas transaction id (unique on Napas)</p></td></tr><tr><td><p>bankTransId</p></td><td><p>String</p></td><td><p>32</p></td><td><p>R</p></td><td><p>Bank transaction id (unique and mapping 1-1 with a Napas transaction)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1000</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>2000</p></td><td><p>R</p></td><td><p>SHA256 With RSA (bankCode + bankPassword + napasTransId + bankTransId + data + secretKey), secretKey is provided by Napas for a specific bank.</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>amount</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>The transaction amount</p></td></tr><tr><td><p>currency</p></td><td><p>String</p></td><td><p>5</p></td><td><p>R</p></td><td><p>The transaction currency</p></td></tr><tr><td><p>accountHolderName</p></td><td><p>String</p></td><td><p>64</p></td><td><p>C</p></td><td><p>Account holder name</p></td></tr><tr><td><p>accountNumber</p></td><td><p>String</p></td><td><p>32</p></td><td><p>C</p></td><td><p>Account number</p></td></tr><tr><td><p>paymentMethod</p></td><td><p>String</p></td><td><p>32</p></td><td><p>C</p></td><td><p>Type of payment method the customer uses to make a payment.</p></td></tr><tr><td><p>bankResCode</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Bank response code</p></td></tr><tr><td><p>bankResMessage</p></td><td><p>String</p></td><td><p>200</p></td><td><p>R</p></td><td><p>Bank response message</p></td></tr><tr><td><p>otherInfos</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfos.[].name</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfos.[].value</p></td><td><p>String</p></td><td><p>200</p></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

**_Response Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>bankTransId</p></td><td><p>String</p></td><td><p>32</p></td><td><p>R</p></td><td><p>Bank transaction id (unique and mapping 1-1 with a Napas transaction)</p></td></tr><tr><td><p>napasTransId</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Napas transaction id (unique on Napas)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1000</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>2000</p></td><td><p>R</p></td><td><p>SHA256 With RSA (bankTransId + napasTransId + data + secretKey), secretKey is provided by Napas for a specific bank.</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>resCode</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Napas response code.</p><p>(Refer to the Confirm Response Code table in section 2.3)</p></td></tr><tr><td><p>resMessage</p></td><td><p>Object</p></td><td><p>200</p></td><td><p>R</p></td><td><p>Napas response message</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>String</p></td><td><p>500</p></td><td><p>R</p></td><td><p>The URL for redirecting customer back from bank’s site to Napas payment gateway</p></td></tr><tr><td><p>otherInfos</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfos[].name</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfos[].value</p></td><td><p>String</p></td><td><p>200</p></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

### 2.1.6 Refund

> This api is for making a payment refund.

<table><tbody><tr><td><p>Operation URL</p></td><td><p>{{domain}}/api/{version}/refund</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>POST</p></td></tr><tr><td><p>Protocol</p></td><td><p>REST-JSON</p></td></tr><tr><td><p>Security Method</p></td><td><p>Encryption/Digital Signature</p></td></tr><tr><td><p>Current Version</p></td><td><p>1</p></td></tr><tr><td><p>API</p></td><td><p>void</p></td></tr><tr><td><p>Role</p></td><td><p>NAPAS: client</p><p>ISSUER: server</p></td></tr></tbody></table>

**_Request Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>requestorCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Requestor Code (the issuer provides to Napas during integration)</p></td></tr><tr><td><p>requestorTransId</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Napas Transaction ID (which is unique and consistent for all requests of one transaction: VerifyPayment, Purchase, Retrieve, Void, Refund…)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>SHA256 with RSA (requestorCode + requestorTransId + data + secretKey)</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>approvedCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Approved Code (Used in cases where the bank differentiates between the transaction code and the authorization code. If they are the same, enter the same value as the partnerTransId field.)</p></td></tr><tr><td><p>resCode</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Result response code.</p><p>(Refer to the Response Code table in section 2.2)</p></td></tr><tr><td><p>resMessage</p></td><td><p>String</p></td><td><p>1..200</p></td><td><p>R</p></td><td><p>Result response message</p></td></tr><tr><td><p>otherInfo</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfo[].name</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfo[].value</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>
**_Response Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>partnerTransId</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>R</p></td><td><p>Partner Transaction ID (Issuer Transaction Id)</p></td></tr><tr><td><p>requestorTransId</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Napas Transaction ID (which is unique and consistent for all requests of one transaction: VerifyPayment, Purchase, Retrieve, Void…)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>1..999</p></td><td><p>R</p></td><td><p>SHA256 with RSA (partnerTransId + requestorTransId + data + secretKey)</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>approvedCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Approved Code (Used in cases where the bank differentiates between the transaction code and the authorization code. If they are the same, enter the same value as the partnerTransId field.)</p></td></tr><tr><td><p>resCode</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>R</p></td><td><p>Result response code.</p><p>(Refer to the Response Code table in section 2.2)</p></td></tr><tr><td><p>resMessage</p></td><td><p>String</p></td><td><p>1..200</p></td><td><p>R</p></td><td><p>Result response message</p></td></tr><tr><td><p>otherInfo</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfo[].name</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfo[].value</p></td><td><p>String</p></td><td></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

### 2.1.7. Create CPQR

> This API is used to generate a Consumer Presented QR (CPQR) or barcode that represents the consumer’s payment credentials. The QR can then be scanned by the merchant to initiate and complete a payment transaction from the consumer’s account to the merchant’s account.

<table><tbody><tr><td><p>Operation URL</p></td><td><p>{{domain}}/dpp/bankgw/createcpqr</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>POST</p></td></tr><tr><td><p>Protocol</p></td><td><p>REST-JSON</p></td></tr><tr><td><p>Security Method</p></td><td><p>Encryption/Digital Signature</p></td></tr><tr><td><p>Current Version</p></td><td><p>1</p></td></tr><tr><td><p>API</p></td><td><p>createcpqr</p></td></tr><tr><td><p>Application (Header)</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>Role</p></td><td><p>ISSUER: client</p><p>NAPAS: server</p></td></tr></tbody></table>

**_Request Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>bankId</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Bank ID provided by Napas</p></td></tr><tr><td><p>bankPassword</p></td><td><p>String</p></td><td><p>50</p></td><td><p>R</p></td><td><p>Bank Password provided by Napas</p></td></tr><tr><td><p>bankTransId</p></td><td><p>String</p></td><td><p>50</p></td><td><p>R</p></td><td><p>Bank transaction id (unique and mapping 1-1 with a Napas transaction)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1000</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>2000</p></td><td><p>R</p></td><td><p>SHA256 With RSA (bankId + bankPassword + bankTransId + data + secretKey), secretKey is provided by Napas for a specific bank.</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>accountNumber</p></td><td><p>String</p></td><td><p>50</p></td><td><p>R</p></td><td><p>Identifier of the consumer’s funding source. This can be one of the following:</p><ul><li>Card number (e.g., 4111111111111111)</li><li>Bank account number (e.g., 1234567890123)</li><li>E-wallet number (e.g., 0901234567)</li></ul></td></tr><tr><td><p>accountHolderName</p></td><td><p>String</p></td><td><p>64</p></td><td><p>R</p></td><td><p>Account holder name</p></td></tr><tr><td><p>accountPersonalId</p></td><td><p>String</p></td><td><p>1..100</p></td><td><p>O</p></td><td><p>Customer personal ID</p></td></tr><tr><td><p>accountPhoneNumber</p></td><td><p>String</p></td><td><p>1..20</p></td><td><p>O</p></td><td><p>Customer phone number</p></td></tr><tr><td><p>accountEmail</p></td><td><p>String</p></td><td><p>1..100</p></td><td><p>O</p></td><td><p>Customer email</p></td></tr><tr><td><p>accountIbUsername</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Customer IB username</p></td></tr><tr><td><p>accountTaxCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Customer tax code</p></td></tr><tr><td><p>accountHardToken</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Customer hard token</p></td></tr><tr><td><p>accountCustomerCode</p></td><td><p>String</p></td><td><p>1..50</p></td><td><p>O</p></td><td><p>Customer code</p></td></tr><tr><td><p>expiryDate</p></td><td><p>String</p></td><td><p>8</p></td><td><p>C</p></td><td><p>Requied with fundingSourceType=CARD. yyyyMMdd format.</p></td></tr><tr><td><p>fundingSourceType</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Funding source type such as:</p><p>CARD: when accountNumber is a card number</p><p>ACCOUNT: when accountNumber is an account number</p><p>E_WALLET: when accountNumber is an e-wallet number</p></td></tr><tr><td><p>transactionDate</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Transaction date, format as yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>timeLimit</p></td><td><p>Number</p></td><td><p>4</p></td><td><p>O</p></td><td><p>The validity period of the generated QR code, expressed in seconds. After this time expires, the QR code becomes invalid and cannot be used for payment.</p></td></tr><tr><td><p>amountLimit</p></td><td><p>Number</p></td><td><p>9</p></td><td><p>O</p></td><td><p>The maximum payment amount allowed when using this QR code. Any payment request exceeding this value will be rejected. If not provided, the amount limit would be 200,000,000vnd</p></td></tr><tr><td><p>otherInfos</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfos.[].name</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfos.[].value</p></td><td><p>String</p></td><td><p>200</p></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

**_Response Payload Fields detail:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>bankTransId</p></td><td><p>String</p></td><td><p>32</p></td><td><p>R</p></td><td><p>Bank transaction id (unique and mapping 1-1 with a Napas transaction)</p></td></tr><tr><td><p>napasTransId</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Napas transaction id (unique on Napas)</p></td></tr><tr><td><p>data</p></td><td><p>String</p></td><td><p>1000</p></td><td><p>R</p></td><td><p>A json string is encrypted by AES encryption method (AES-GCM-256)</p></td></tr><tr><td><p>signature</p></td><td><p>String</p></td><td><p>2000</p></td><td><p>R</p></td><td><p>SHA256 With RSA (bankTransId + napasTransId + data + secretKey), secretKey is provided by Napas for a specific bank.</p></td></tr></tbody></table>

**_Decrypted data string as bellow:_**

<table><tbody><tr><td><p><strong>Field name</strong></p></td><td><p><strong>Field type</strong></p></td><td><p><strong>Length</strong></p></td><td><p><strong>Mandatory</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>resCode</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Napas response code.</p><p>(Refer to the Confirm Response Code table in section 2.3)</p></td></tr><tr><td><p>resMessage</p></td><td><p>Object</p></td><td><p>200</p></td><td><p>R</p></td><td><p>Napas response message</p></td></tr><tr><td><p>accountNumber</p></td><td><p>String</p></td><td><p>50</p></td><td><p>R</p></td><td><p>Identifier of the consumer’s funding source. This can be one of the following:</p><ul><li>Card number (e.g., 4111111111111111)</li><li>Bank account number (e.g., 1234567890123)</li></ul><p>E-wallet number (e.g., 0901234567)</p></td></tr><tr><td><p>fundingSourceType</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Funding source type such as:</p><p>CARD: when accountNumber is a card number</p><p>ACCOUNT: when accountNumber is an account number</p><p>E_WALLET: when accountNumber is an e-wallet number</p></td></tr><tr><td><p>transactionDate</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Transaction date, format as yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>timeLimit</p></td><td><p>Number</p></td><td><p>4</p></td><td><p>O</p></td><td><p>The validity period of the generated QR code, expressed in seconds. After this time expires, the QR code becomes invalid and cannot be used for payment.</p></td></tr><tr><td><p>amountLimit</p></td><td><p>Number</p></td><td><p>9</p></td><td><p>O</p></td><td><p>The maximum payment amount allowed when using this QR code. Any payment request exceeding this value will be rejected. If not provided, the amount limit would be 200,000,000vnd</p></td></tr><tr><td><p>qrString</p></td><td><p>String</p></td><td><p>800</p></td><td><p>R</p></td><td><p>The encoded <strong>QR</strong> content. This string follows the Napas VietQR-Pay standard and can be directly rendered into a QR code image for scanning</p></td></tr><tr><td><p>barcodeString</p></td><td><p>String</p></td><td><p>30</p></td><td><p>R</p></td><td><p>The encoded content used to generate a <strong>barcode</strong> representation of the Consumer Presented QR. This string can be directly converted into a supported barcode format (e.g., Code128, Code39, or EAN-13 depending on implementation) for scanning by merchant POS or barcode readers.</p></td></tr><tr><td><p>otherInfos</p></td><td><p>List&lt;Object&gt;</p></td><td></td><td><p>O</p></td><td><p>Other information</p></td></tr><tr><td><p>otherInfos[].name</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>Field name</p></td></tr><tr><td><p>otherInfos[].value</p></td><td><p>String</p></td><td><p>200</p></td><td><p>C</p></td><td><p>Field value</p></td></tr></tbody></table>

## 2.2. Issuer Response Code

<table><tbody><tr><td><p><strong>Code</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>0</p></td><td><p>Successful</p></td></tr><tr><td><p>1</p></td><td><p>Invalid request</p></td></tr><tr><td><p>2</p></td><td><p>Wrong partner password</p></td></tr><tr><td><p>3</p></td><td><p>Expired transaction</p></td></tr><tr><td><p>4</p></td><td><p>Wrong signature</p></td></tr><tr><td><p>6</p></td><td><p>Invalid transaction/ Transaction does not exist</p></td></tr><tr><td><p>7</p></td><td><p>Invalid transaction status</p></td></tr><tr><td><p>8</p></td><td><p>Duplicate transaction</p></td></tr><tr><td><p>9</p></td><td><p>Wrong payment info</p></td></tr><tr><td><p>10</p></td><td><p>Wrong card number/account number</p></td></tr><tr><td><p>11</p></td><td><p>Wrong name on card/account name</p></td></tr><tr><td><p>12</p></td><td><p>Wrong card expiry</p></td></tr><tr><td><p>13</p></td><td><p>Wrong issue date</p></td></tr><tr><td><p>14</p></td><td><p>Card/Account is invalid</p></td></tr><tr><td><p>15</p></td><td><p>Card/Account is locked</p></td></tr><tr><td><p>16</p></td><td><p>Card/Account haven’t been registered for online payment</p></td></tr><tr><td><p>17</p></td><td><p>Transaction amount exceeds one transaction limit</p></td></tr><tr><td><p>18</p></td><td><p>Transaction amount exceeds limit per day</p></td></tr><tr><td><p>19</p></td><td><p>Card/Account has insufficient balance</p></td></tr><tr><td><p>20</p></td><td><p>Wrong OTP</p></td></tr><tr><td><p>21</p></td><td><p>Expired OTP</p></td></tr><tr><td><p>22</p></td><td><p>Invalid personal ID or phone number (token number, customer ID, …)</p></td></tr><tr><td><p>23</p></td><td><p>Transaction number exceeds limit per day</p></td></tr><tr><td><p>24</p></td><td><p>Transaction value exceeds limit set by your bank.</p></td></tr><tr><td><p>31</p></td><td><p>Uncompleted biometric verification</p></td></tr><tr><td><p>32</p></td><td><p>Failed biometric authentication</p></td></tr><tr><td><p>33</p></td><td><p>Rejected void</p></td></tr><tr><td><p>34</p></td><td><p>Rejected refund</p></td></tr><tr><td><p>66</p></td><td><p>Invalid token</p></td></tr><tr><td><p>97</p></td><td><p>Not allowed transaction</p></td></tr><tr><td><p>98</p></td><td><p>Other error</p></td></tr><tr><td><p>99</p></td><td><p>Internal error</p></td></tr></tbody></table>

## 2.3. Napas Response Code

The response code table returned by Napas when the issuer calls the Confirm API to return the transaction payment result. The highlighted error codes may be considered for refunding to the customer.

<table><tbody><tr><td><p><strong>Code</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>0</p></td><td><p>Successful</p></td></tr><tr><td><p>1</p></td><td><p>Invalid request</p></td></tr><tr><td><p>2</p></td><td><p>Wrong password</p></td></tr><tr><td><p>3</p></td><td><p>Expired transaction</p></td></tr><tr><td><p>4</p></td><td><p>Wrong signature</p></td></tr><tr><td><p>5</p></td><td><p>Transaction does not exist</p></td></tr><tr><td><p>6</p></td><td><p>Invalid transaction/ Invalid transaction status</p></td></tr><tr><td><p>8</p></td><td><p>Duplicate transaction</p></td></tr><tr><td><p>9</p></td><td><p>The amount limit provided is out of the allowed range.</p></td></tr><tr><td><p>98</p></td><td><p>Other error</p></td></tr><tr><td><p>99</p></td><td><p>Internal error</p></td></tr><tr><td><p>403</p></td><td><p>Account inactive</p></td></tr><tr><td><p>502</p></td><td><p>Bad gateway</p></td></tr></tbody></table>
