# DIGITAL PAYMENT PLATFORM v1.2 - GET STARTED

# 1. Overview

## 1.1. Purpose

* Develop a multi-platform, secure, and flexible digital payment platform.
* Support international and domestic payment methods
* Optimize user experience and ensure transaction security

## 1.2. Scope

* Support international cards such as Visa, Master, JCB, Amex,… and domestic payments.
* Diverse payment methods: card, account, QR, deep link, Apple Pay
* Support payment services such as Cash-in, Fast Pay, Auto Pay
* Support payment models such as Server-Hosted, Merchant-Hosted (with direct APIs)
* Integration with merchants, white-label payment organizations, banking systems and service providers

### 1.3. How to use this document

All technical APIs described in this document are displayed in the form of table by main transactions:

Hosted Checkout Implementation:

* Data Key
* Pay / Pay with returned Token / Create Token / Apple Pay / Deep Link/ Link card to Wallet

Direct API Implementation:

* For international payment:
  * Pay
  * Pay with 3DSecure
  * Authorize
  * Authorize with 3DS
  * Capture
  * Void
  * Refund
  * Verify Token
  * Retrieve Order
  * Retrieve Transaction
  * Retrieve Token
  * Delete Token
* For domestic payment:
  * Purchase OTP
  * Purchase with returned Token
  * Purchase Account
  * Verify CPQR/Barcode
  * Purchase CPQR/Barcode
  * Apple Pay
  * Void
  * Refund
  * Retrieve Order
  * Create Token
  * Retrieve Token
  * Delete Token
  * Deep Link App List
  * Deep Link
  * Create APG QR

# 2. Integration Guide

## 2.1. Integration Process

* Register a form to use Napas services
* Napas configures integration information
* The merchant performs the integration of the registered services

## 2.2. General API Structure

### 2.2.1. Endpoint URL

* The specific URL that identifies the API resource
* It often includes the base URL and the resource path
* Example: https://{domain}/api/rest/version/1/merchant/{merchantId}/order/{orderId}

### 2.2.2. HTTP Method

* Defines the type of operation being performed.
* Common methods:
  * GET: Retrieve data
  * POST: Submit new data
  * PUT: Update existing data
  * DELETE: Remove data

### 2.2.3. Headers

* Key-value pairs sent along with the request to provide additional context or authorization.
* Common headers:
  * Content-Type: application/json
  * Authorization: Bearer <access\_token>
  * Application: ID of the application the merchant is integrating with. (Napas will provide this information during the integration)
  * currentDate: The current date time, formatted as yyyyMMdd HH:mm:ss, GMT+7
  * signature: HMACSHA256-generated signature, as described in the Security Mechanisms section.

### 2.2.4. Request Body

* Included in methods like POST or PUT.
* Contains the actual data to be sent to the server, usually in JSON format.
* Example:

{
  "apiOperation": "PURCHASE_ACCOUNT",
  "order": {
    "amount": 10000,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "ACCOUNT",
    "provided": {
      "account": {
        "issuerCode": "SML",
        "accountName": "NGUYEN VAN A",
        "accountNumber": "01040001",
        "identificationNumber": "01040001"
      }
    }
  },
  "submerchant": {
    "code": "SUBMERCHANT",
    "name": "Blah blah blah",
    "referenceId": "12345"
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  }
}

### 2.2.5. Response Body

* Returned by the server after processing the request.
* Includes paymentResult or error details.
* Example (success):

{
 "paymentResult": {
  "apiOperation": "PURCHASE_ACCOUNT",
  "merchantId": "TGTT7",
  "order": {
   "amount": 10000,
   "creationTime": "2025-05-07T15:35:04",
   "id": "ABCD_01232341434",
   "currency": "VND"
  },
  "response": {
   "acquirerCode": "0",
   "gatewayCode": "SUCCESS",
   "message": "Transaction is successful."
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
   "provided": {
    "account": {
     "issuerCode": "TPB",
     "accountNumber": "1119****1290",
     "accountName": "Nguyen Van A"
    }
   },
   "type": "ACCOUNT"
  },
  "transaction": {
   "acquirer": {
    "date": "2025-05-07T15:35:04",
    "id": "85366282",
    "transactionId": "85366282"
   },
   "amount": 10000,
   "currency": "VND",
   "id": "85366282",
   "type": "PAYMENT"
  }
 }
}

* Example (error):

{
 "error": {
  "cause": "INVALID_REQUEST",
  "explanation": "Transaction can not be processed. Please try again.",
  "validationType": "Order is expired"
 },
 "result": "ERROR"
}

## 2.3. Testing Information

### 2.3.1. Authentication Information

\- grant\_type: password

\- client\_id: APITEST

\- client\_secret: TT3F6AM5UQZXJEJXAWJ8CHVC9ZJ02A51

\- username: apitest

\- password: fPJFVp5qnCWeFmtd

### 2.3.2. Card Information

<table><tbody><tr><td><p>Card Schemes</p></td><td><p>Card Number</p></td><td><p>Cardholder Name</p></td><td><p>Effective Date</p></td><td><p>CVV / Static OTP</p></td></tr><tr><td><p>MasterCard (3ds)</p></td><td><p>512345xxxxxx0008</p></td><td></td><td><p>05/17</p></td><td><p>100</p></td></tr><tr><td><p>MasterCard</p><p>(non 3ds)</p></td><td><p>511111yyyyyy1118</p></td><td></td><td><p>05/17</p></td><td><p>100</p></td></tr><tr><td><p>Visa</p></td><td><p>400555xxxxxx0019</p></td><td></td><td><p>05/17</p></td><td><p>100</p></td></tr><tr><td><p>American Express</p></td><td><p>34567zzzzzz4564</p></td><td></td><td><p>05/17</p></td><td><p>100</p></td></tr><tr><td><p>JCB</p></td><td><p>352800xxxxxx0007</p></td><td></td><td><p>05/17</p></td><td><p>100</p></td></tr><tr><td rowspan="6"><p>Domestic Card</p></td><td><p>970400xxxxxx0018</p></td><td rowspan="6"><p>Nguyen Van A</p></td><td rowspan="6"><p>03/07</p></td><td rowspan="6"><p>otp</p></td></tr><tr><td><p>970402xxxxxx0016</p></td></tr><tr><td><p>970400xxxxxx0026</p></td></tr><tr><td><p>970400xxxxxx0034</p></td></tr><tr><td><p>970400xxxxxx0042</p></td></tr><tr><td><p>970400xxxxxx0067</p></td></tr></tbody></table>

(x=0, y=1, zzzzzz=890123)

# 3. Security mechanisms

## 3.1 SSL Protocol

The communication between the Partner and the Napas system uses an HTTPS connection with TLS 1.2 or higher to ensure secure data encryption during transmission.

## 3.2. JWT Access Token Authentication

Our system uses JWT (JSON Web Token) access tokens for API authentication and authorization. The authentication process follows these steps:

### 3.3. HMAC-SHA256 Message Signature Verification

Our payment gateway uses **HMAC-SHA256** to ensure the integrity and authenticity of API requests. The verification process follows these steps:

### 3.3.1. Generating the HMAC Signature

The merchant creates a message string by concatenating the following information:

**Input = “merchantId={merchantId}|currentDate={currentDate}|bodyDigest={bodyDigest}** (for POST/PUT HTTP method)

**Or**

**Input = “merchantId={merchantId}|currentDate={currentDate}|bodyDigest={URI path}** (for GET HTTP method)

Where:

* {merchantId} is the client\_id of the merchant used to generate the access token.
* {currentDate} is the currentDate value sent by the merchant in the header, formatted as yyyyMMdd HH:mm:ss.
* {bodyDigest} is the request body sent to Napas (raw JSON data in a single line).
* {URI path} is the URI path
* The message is hashed using the **HMAC-SHA256** algorithm with a shared secret key (the same with client\_secret of the merchant used to generate the access token).
* The resulting hash (HMAC signature) is encoded in **Base64** and included in the API request header:
    _signature: {HMAC signature}_

**Example:**

* **_Signature Input_**:
  * **_(POST/PUT method):_** _merchantId=DPPDEVECOM|currentDate=2025-10-10 10:10:10|bodyDigest={"apiOperation": "DATA\_KEY","inputParameters": {"clientIP": "192.168.1.1","deviceId": "0123456789","environment": "WebApp","cardScheme": "AtmCard","enable3DSecure": "false"},"order": {"id": "ORD\_hn5ythhvf56878796666448","amount": "10000","currency": "VND","reference": "Thanh toan ORD\_637fd6t3111ue835492233"},"submerchant": {"code": "SUBMERCHANT","name": "napas","referenceId": "12345"}}_
  * **_(GET method):_** _merchantId=DPPDEVECOM|currentDate=2025-10-10 10:10:10|bodyDigest=/card/merchantId/TGTT7_
* **_Signature Output:_** _Lk+uiaxvy60gse1A0fVp76Bgm/0q9uTF5x+yV2WIchw=_

### 3.3.2. Verifying the Signature

* The server reconstructs the message string from the received request.
* The server generates its own HMAC-SHA256 hash using the same secret key.
* If the computed hash matches the received signature, the request is considered valid; otherwise, it is rejected.

# 4. Hosted Checkout Implementation

## 4.1. Payment Flow

![Sample request image.](./images/hosted-payment-flow.png 'Sample request.')

## 4.2. Integration Flow

![Sample request image.](./images/hosted-integration-flow.png 'Sample request.')

<div id="43_access_token_api"></div>

## 4.3. Access Token API

### 4.3.1. Obtaining an Access Token

* The merchant sends an authentication request to the Authentication API with valid credentials.
* The system responds with a JWT access token, which has a specific expiration time.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/oauth/token</p></td></tr><tr><td><p>Method</p></td><td><p>POST</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/x-www-form-urlencoded</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr></tbody></table>

**_Request:_**

grant_type=password
client_id=APITEST
client_secret=TT3F6AM5UQZXJEJXAWJ8CHVC9ZJ02A51
username=APITEST
password=fPJFVp5qnCWeFmtd

**_Response:_**

{
  "access_token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBUElURVNUIiwiYXVkIjoiVFQzRjZBTTVVUVpYSkVKWEFXSjhDSFZDOVpKMDJBNTEiLCJpc3MiOiJmUEpGVnA1cW5DV2VGbXRkIiwiZXhwIjoxNzE1NTY5NTQ1LCJpYXQiOjE3MTU1NjkyNDYsImp0aSI6IkFQSVRFU1QifQ.43XoubrISQYya4bM59MTK32T8wj6ZSLvdC2tLABY58UtEa4iggAWV1SBf4X5gx6sf5IZa_6aX3GJEv--bmNA3g",
  "token_type": "bearer",
  "refresh_token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJSZWZyZXNoX1Rva2VuX0FQSVRFU1QiLCJhdWQiOiJUVDNGNkFNNVVRWlhKRUpYQVdKOENIVkM5WkowMkE1MSIsImlzcyI6ImZQSkZWcDVxbkNXZUZtdGQiLCJpYXQiOjE3MDEyNDM3NzAsImp0aSI6IkFQSVRFU1QifQ.PGWcWQKSg-64QuuuUXZmCQJXhU9jAHCzfodzC9i2qyDYAsyrWB6GCXbq5RJWQV9ZqDrGMpzMPjcc3bjQpcW8GA",
  "expires_in": 300,
  "scope": "read write trust"
}

### 4.3.2. Using the Access Token

* The merchant includes the access token in the Authorization header of API requests:
    _Authorization: Bearer {access token}_

* The Napas system verifies the token before processing the request.

### 4.3.3. Refreshing the Access Token

* When the access token expires, the merchant can request a new access token using a refresh token instead of logging in again then use this access token to access the APIs.
* The merchant sends a request to the token refresh API, including the refresh token:

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/oauth/token</p></td></tr><tr><td><p>Method</p></td><td><p>POST</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>Authorization</p></td><td><p>Basic QVBJVEVTVDpUVDNGNkFNNVVRWlhKRUpYQVdKOENIVkM5WkowMkE1MQ==</p><p><strong><em>(This value is generated by the rule:encodeBase64(client_id:client_secret))</em></strong></p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/x-www-form-urlencoded</p></td></tr></tbody></table>

**_Request:_**

grant_type=refresh_token
refresh_token=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBUElURVNUIiwiYXVkIjoiVFQzRjZBTTVVUVpYSkVKWEFXSjhDSFZDOVpKMDJBNTEiLCJpc3MiOiJmUEpGVnA1cW5DV2VGbXRkIiwiaWF0IjoxNzE1NTcwMjI5LCJqdGkiOiJBUElURVNUIn0.1Mwv2dLkwgcbhjwZ53mVCSzBPR8-ALgCynYGUgeebeqIQcvL6-PGgA-2YW5LWBzpKDLYUqWd0bNO1z3CL9nAKA

**_Response:_**

{
    "access_token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBUElURVNUIiwiYXVkIjoiVFQzRjZBTTVVUVpYSkVKWEFXSjhDSFZDOVpKMDJBNTEiLCJpc3MiOiJmUEpGVnA1cW5DV2VGbXRkIiwiZXhwIjoxNzE1NTcxNzg2LCJpYXQiOjE3MTU1NzE0ODcsImp0aSI6IkFQSVRFU1QifQ.6Z8eTKRR_2BwsEd79DPyYxPOP-t7yj8aRU6kPQyoTrHlzAUOKLTby0vhWEL_UIZ00Us5kcDgaF8uBUVg7d-SWw",
    "token_type": "bearer",
    "refresh_token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBUElURVNUIiwiYXVkIjoiVFQzRjZBTTVVUVpYSkVKWEFXSjhDSFZDOVpKMDJBNTEiLCJpc3MiOiJmUEpGVnA1cW5DV2VGbXRkIiwiaWF0IjoxNzE1NTcwMjI5LCJqdGkiOiJBUElURVNUIn0.1Mwv2dLkwgcbhjwZ53mVCSzBPR8-ALgCynYGUgeebeqIQcvL6-PGgA-2YW5LWBzpKDLYUqWd0bNO1z3CL9nAKA",
    "scope": "read write trust",
    "expires_in": 299
}

* If the refresh token is valid, the Napas system issues a new access token.

## 4.4. Data Key API

Partner uses this transaction to initialize the order and obtain the secure keys needed for integrating Napas Hosted Checkout or the redirecting URL to redirect to Napas payment gateway (Redirecting URL doesn’t support for PAY SAVE transactions).

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/datakey</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>POST</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p><em>DATA_KEY</em>: Request to obtain secure keys for integrating Napas Hosted Form.</p></td></tr><tr><td><p>inputParameters</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>String</p></td><td><p>64</p></td><td><p>R</p></td><td></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>String</p></td><td><p>50</p></td><td><p>R</p></td><td></td><td><p><em>CreditCard</em>: use in case of branded cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p><p><em>QRECOM: for using QRCode as a payment method</em></p><p><em>APPLEPAYECOM: for using Apple Pay as a payment method</em></p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td><p>String</p></td><td><p>10</p></td><td><p>R</p></td><td></td><td><p>Supports 3DSecure for authorizing cardholder.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>order</p></td><td></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.id</p></td><td><p>String</p></td><td><p>40</p></td><td><p>R</p></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.reference</p></td><td><p>String</p></td><td><p>512</p></td><td><p>C</p></td><td></td><td><p>Order short description (display on form)</p><p>It’s required For CASHIN transactions, the value must starts with “CASHIN” prefix</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>2,000 VND</p><p>to 200,000,000 VND</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD</p><p>For domestic transactions: only VND is accepted.</p></td></tr><tr><td><p>promoBIN</p></td><td><p>array</p></td><td></td><td><p>O</p></td><td></td><td><p>Array of allowed BIN in string format.</p></td></tr><tr><td><p>formAction</p></td><td><p>String</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The form action url will receive result from Napas.</p><p>It’s required when merchants choose the redirecting URL option.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>50</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>dataKey</p></td><td><p>String</p></td><td><p>999</p></td><td></td><td><p>C</p></td><td><p>A system-generated String that represents the session of merchant which wants to do server-hosted form.</p></td></tr><tr><td><p>napasKey</p></td><td><p>String</p></td><td><p>9999</p></td><td></td><td><p>C</p></td><td><p>A system-generated String used for security reasons. This is a public key, used in checking signature of Napas.</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>String</p></td><td><p>999</p></td><td></td><td><p>C</p></td><td><p>A redirecting URL for redirecting to Napas payment gateway. It’s would be returned when merchants choose the redirecting URL option.</p></td></tr></tbody></table>

<div id="45_hosted_form_intergration"></div>

## 4.5. Hosted Form Integration

To integrate Napas Hosted Form, partner must obtain _dataKey_ and _napasKey_ from DATA\_KEY API, then generate a HTML script as below:

<form id="merchant-form" action="https://web.merchant.com/result-page" method="POST"></form>
<div id="napas-widget-container"></div>
<script
    type="text/javascript"
    id="napas-widget-script"
    src="https://{domain}/web/js/napas.hostedform.min.js"
    merchantId="APITEST"
    clientIP="192.168.1.1"
    deviceId="ID_12345678"
    environment="WebApp"
    cardScheme=" AtmCard"
    enable3DSecure="false"
    apiOperation="PAY"
    orderAmount="10000"
    orderCurrency="VND"
    orderReference="Thanh toan hoa don"
    orderId="ORD_673687"
    channel="6014"
    sourceOfFundsType="CARD"
    customerId = “123456789”

    dataKey="67rw9xTZKtKtM8xdkbD9JbBY1azODvXm0itIoQzcliSnYGBpM1+itqxhDrDkcyHIJpibtop+bl+aGWgCN48K/aKIP8uI6dJ016ZKJDiwIs0Z3AuGWD/cx/NE53KpORVEg1VVly2X8qHMMXf3D4pzb89J9Nji76GteprMvNhuhrNjQ3y1yqjtCGPOvSEwmERxnMJpYRNNBEOLc0XX6H3K0pnNOBxRlKlK/l0u94DwU+rabu8GrRqdkmeCm0J/vQfLpZ3CLVO4XMhNg1Aw/N0PaIZp7JonWRojZ1iBbwtjINZUMp1KYd6X8dfnAIzprgoo9EAbe0PTwf8czBLjdNUYih8D9BxLxVuWXZMMzXgyKV0zqP4ilhn14Cvet8liuhLySgMk6yhfpp6T7trxEQeqz3a/KIyjOKbaS6+cOSMWJKM="

    napasKey="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCX0yRwcCBZIMrOhtdr2eO2hLlLtSmGERW+NM1LoXLbg11fWPucJkqwqtLFrVHwPs6RR5wqsOk7UNf8PDLEgZFB3ybUed/XeWKpSBuDO+pZf5neVCZ0blzDfZlaNaY3IL34QIgu9/zq/BlyjbIu/BSKl//Ugatc+bVRJX0+uD1XJwIDAQAB:MIIBsDCCARkCBgFaR+TbpTANBgkqhkiG9w0BAQUFADAeMRwwGgYDVQQDExNUZXN0IENBIENlcnRpZmljYXRlMB4XDTE3MDIxNjE3MDc0NVoXDTE3MDIxNzE3MDc0NVowHjEcMBoGA1UEAxMTVGVzdCBDQSBDZXJ0aWZpY2F0ZTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAl9MkcHAgWSDKzobXa9njtoS5S7UphhEVvjTNS6Fy24NdX1j7nCZKsKrSxa1R8D7OkUecKrDpO1DX/DwyxIGRQd8m1Hnf13liqUgbgzvqWX+Z3lQmdG5cw32ZWjWmNyC9+ECILvf86vwZco2yLvwUipf/1IGrXPm1USV9Prg9VycCAwEAATANBgkqhkiG9w0BAQUFAAOBgQBIUEse2etILP+33D9YZbgU0efBRcSa94pgyC2ErymvHwWXMs9urF2hyK3Xy7+Ul8mg4m0iDVwBIBv0X1T0cQACe07ZOpu4M2B4XpdGri4Y8KDuoHMSb23w4IhvneFUOWf0+kXbJoczKalT/y8Y866zn9OOTLPdUbsxZ5Kto5WLXw=="
>
<\/script>

_Parameter details:_

<table><tbody><tr><td><p>Field name</p></td><td><p>Max Length</p></td><td><p>Field Type</p></td><td><p>Description</p></td><td><p>Pay</p></td><td><p>Pay with returned Token</p></td><td><p>Create Token</p></td></tr><tr><td><p>action</p></td><td><p>999</p></td><td><p>String</p></td><td><p>URL of the webpage that shows transaction result, includes https://...</p></td><td><p>R</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>merchantId</p></td><td><p>32</p></td><td><p>String</p></td><td><p>Partner identifier</p></td><td><p>R</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>clientIP</p></td><td><p>512</p></td><td><p>String</p></td><td><p>Customer’s IP address</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>deviceId</p></td><td><p>100</p></td><td><p>String</p></td><td><p>Customer’s identifier, this will be returned after processing transaction</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>environment</p></td><td><p>20</p></td><td><p>String</p></td><td><p>Integration environment:</p><p>WebApp: desktop web</p><p>MobileApp: mobile web/mobile app</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>cardScheme</p></td><td><p>50</p></td><td><p>String</p></td><td><p><em>CreditCard</em>: use in case of branded cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p><p><em>QRECOM: </em>for using QRCode as a payment method</p><p><em>APPLEPAYECOM: </em>for using Apple Pay as a payment method</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>enable3DSecure</p></td><td><p>10</p></td><td><p>String</p></td><td><p>Supports 3DSecure to authorize cardholder</p><p>true: enables 3DSecure flow</p><p>false: disables 3DSecure flow</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>apiOperation</p></td><td><p>100</p></td><td><p>String</p></td><td><p>PAY: normal payment, supports for payment methods via card, bank account, QR code, Apple Pay and link card to e-wallet account.</p><p>PAY_WITH_RETURNED_TOKEN: pay and tokenize card/account details.</p><p>CREATE_TOKEN: store a payment instrument against a token</p></td><td><p>R</p></td><td><p>R</p></td><td></td></tr><tr><td><p>orderAmount</p></td><td><p>10</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>The total amount for the order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number for a domestic transactions</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>orderCurrency</p></td><td><p>3</p></td><td><p>String</p></td><td><p>Order currency</p><p>(for Token Creation, the value must be VND)</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>orderReference</p></td><td><p>512</p></td><td><p>String</p></td><td><p>Order short description (display on form)</p><p><a id="_heading=h.2jxsxqh"> Required for CASHIN transactions, the value must start with “CASHIN” prefix</p></td><td><p>C</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>orderId</p></td><td><p>40</p></td><td><p>String (max 40)</p></td><td><p>Order identifier (must be unique)</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>channel</p></td><td><p>20</p></td><td><p>String</p></td><td><p>Partner business code</p></td><td><p>R</p></td><td><p>R</p></td><td></td></tr><tr><td><p>sourceOfFundsType</p></td><td><p>20</p></td><td><p>String</p></td><td><p>CARD / ACCOUNT/ DEEPLINK</p></td><td><p>R</p></td><td><p>R</p></td><td></td></tr><tr><td><p>dataKey</p></td><td><p>999</p></td><td><p>String</p></td><td><p>Secured key for communication with Napas</p></td><td><p>R</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>napasKey</p></td><td><p>9999</p></td><td><p>String</p></td><td><p>Secured key for data encryption</p></td><td><p>R</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>serviceCode</p></td><td><p>50</p></td><td><p>String</p></td><td><p>EC_CASHIN: used for cash in to e-wallet transaction</p><p>WHITELABEL: used for white label payment gateway transaction.</p><p>LINK_EW: used for link a card to e-wallet transaction.</p><p>AUTOPAY: used for auto pay transaction</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>submerchantCode</p></td><td><p>100</p></td><td><p>String</p></td><td><p>Code of sub-merchant (required if partner is using White label service)</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>submerchantCategory</p></td><td><p>4</p></td><td><p>String</p></td><td><p>Sub-merchant category</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>submerchantName</p></td><td><p>255</p></td><td><p>String</p></td><td><p>Name of sub-merchant</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>submerchantReferenceId</p></td><td><p>255</p></td><td><p>String</p></td><td><p>ReferenceId of sub-merchant</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>transactionInitiator</p></td><td><p>50</p></td><td><p>String</p></td><td><p>CUSTOMER: the customer initiates the transaction</p><p>MERCHANT: the merchant initiates the transaction</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementType</p></td><td><p>20</p></td><td><p>String</p></td><td><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if the Token to be created with branded card is used for subsequent recurring payment.</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementId</p></td><td><p>50</p></td><td><p>String</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p><p>Required if the Token to be created with branded card is used for subsequent recurring payment.</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementExpiryDate</p></td><td><p>10</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p><p>Required if the Token to be created with branded card is used for subsequent recurring payment.</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementMinimumDaysBetweenPayments</p></td><td><p>9999</p></td><td><p>Integer</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p><p>Required if the Token to be created with branded card is used for subsequent recurring payment.</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementAmountVariablility</p></td><td><p>14</p></td><td><p>Enumeration</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementPaymentFrequency</p></td><td><p>15</p></td><td><p>Enumeration</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>language</p></td><td><p>2</p></td><td><p>String</p></td><td><p>Napas Hosted Form display language</p><p>vi: Vietnamese</p><p>en: English</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>customerId</p></td><td><p>100</p></td><td><p>String</p></td><td><p>The field represents the customer’s account or device identifier used when digitizing card or account information.<br>This value must be unique within the merchant’s system and is required when apiOperation = PAY_WITH_RETURN_TOKEN or CREATE_TOKEN.</p></td><td><p>O</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>customerEmail</p></td><td><p>254</p></td><td><p>String</p></td><td><p>Customer email</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>customerHomePhone</p></td><td><p>20</p></td><td><p>String</p></td><td><p>Customer home phone</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>customerMobilePhone</p></td><td><p>20</p></td><td><p>String</p></td><td><p>Customer mobile phone</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>customerWorkPhone</p></td><td><p>20</p></td><td><p>String</p></td><td><p>Customer work phone</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrCity</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The city portion of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrCom</p></td><td><p>100</p></td><td><p>String</p></td><td><p>The name of the company associated with this address. (for international cards only)</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrCountry</p></td><td><p>3</p></td><td><p>String</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrPostcodeZip</p></td><td><p>10</p></td><td><p>String</p></td><td><p>The post code or zip code of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrStateProvinceCode</p></td><td><p>3</p></td><td><p>String</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrStreet</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The first line of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrStreet2</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The second line of the address (if provided).</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrStreet3</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The third line of the address (if provided).</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrCity</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The city portion of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrCom</p></td><td><p>100</p></td><td><p>String</p></td><td><p>The name of the company associated with this address. (for international cards only)</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrCountry</p></td><td><p>3</p></td><td><p>String</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrPostcodeZip</p></td><td><p>10</p></td><td><p>String</p></td><td><p>The post code or zip code of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrStateProvinceCode</p></td><td><p>3</p></td><td><p>String</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrStreet</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The first line of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrStreet2</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The second line of the address (if provided).</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrStreet3</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The third line of the address (if provided).</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr></tbody></table>

\*R: field must be presented

\*RE: field must be presented and have the same value as in Data Key transaction request.

\*O: field is optional

\*C: field is conditional

## 4.6. Payment Page Integration

To integrate Napas Hosted Form, partner must obtain _dataKey_ and _napasKey_ from DATA\_KEY API, then generate a HTML script as below:

<form id="merchant-form" action="https://web.merchant.com/result-page" method="POST"></form>
<div id="napas-widget-container"></div>
<script
    type="text/javascript"
    id="napas-widget-script"
    src="https://{domain}/web/js/napas.paymentpage.min.js"
    merchantId="APITEST"
    clientIP="192.168.1.1"
    deviceId="ID_12345678"
    environment="WebApp"
    cardScheme="CreditCard"
    enable3DSecure="true"
    apiOperation="PAY"
    orderAmount="150000"
    orderCurrency="VND"
    orderReference="Thanh toan hoa don"
    orderId="ORD_841015"
    channel=" 6014 "
    sourceOfFundsType="CARD"
    customerId = “123456789”

    dataKey="67rw9xTZKtKtM8xdkbD9JbBY1azODvXm0itIoQzcliSnYGBpM1+itqxhDrDkcyHIJpibtop+bl+aGWgCN48K/aKIP8uI6dJ016ZKJDiwIs0Z3AuGWD/cx/NE53KpORVEg1VVly2X8qHMMXf3D4pzb89J9Nji76GteprMvNhuhrNjQ3y1yqjtCGPOvSEwmERxnMJpYRNNBEOLc0XX6H3K0pnNOBxRlKlK/l0u94DwU+rabu8GrRqdkmeCm0J/vQfLpZ3CLVO4XMhNg1Aw/N0PaIZp7JonWRojZ1iBbwtjINZUMp1KYd6X8dfnAIzprgoo9EAbe0PTwf8czBLjdNUYih8D9BxLxVuWXZMMzXgyKV0zqP4ilhn14Cvet8liuhLySgMk6yhfpp6T7trxEQeqz3a/KIyjOKbaS6+cOSMWJKM="
    napasKey="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCX0yRwcCBZIMrOhtdr2eO2hLlLtSmGERW+NM1LoXLbg11fWPucJkqwqtLFrVHwPs6RR5wqsOk7UNf8PDLEgZFB3ybUed/XeWKpSBuDO+pZf5neVCZ0blzDfZlaNaY3IL34QIgu9/zq/BlyjbIu/BSKl//Ugatc+bVRJX0+uD1XJwIDAQAB:MIIBsDCCARkCBgFaR+TbpTANBgkqhkiG9w0BAQUFADAeMRwwGgYDVQQDExNUZXN0IENBIENlcnRpZmljYXRlMB4XDTE3MDIxNjE3MDc0NVoXDTE3MDIxNzE3MDc0NVowHjEcMBoGA1UEAxMTVGVzdCBDQSBDZXJ0aWZpY2F0ZTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAl9MkcHAgWSDKzobXa9njtoS5S7UphhEVvjTNS6Fy24NdX1j7nCZKsKrSxa1R8D7OkUecKrDpO1DX/DwyxIGRQd8m1Hnf13liqUgbgzvqWX+Z3lQmdG5cw32ZWjWmNyC9+ECILvf86vwZco2yLvwUipf/1IGrXPm1USV9Prg9VycCAwEAATANBgkqhkiG9w0BAQUFAAOBgQBIUEse2etILP+33D9YZbgU0efBRcSa94pgyC2ErymvHwWXMs9urF2hyK3Xy7+Ul8mg4m0iDVwBIBv0X1T0cQACe07ZOpu4M2B4XpdGri4Y8KDuoHMSb23w4IhvneFUOWf0+kXbJoczKalT/y8Y866zn9OOTLPdUbsxZ5Kto5WLXw=="
>
<\/script>

_Parameter details:_

<table><tbody><tr><td><p>Field name</p></td><td><p>Max Length</p></td><td><p>Field Type</p></td><td><p>Description</p></td><td><p>Pay</p></td><td><p>Pay with returned Token</p></td><td><p>Create Token</p></td></tr><tr><td><p>action</p></td><td><p>999</p></td><td><p>String</p></td><td><p>URL of the webpage that shows transaction result, includes https://...</p></td><td><p>R</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>merchantId</p></td><td><p>32</p></td><td><p>String</p></td><td><p>Partner identifier</p></td><td><p>R</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>clientIP</p></td><td><p>512</p></td><td><p>String</p></td><td><p>Customer’s IP address</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>deviceId</p></td><td><p>100</p></td><td><p>String</p></td><td><p>Customer’s identifier, this will be returned after processing transaction</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>environment</p></td><td><p>20</p></td><td><p>String</p></td><td><p>Integration environment:</p><p>WebApp: desktop web</p><p>MobileApp: mobile web/mobile app</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>cardScheme</p></td><td><p>50</p></td><td><p>String</p></td><td><p><em>CreditCard</em>: use in case of branded cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p><p><em>QRECOM: </em>for using QRCode as a payment method</p><p><em>APPLEPAYECOM: </em>for using Apple Pay as a payment method</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>enable3DSecure</p></td><td><p>10</p></td><td><p>String</p></td><td><p>Supports 3DSecure to authorize cardholder</p><p>true: enables 3DSecure flow</p><p>false: disables 3DSecure flow</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>apiOperation</p></td><td><p>100</p></td><td><p>String</p></td><td><p>PAY: normal payment, supports for payment methods via card, bank account, QR code, Apple Pay and link card to e-wallet account.</p><p>PAY_WITH_RETURNED_TOKEN: pay and tokenize card/account details.</p><p>CREATE_TOKEN: store a payment instrument against a token</p></td><td><p>R</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>orderAmount</p></td><td><p>12</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>The total amount for the order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number for a domestic transactions</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>orderCurrency</p></td><td><p>3</p></td><td><p>String</p></td><td><p>Order currency</p><p>(for Token Creation, the value must be VND)</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>orderReference</p></td><td><p>512</p></td><td><p>String</p></td><td><p>Order short description (display on form)</p><p>Required for CASHIN transactions, the value must start with “CASHIN” prefix</p></td><td><p>R</p></td><td><p>C</p></td><td><p>R</p></td></tr><tr><td><p>orderId</p></td><td><p>40</p></td><td><p>String (max 40)</p></td><td><p>Order identifier (must be unique)</p></td><td><p>RE</p></td><td><p>RE</p></td><td><p>RE</p></td></tr><tr><td><p>channel</p></td><td><p>20</p></td><td><p>String</p></td><td><p>Partner business code</p></td><td><p>R</p></td><td><p>R</p></td><td><p>O</p></td></tr><tr><td><p>sourceOfFundsType</p></td><td><p>20</p></td><td><p>String</p></td><td><p>CARD / ACCOUNT/ DEEPLINK</p></td><td><p>R</p></td><td><p>R</p></td><td><p>O</p></td></tr><tr><td><p>dataKey</p></td><td><p>999</p></td><td><p>String</p></td><td><p>Secured key for communication with Napas</p></td><td><p>R</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>napasKey</p></td><td><p>9999</p></td><td><p>String</p></td><td><p>Secured key for data encryption</p></td><td><p>R</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>serviceCode</p></td><td><p>50</p></td><td><p>String</p></td><td><p>EC_CASHIN: used for cashin to e-wallet transaction</p><p>WHITELABEL: used for whitelabel payment gateway transaction.</p><p>LINK_EW: used for link a card to e-wallet transaction.</p><p>AUTOPAY: used for auto pay transaction</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>submerchantCode</p></td><td><p>100</p></td><td><p>String</p></td><td><p>Code of sub-merchant (required if partner is using Whitelabel service)</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>submerchantCategory</p></td><td><p>4</p></td><td><p>String</p></td><td><p>Sub-merchant category</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>submerchantName</p></td><td><p>255</p></td><td><p>String</p></td><td><p>Name of sub-merchant</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>submerchantReferenceId</p></td><td><p>255</p></td><td><p>String</p></td><td><p>ReferenceId of sub-merchant</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>transactionInitiator</p></td><td><p>50</p></td><td><p>String</p></td><td><p>CUSTOMER: the customer initiates the transaction</p><p>MERCHANT: the merchant initiates the transaction</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementType</p></td><td><p>20</p></td><td><p>String</p></td><td><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if the Token to be created with branded card is used for subsequent recurring payment.</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementId</p></td><td><p>50</p></td><td><p>String</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p><p>Required if the Token to be created with branded card is used for subsequent recurring payment.</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementExpiryDate</p></td><td><p>10</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p><p>Required if the Token to be created with branded card is used for subsequent recurring payment.</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementMinimumDaysBetweenPayments</p></td><td><p>9999</p></td><td><p>Integer</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p><p>Required if the Token to be created with branded card is used for subsequent recurring payment.</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementAmountVariablility</p></td><td><p>14</p></td><td><p>Enumeration</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>agreementPaymentFrequency</p></td><td><p>15</p></td><td><p>Enumeration</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td><td><p>C</p></td><td><p>C</p></td><td><p>C</p></td></tr><tr><td><p>language</p></td><td><p>2</p></td><td><p>String</p></td><td><p>Napas Hosted Form display language</p><p>vi: Vietnamese</p><p>en: English</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>customerId</p></td><td><p>100</p></td><td><p>String</p></td><td><p>The field represents the customer’s account or device identifier used when digitizing card or account information.<br>This value must be unique within the merchant’s system and is required when apiOperation = PAY_WITH_RETURN_TOKEN or CREATE_TOKEN.</p></td><td><p>O</p></td><td><p>R</p></td><td><p>R</p></td></tr><tr><td><p>customerEmail</p></td><td><p>254</p></td><td><p>String</p></td><td><p>Customer email</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>customerHomePhone</p></td><td><p>20</p></td><td><p>String</p></td><td><p>Customer home phone</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>customerMobilePhone</p></td><td><p>20</p></td><td><p>String</p></td><td><p>Customer mobile phone</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>customerWorkPhone</p></td><td><p>20</p></td><td><p>String</p></td><td><p>Customer work phone</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrCity</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The city portion of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrCom</p></td><td><p>100</p></td><td><p>String</p></td><td><p>The name of the company associated with this address. (for international cards only)</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrCountry</p></td><td><p>3</p></td><td><p>String</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrPostcodeZip</p></td><td><p>10</p></td><td><p>String</p></td><td><p>The post code or zip code of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrStateProvinceCode</p></td><td><p>3</p></td><td><p>String</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrStreet</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The first line of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrStreet2</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The second line of the address (if provided).</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>billAddrStreet3</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The third line of the address (if provided).</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrCity</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The city portion of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrCom</p></td><td><p>100</p></td><td><p>String</p></td><td><p>The name of the company associated with this address. (for international cards only)</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrCountry</p></td><td><p>3</p></td><td><p>String</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrPostcodeZip</p></td><td><p>10</p></td><td><p>String</p></td><td><p>The post code or zip code of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrStateProvinceCode</p></td><td><p>3</p></td><td><p>String</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrStreet</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The first line of the address.</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrStreet2</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The second line of the address (if provided).</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr><tr><td><p>shipAddrStreet3</p></td><td><p>50</p></td><td><p>String</p></td><td><p>The third line of the address (if provided).</p></td><td><p>O</p></td><td><p>O</p></td><td><p>O</p></td></tr></tbody></table>

\*R: field must be presented

\*RE: field must be presented and have the same value as in Data Key transaction request.

\*O: field is optional

\*C: field is conditional

For details of the returned result, refer to the **Response From Napas** section.

# 5. Direct API Implementation

## 5.1. Payment Flow

![Sample request image.](./images/direct-payment-flow.png 'Sample request.')

## 5.2. Integration Flow

![Sample request image.](./images/direct-integration-flow.png 'Sample request.')

## 5.3. Access Token API

**Header parameters list**: Refer to section [4.3 Access Token API](#43_access_token_api) in “HOSTED CHECKOUT IMPLEMENTATION” section.

## 5.4. International APIs

### 5.4.1. Pay

This flow is not recommended unless Partner has specific requirements that must bypass the 3DS verification of cardholder. Please discuss with Napas team carefully before getting approval for integrating this flow.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>PAY: Authorise the payment and transfer funds. Only use for branded cards</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>14</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.maximumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The maximum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.numberOfPayments</p></td><td><p>Integer</p></td><td><p>99</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The number of merchant-initiated payments within the recurring payment agreement</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>agreement.startDate</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>This is the effective start date for the payment agreement.</p><p>Cannot be in the past.Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>authorizationResponse</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>CommercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network.</p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction.</p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>TransactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td></td><td><p>C</p></td><td><p>The validation code returned by the issuer.</p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>O</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer.</p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The device information</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: only use for recurring payments.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td><p>inputParameters</p></td><td></td><td></td><td></td><td></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>CreditCard</em>: use in case of international cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td></td><td></td><td><p>R</p></td><td></td><td><p>Supports 3DSecure for authorizing cardholder when using CreditCard.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>dataKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string that represents the session of merchant which wants to do server-hosted form.</p></td></tr><tr><td><p>napasKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string used for security reasons. This is a public key, used in checking signature of Napas.</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/APITEST/order/ORD_123456/transaction/TXN_123456</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request (Pay with Card):_**

{
  "apiOperation": "PAY",
  "order": {
    "amount": 10000,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "provided": {
      "card": {
        "number": "512345xxxxxx0008",
        "expiry": {
          "month": "01",
          "year": "39"
        },
        "securityCode": "100"
      }
    }
  },
  "channel": "6014"
}

**_Request (Pay with Token):_**

{
  "apiOperation": "PAY",
  "order": {
    "amount": "10000",
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "token": "4005550856160019"
  },
  "channel": "4121"
}

**_Response:_**

{
  "apiOperation": "PAY",
  "authorizationResponse": {
    "date": "0220",
    "financialNetworkDate": "2017-02-20",
    "processingCode": "003000",
    "responseCode": "00",
    "returnAci": "Y",
    "stan": "234120",
    "time": "024228"
  },
  "merchantId": "APITEST",
  "order": {
    "amount": "10000",
    "creationTime": "2017-02-20T02:42:28.528Z",
    "currency": "VND",
    "id": "ORD_123456",
    "reference": "ORD_123456",
    "totalAuthorizedAmount": "10000",
    "totalCapturedAmount": "10000",
    "totalRefundedAmount": "0"
  },
  "response": {
    "acquirerCode": "00",
    "acquirerMessage": "Approved",
    "gatewayCode": "APPROVED",
    "message": "Transaction is successful."
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "VISA",
        "expiry": {
          "month": "5",
          "year": "17"
        },
        "issuer": "JPMORGAN CHASE BANK, N.A.",
        "number": "400555xxxxxx0019",
        "scheme": "VISA"
      }
    },
    "token": "4005550856160019",
    "type": "CARD"
  },
  "timeOfRecord": "2017-02-20T02:42:28.528Z",
  "transaction": {
    "acquirer": {
      "batch": "20170220",
      "date": "0220",
      "id": "VCB_S2I",
      "merchantId": "000101596992725"
    },
    "amount": "10000",
    "authorizationCode": "006529",
    "currency": "VND",
    "id": "TXN_123456",
    "receipt": "705102234120",
    "type": "PAYMENT"
  },
  "channel": "4121",
  "version": "1"
}

### 5.4.2. Pay with 3DSecure

In this flow, depending on the 3DS readiness of the card attached to token, partner may receive either of the following results:

* If the card attached to token is enrolled with 3DS, partner receive the SUCCESS result with a htmlBodyContent field – this is the html redirecting a client to the 3DS authentication website of the issuer bank. Partner have to parse data in this field and display it for client to perform 3DS authentication step.

**_Transaction results will be returned in two ways:_**

* **_Form Submit_**: The full result will be submitted to the URL address that partner placed in the responseUrl parameter in the request.
* **_IPN_**: Full result will be POST to the IPN address registered with Napas.

\* Napas always returns results via IPN in this flow when the transaction is complete, regardless of the result of the payment transaction.

\* Partner should be aware of duplicate records of success transactions when receiving both Form Submit and IPN results.

* If the card attached to token is not enrolled with 3DS, partner will receive the result which is the final result of the payment transaction. There is no IPN result in this case.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}/3DSecureId/{3dsTransactionId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>PAY_WITH_3DS: Authorise the payment and transfer funds following the 3DS authentication flow. Only use for branded cards.</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>14</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.maximumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The maximum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.numberOfPayments</p></td><td><p>Integer</p></td><td><p>99</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The number of merchant-initiated payments within the recurring payment agreement.</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>agreement.startDate</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>This is the effective start date for the payment agreement.</p><p>Cannot be in the past.Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Information on 3DSecure fields.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect</p></td><td></td><td></td><td></td><td></td><td><p>A collection of parameters required to build the HTML form that is redirected to the ACS.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple</p></td><td></td><td></td><td></td><td></td><td><p>The simple field is the response returned to those merchants who have chosen the simple option for form submission.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple.htmlBodyContent</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>The generated form to post to the cardholder’s browser.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.responseUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>2048</p></td><td><p>R</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p></td></tr><tr><td><p>3Dsecure.summaryStatus</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The summarized response from the card issuer and the payment gateway indicating the overall status of the attempt to authenticate the cardholder.</p></td></tr><tr><td><p>3DSecure.xid</p></td><td></td><td><p>128</p></td><td></td><td></td><td><p>A unique transaction identifier generated by the Payment Gateway on behalf of the merchant to identify the 3DS transaction.</p></td></tr><tr><td><p>3DSecureId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>A unique identifier supplied by the merchant for the authentication.</p></td></tr><tr><td><p>authorizationResponse</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>CommercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network. </p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction. </p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>TransactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td></td><td><p>C</p></td><td><p>The validation code returned by the issuer. </p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>O</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The device information</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>The response code which indicates the status.</p></td></tr><tr><td><p>response.3DSecure.gatewayCode</p></td><td><p>String</p></td><td><p>99</p></td><td></td><td><p>C</p></td><td><p>The detailed response from the payment gateway to indicate the status of the 3DS authentication.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: only use for recurring payments.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td><p>inputParameters</p></td><td></td><td></td><td></td><td></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>CreditCard</em>: use in case of international cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td></td><td></td><td><p>R</p></td><td></td><td><p>Supports 3DSecure for authorizing cardholder when using CreditCard.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>dataKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string that represents the session of merchant which wants to do server-hosted form.</p></td></tr><tr><td><p>napasKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string used for security reasons. This is a public key, used in checking signature of Napas.</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/APITEST/order/ORD_123456/transaction/TXN_123456/3DSecureId/3DS_123456</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request (Pay with Card):_**

{
  "apiOperation": "PAY_WITH_3DS",
  "3DSecure": {
    "authenticationRedirect": {
      "responseUrl": "https://{domain}/ecom3stg/finalHostedCheckout.jsp?merchantId="
    }
  },
  "sourceOfFunds": {
    "provided": {
      "card": {
        "number": "512345xxxxxx0008",
        "expiry": {
          "month": "01",
          "year": "39"
        },
        "securityCode": "100",
        "nameOnCard": "NGUYEN VAN A"
      }
    }
  },
  "order": {
    "currency": "VND",
    "amount": "10000"
  },
  "channel": "6014",
  "customer": {
    "firstName": "NGUYEN",
    "lastName": "VAN A"
  }
}

**_Request (Pay with Token):_**

{
  "apiOperation": "PAY_WITH_3DS",
  "3DSecure": {
    "authenticationRedirect": {
      "responseUrl": "https://{domain}/ecom3stg/finalHostedCheckout.jsp?merchantId="
    }
  },
  "sourceOfFunds": {
    "token": ""
  },
  "order": {
    "currency": "VND",
    "amount": "10000"
  },
  "channel": "6014",
  "customer": {
    "firstName": "NGUYEN",
    "lastName": "VAN A"
  }
}

**_Response (card is enrolled with 3DS):_**

{
  "apiOperation": "PAY_WITH_3DS",
  "response": {
    "3DSecure": {
      "gatewayCode": "CARD_ENROLLED"
    }
  },
  "result": "SUCCESS",
  "merchantId": "APITEST",
  "3DSecure": {
    "xid": "rL+iHJe59goFbf1vMTkbOA3WOuw=",
    "authenticationRedirect": {
      "simple": {
        "htmlBodyContent": "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"><html><head><title>Process Secure Payment</title><meta http-equiv=\"content-type\" content=\"text/html;charset=UTF-8\"><meta name=\"description\" content=\"Process Secure Payment\"><meta name=\"robots\" content=\"noindex\"><style type=\"text/css\">body {font-family:\"Trebuchet MS\",sans-serif; background-color: #FFFFFF; }#msg {border:5px solid #666; background-color:#fff; margin:20px; padding:25px; max-width:40em; -webkit-border-radius: 10px; -khtml-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px;}#submitButton { text-align: center ; }#footnote {font-size:0.8em;}</style></head><body onload=\"return window.document.echoForm.submit()\"><form name=\"echoForm\" method=\"POST\" action=\"https://secure.uat.tnspayments.com:443/acs/MastercardACS/9b5ce21b-f271-47a4-a456-a21c8086edea\" accept-charset=\"UTF-8\"><input type=\"hidden\" name=\"PaReq\" value=\"eAFVUdtSwjAQfWeGf+j0VW2SlspltmFAZMCRi1L1ubQROtIU0pbiq7/jX/klbgp4yVPObvbknLPQPSQbYy9UFqfSM5lFTUPIMI1iufLMJ3941TK7vF4Df62EGCxEWCjBYSKyLFgJI44887plN1m7YXKY9x7FjsOJjSOZZQM5QxxS4TqQOYcg3PXHU+46rsMokBOERKjxgD9M+1n1DaoQFA8DcuyADBLBe/Oxf7vwgVQIwrSQuXrnTdoAcgZQqA1f5/m2Q0hZlpYMtkFmhWli7SUQ3QTyK2deaGEZ+jrEEVf3F/HoTrjtVTpcvrL9xH9bznrOy6woPSD6BURBLrhNWZPaNjWo02m0Oq4LpKpDkGhJ/Hk6ML4+Phm9RA9o8liFrf6sdwRM2wPytwQYsMINnA2dEYjDNpUCeXHg5w7kV/vNSAcb5hihy2yn4Wry6rR0xFVDs8QYFipHuScARI+S0/Ywl2q3WPm383rtGzzYtLU=\"><input type=\"hidden\" name=\"TermUrl\" value=\"https://dps-staging.napas.com.vn/api/rest3ds/version/1/merchant/APITEST/order/ORD_111111/transaction/TXN_111111/3DSecureId/3DS_111111/response/1487562511041\"><input type=\"hidden\" name=\"MD\" value=\"\"><noscript><div id=\"msg\"><div id=\"submitButton\"><input type=\"submit\" value=\"Click here to continue\" class=\"button\"></div></div></noscript></form></body></html>\n"
      }
    },
    "summaryStatus": "CARD_ENROLLED"
  },
  "3DSecureId": "3DS_111111"
}

**_Response (card is not enrolled with 3DS):_**

{
  "apiOperation": "PAY",
  "authorizationResponse": {
    "commercialCardIndicator": "1",
    "date": "0220",
    "financialNetworkDate": "2017-02-20",
    "processingCode": "003000",
    "responseCode": "00",
    "stan": "239270",
    "time": "065456",
    "transactionIdentifier": "011160"
  },
  "merchantId": "APITEST",
  "order": {
    "amount": "10000",
    "creationTime": "2017-02-20T06:54:56.446Z",
    "currency": "VND",
    "id": "ORD_112233",
    "reference": "ORD_112233",
    "totalAuthorizedAmount": "10000",
    "totalCapturedAmount": "10000",
    "totalRefundedAmount": "0"
  },
  "response": {
    "acquirerCode": "00",
    "acquirerMessage": "Approved",
    "gatewayCode": "APPROVED",
    "message": "Transaction is successful."
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "MASTERCARD",
        "expiry": {
          "month": "5",
          "year": "17"
        },
        "issuer": "U.S. BANK NATIONAL ASSOCIATION, ND",
        "number": "511111xxxxxx1118",
        "scheme": "MASTERCARD"
      }
    },
    "token": "5111115498061118",
    "type": "CARD"
  },
  "timeOfRecord": "2017-02-20T06:54:56.446Z",
  "transaction": {
    "acquirer": {
      "batch": "20170220",
      "date": "0220",
      "id": "VCB_S2I",
      "merchantId": "000101596992725",
      "transactionId": "011160"
    },
    "amount": "10000",
    "authorizationCode": "006648",
    "currency": "VND",
    "id": "TXN_112233",
    "receipt": "705106239270",
    "type": "PAYMENT"
  },
  "channel": "4121",
  "version": "1",
  "3DSecure": {
    "enrollmentStatus": "NOT_ENROLLED",
    "xid": "VEU2olVq0i16LEYyzKHC2I20wzA="
  },
  "3DSecureId": "3DS_112233"
}

### 5.4.3. Authorize

Request to obtain an authorization for a proposed funds transfer. An authorization is a response from a financial institution indicating that payment information is valid and funds are available in the payers account.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>AUTHORIZE: Request to obtain an authorization for a proposed funds transfer. Only use for branded cards.</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>14</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.maximumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The maximum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.numberOfPayments</p></td><td><p>Integer</p></td><td><p>99</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The number of merchant-initiated payments within the recurring payment agreement.</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>agreement.startDate</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>This is the effective start date for the payment agreement.</p><p>Cannot be in the past.Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>authorizationResponse</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>CommercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network. </p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction. </p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>TransactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td></td><td><p>C</p></td><td><p>The validation code returned by the issuer. </p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>O</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The device information</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: only use for recurring payments.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td><p>inputParameters</p></td><td></td><td></td><td></td><td></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>CreditCard</em>: use in case of international cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td></td><td></td><td><p>R</p></td><td></td><td><p>Supports 3DSecure for authorizing cardholder when using CreditCard.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>dataKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string that represents the session of merchant which wants to do server-hosted form.</p></td></tr><tr><td><p>napasKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string used for security reasons. This is a public key, used in checking signature of Napas.</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/TCTTWL/order/ORD_575070/transaction/TXN_575070</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request (with Card):_**

{
  "apiOperation": "AUTHORIZE",
  "order": {
    "amount": 10000,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "provided": {
      "card": {
        "number": "xxxx",
        "expiry": {
          "month": "01",
          "year": "39"
        },
        "securityCode": "100"
      }
    }
  },
  "channel": "6014"
}

**_Request (with Token):_**

{
  "apiOperation": "AUTHORIZE",
  "order": {
    "amount": 10000,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "token": ""
  },
  "channel": "6014"
}

**_Response:_**

{
  "apiOperation": "AUTHORIZE",
  "authorizationResponse": {
    "cardSecurityCodeError": "M",
    "commercialCardIndicator": "1",
    "date": "0402",
    "financialNetworkDate": "2025-04-01",
    "posData": "1025104006600",
    "posEntryMode": "812",
    "processingCode": "003000",
    "responseCode": "00",
    "stan": "166832",
    "time": "041028",
    "transactionIdentifier": "000KB1"
  },
  "merchantId": "TCTTWL",
  "order": {
    "amount": "10000",
    "creationTime": "2025-04-02T04:10:28.245Z",
    "currency": "VND",
    "id": "ORD_575070",
    "reference": "ORD_575070",
    "totalAuthorizedAmount": "10000",
    "totalCapturedAmount": "0",
    "totalRefundedAmount": "0",
    "totalDisbursedAmount": "0",
    "authenticationStatus": "AUTHENTICATION_NOT_IN_EFFECT",
    "merchantCategoryCode": "5969",
    "lastUpdatedTime": "2025-04-02T04:10:28.859Z",
    "merchantAmount": "10000",
    "merchantCurrency": "VND",
    "chargeback": {
      "currency": "VND",
      "amount": "0"
    },
    "certainty": "FINAL"
  },
  "response": {
    "acquirerCode": "00",
    "acquirerMessage": "Approved",
    "cardSecurityCode": {
      "acquirerCode": "M",
      "gatewayCode": "MATCH"
    },
    "gatewayCode": "SUCCESS",
    "message": "Transaction is successful.",
    "gatewayRecommendation": "NO_ACTION"
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "MASTERCARD",
        "expiry": {
          "month": "1",
          "year": "39"
        },
        "number": "512345xxxxxx0008",
        "scheme": "MASTERCARD",
        "storedOnFile": "NOT_STORED"
      }
    },
    "type": "CARD"
  },
  "timeOfRecord": "2025-04-02T04:10:28.283Z",
  "transaction": {
    "acquirer": {
      "batch": "20250402",
      "date": "0402",
      "id": "SACOMBANK_S2I",
      "merchantId": "000000060332640",
      "transactionId": "000KB1"
    },
    "amount": "10000",
    "authorizationCode": "203297",
    "currency": "VND",
    "id": "TXN_575070",
    "receipt": "509204166832",
    "type": "AUTHORIZATION",
    "authenticationStatus": "AUTHENTICATION_NOT_IN_EFFECT",
    "stan": "166832"
  },
  "version": "1",
  "timeOfLastUpdate": "2025-04-02T04:10:28.859Z"
}

### 5.4.4. Authorize with 3DS

Request to obtain an authorization for a proposed funds transfer. An authorization is a response from a financial institution indicating that payment information is valid and funds are available in the payers account.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}/3DSecureId/{3dsTransactionId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>AUTHORIZE_WITH_3DS: Request to obtain an authorization for a proposed funds transfer using 3DS.</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>14</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.maximumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The maximum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.numberOfPayments</p></td><td><p>Integer</p></td><td><p>99</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The number of merchant-initiated payments within the recurring payment agreement.</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>agreement.startDate</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>This is the effective start date for the payment agreement.</p><p>Cannot be in the past.Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Information on 3DSecure fields.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect</p></td><td></td><td></td><td></td><td></td><td><p>A collection of parameters required to build the HTML form that is redirected to the ACS.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple</p></td><td></td><td></td><td></td><td></td><td><p>The simple field is the response returned to those merchants who have chosen the simple option for form submission.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple.htmlBodyContent</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>The generated form to post to the cardholder’s browser.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.responseUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>2048</p></td><td><p>R</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p></td></tr><tr><td><p>3Dsecure.summaryStatus</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The summarized response from the card issuer and the payment gateway indicating the overall status of the attempt to authenticate the cardholder.</p></td></tr><tr><td><p>3DSecure.xid</p></td><td></td><td><p>128</p></td><td></td><td></td><td><p>A unique transaction identifier generated by the Payment Gateway on behalf of the merchant to identify the 3DS transaction.</p></td></tr><tr><td><p>3DSecureId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>A unique identifier supplied by the merchant for the authentication.</p></td></tr><tr><td><p>authorizationResponse</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>CommercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network. </p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction. </p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>TransactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td></td><td><p>C</p></td><td><p>The validation code returned by the issuer. </p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>O</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The device information</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>The response code which indicates the status.</p></td></tr><tr><td><p>response.3DSecure.gatewayCode</p></td><td><p>String</p></td><td><p>99</p></td><td></td><td><p>C</p></td><td><p>The detailed response from the payment gateway to indicate the status of the 3DS authentication.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: only use for recurring payments.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p></td></tr><tr><td><p>sourceOfFunds.provided.account</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>C</p></td><td><p>Source of fund provided account data group.</p><p>Details of the bank account.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Code of the issuing bank.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountName</p></td><td><p>Data is a string that consist of the characters A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s bank account name</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s bank account number</p></td></tr><tr><td><p>sourceOfFunds.provided.account. identificationNumber</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s indentification number or passport number</p></td></tr><tr><td><p>sourceOfFunds.provided.account. phoneNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s phone number (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.ibUsername</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s internet banking username used to login to the issuer bank’s internet banking</p></td></tr><tr><td><p>sourceOfFunds.provided.account.email</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z._@</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s email (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.taxCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s tax code (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.hardToken</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s hard token (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.customerCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s customer code (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.deeplink</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>C</p></td><td><p>Issuer Bank payment information via deeplink</p></td></tr><tr><td><p>sourceOfFunds.provided.deeplink.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Issuer code information selected by the user from the issuer bank list by Napas provided to the merchant</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>transaction.otp</p></td><td><p>Data consist of a-z, A-Z, 0-9 characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>One time password, use for local purpose</p></td></tr><tr><td><p>transaction.typeOfVerification</p></td><td></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Indicates the type of verification performed with debit/atm card.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>OTP: in this case, transaction.otp will contain the OTP value sent to payer (payer inputs this value).</p><p>PIN: in this case, transaction.otp will contains the PIN value (payer inputs this value).</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td><p>inputParameters</p></td><td></td><td></td><td></td><td></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>CreditCard</em>: use in case of international cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td></td><td></td><td><p>R</p></td><td></td><td><p>Supports 3DSecure for authorizing cardholder when using CreditCard.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>dataKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string that represents the session of merchant which wants to do server-hosted form.</p></td></tr><tr><td><p>napasKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string used for security reasons. This is a public key, used in checking signature of Napas.</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/NAPASTEST/order/ORD_645343/transaction/TXN_645343/3DSecureId/TXN_645343</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request (with Card):_**

{
  "apiOperation": "AUTHORIZE_WITH_3DS",
  "3DSecure": {
    "authenticationRedirect": {
      "responseUrl": "<https://test-merchant.napas.com.vn/ecom3stg/finalHostedCheckout.jsp?merchantId=>"
    }
  },
  "sourceOfFunds": {
    "provided": {
      "card": {
        "number": "512345xxxxxx0008",
        "expiry": {
          "month": "01",
          "year": "39"
        },
        "securityCode": "100",
        "nameOnCard": "NGUYEN VAN A"
      }
    }
  },
  "order": {
    "currency": "VND",
    "amount": "10000"
  },
  "channel": "6014",
  "customer": {
    "firstName": "NGUYEN",
    "lastName": "VAN A"
  }
}

**_Request (with Token):_**

{
  "apiOperation": "AUTHORIZE_WITH_3DS",
  "3DSecure": {
    "authenticationRedirect": {
      "responseUrl": "<https://test-merchant.napas.com.vn/ecom3prod/finalHostedCheckout.jsp?merchantId=>"
    }
  },
  "sourceOfFunds": {
    "token": ""
  },
  "order": {
    "currency": "VND",
    "amount": "10000"
  },
  "channel": "6014",
  "customer": {
    "firstName": "NGUYEN",
    "lastName": "VAN A"
  }
}

**_Response:_**

{
  "apiOperation": "AUTHORIZE_WITH_3DS",
  "merchantId": "NAPASTEST",
  "response": {
    "gatewayCode": "CARD_ENROLLED",
    "3DSecure": {
      "gatewayCode": "CARD_ENROLLED"
    }
  },
  "result": "SUCCESS",
  "acsMode": "REDIRECT",
  "3DSecure": {
    "authenticationRedirect": {
       "simple": {
        "htmlBodyContent": "<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width, initial-scale=1.0'><title>NAPAS Payment Service</title></head><body><div class="container" style="display: none;"><div><div class="loading"><div class="loading__letter">N</div><div class="loading__letter">A</div><div class="loading__letter">P</div><div class="loading__letter">A</div><div class="loading__letter">S</div><div class="loading__letter">.</div><div class="loading__letter">.</div><div class="loading__letter">.</div></div><div class="notify"><p lang="en">Processing transaction. Please wait...</p></div></div></div><form id='merchant-form' action='https://dps-staging.napas.com.vn/api/restjs/merchant/NAPASTEST/order/ORD_645343/transaction/TXN_645343/3DSecureId/null/ref/1743414362196/payer' method='POST'></form><div style="height: 100%" id='napas-widget-container'></div><script type='text/javascript' id='napas-widget-script' src='https://dps-staging.napas.com.vn/api/restjs/resources/js/napas.pay.3ds2.min.js'><\/script><div id="iframeMC" style="height: 100%;display: none"><div id="initiate3dsSimpleRedirect" xmlns="http://www.w3.org/1999/html"> <iframe id="methodFrame" name="methodFrame" height="100" width="200" > </iframe> <form id ="initiate3dsSimpleRedirectForm" method="POST" action="https://mtf.gateway.mastercard.com/acs/mastercard/v2/method" target="methodFrame"> <input type="hidden" name="threeDSMethodData" value="eyJ0aHJlZURTTWV0aG9kTm90aWZpY2F0aW9uVVJMIjoiaHR0cHM6Ly9tdGYuZ2F0ZXdheS5tYXN0ZXJjYXJkLmNvbS9jYWxsYmFja0ludGVyZmFjZS9nYXRld2F5L2I1OGNiNzhjNmVkY2E2MzQwOTkyZDNmMzdiMzc3NGQ3ZWQ5OWE4MzNiMDY3MWVmOTgwYWYyMjlmZmI3NTQ3ODMiLCJ0aHJlZURTU2VydmVyVHJhbnNJRCI6IjNkZTY5MDg5LTBlZTgtNDA4ZC1hMTIwLWRlZjA1NDI4YTYzZiJ9" /> </form> <script id="initiate-authentication-script"> var e=document.getElementById("initiate3dsSimpleRedirectForm"); if (e) { e.submit(); if (e.parentNode !== null) { e.parentNode.removeChild(e); } } <\/script> </div></div></body><style>body{overflow:auto;height:auto;margin:0}@font-face{font-family:"Audiowide";src:url(https://dps-staging.napas.com.vn/api/restjs/resources/fonts/Audiowide-Regular.ttf)}#iframeMC>div{height:100%}iframe#challengeFrame{height:100%!important;width:100%!important}.container{height:100vh;background:#fff;display:flex!important;justify-content:center;align-items:center}.loading{display:flex;flex-direction:row;justify-content:center;align-items:center}.loading__letter{font-size:40px;font-weight:700;letter-spacing:4px;text-transform:uppercase;color:#1f407f;animation-name:bounce;animation-duration:2s;animation-iteration-count:infinite;font-family:'Audiowide'}.loading__letter:nth-child(2){animation-delay:.1s}.loading__letter:nth-child(3){animation-delay:.2s}.loading__letter:nth-child(4){animation-delay:.3s}.loading__letter:nth-child(5){animation-delay:.4s}.loading__letter:nth-child(6){animation-delay:.5s}.loading__letter:nth-child(7){animation-delay:.6s}.loading__letter:nth-child(8){animation-delay:.8s}.loading__letter:nth-child(9){animation-delay:1s}.loading__letter:nth-child(10){animation-delay:1.2s}@keyframes bounce{0%{transform:translateY(0)}40%{transform:translateY(-40px)}80%,100%{transform:translateY(0)}}@media (max-width:700px){.loading__letter{font-size:50px}}@media (max-width:340px){.loading__letter{font-size:40px}}</style><div style="display: none" id='clientIPByMerchant'>113.160.66.82</div></html>"
      }
    },
    "summaryStatus": "CARD_ENROLLED"
  }
}

### 5.4.5. Capture

Request to capture funds previously reserved by an authorization. A Capture transaction triggers the movement of funds from the payer's account to the merchant's account.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>CAPTURE: Request to capture funds previously reserved by an authorization.</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>14</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.maximumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The maximum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.numberOfPayments</p></td><td><p>Integer</p></td><td><p>99</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The number of merchant-initiated payments within the recurring payment agreement.</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>agreement.startDate</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>This is the effective start date for the payment agreement.</p><p>Cannot be in the past.Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Information on 3DSecure fields.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect</p></td><td></td><td></td><td></td><td></td><td><p>A collection of parameters required to build the HTML form that is redirected to the ACS.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple</p></td><td></td><td></td><td></td><td></td><td><p>The simple field is the response returned to those merchants who have chosen the simple option for form submission.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple.htmlBodyContent</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>The generated form to post to the cardholder’s browser.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.responseUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>2048</p></td><td><p>R</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p></td></tr><tr><td><p>3Dsecure.summaryStatus</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The summarized response from the card issuer and the payment gateway indicating the overall status of the attempt to authenticate the cardholder.</p></td></tr><tr><td><p>3DSecure.xid</p></td><td></td><td><p>128</p></td><td></td><td></td><td><p>A unique transaction identifier generated by the Payment Gateway on behalf of the merchant to identify the 3DS transaction.</p></td></tr><tr><td><p>3DSecureId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>A unique identifier supplied by the merchant for the authentication.</p></td></tr><tr><td><p>authorizationResponse</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>CommercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network. </p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction. </p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>TransactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td></td><td><p>C</p></td><td><p>The validation code returned by the issuer. </p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>O</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The device information</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>The response code which indicates the status.</p></td></tr><tr><td><p>response.3DSecure.gatewayCode</p></td><td><p>String</p></td><td><p>99</p></td><td></td><td><p>C</p></td><td><p>The detailed response from the payment gateway to indicate the status of the 3DS authentication.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: only use for recurring payments.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td><p>inputParameters</p></td><td></td><td></td><td></td><td></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>CreditCard</em>: use in case of international cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td></td><td></td><td><p>R</p></td><td></td><td><p>Supports 3DSecure for authorizing cardholder when using CreditCard.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>dataKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string that represents the session of merchant which wants to do server-hosted form.</p></td></tr><tr><td><p>napasKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string used for security reasons. This is a public key, used in checking signature of Napas.</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/ZION/order/ORD_936034/transaction/TXN_936777</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
  "apiOperation": "CAPTURE",
  "transaction": {
    "amount": 10000,
    "currency": "VND"
  },
  "channel": "6014"
}

**_Response:_**

{
  "apiOperation": "CAPTURE",
  "authorizationResponse": {
    "cardSecurityCodeError": "M",
    "commercialCard": "888",
    "commercialCardIndicator": "3",
    "posData": "1025104006600",
    "posEntryMode": "812",
    "processingCode": "003000",
    "responseCode": "00",
    "stan": "158508",
    "transactionIdentifier": "123456789"
  },
  "customer": {
    "firstName": "NGUYEN",
    "lastName": "VAN A"
  },
  "device": {
    "browser": "Mozilla",
    "ipAddress": "113.160.66.82"
  },
  "merchantId": "ZION",
  "order": {
    "amount": "10000",
    "creationTime": "2025-03-31T09:54:03.605Z",
    "currency": "VND",
    "id": "ORD_936034",
    "reference": "ORD_936034",
    "totalAuthorizedAmount": "10000",
    "totalCapturedAmount": "10000",
    "totalRefundedAmount": "0",
    "totalDisbursedAmount": "0",
    "merchantCategoryCode": "5999",
    "lastUpdatedTime": "2025-03-31T09:56:35.797Z",
    "merchantAmount": "10000",
    "merchantCurrency": "VND",
    "chargeback": {
      "currency": "VND",
      "amount": "0"
    },
    "certainty": "FINAL"
  },
  "response": {
    "acquirerCode": "00",
    "acquirerMessage": "Approved",
    "cardSecurityCode": {
      "acquirerCode": "M",
      "gatewayCode": "MATCH"
    },
    "gatewayCode": "SUCCESS",
    "message": "Transaction is successful."
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "MASTERCARD",
        "expiry": {
          "month": "1",
          "year": "39"
        },
        "nameOnCard": "NGUYEN VAN A",
        "number": "512345xxxxxx0008",
        "scheme": "MASTERCARD",
        "storedOnFile": "NOT_STORED"
      }
    },
    "type": "CARD"
  },
  "timeOfRecord": "2025-03-31T09:56:35.764Z",
  "transaction": {
    "acquirer": {
      "batch": "20250331",
      "date": "0331",
      "id": "SACOMBANK_S2I",
      "merchantId": "000000060332640",
      "transactionId": "123456789",
      "settlementDate": "2025-03-31",
      "timeZone": "+0700"
    },
    "amount": "10000",
    "authorizationCode": "158508",
    "currency": "VND",
    "id": "TXN_936777",
    "receipt": "509009158508",
    "type": "CAPTURE",
    "stan": "159578"
  },
  "version": "1",
  "timeOfLastUpdate": "2025-03-31T09:56:35.797Z"
}

### 5.4.6. Void

* A void transaction cancels a previous payment transaction. It is only valid if performed on the same processing day as the original payment transaction (before 5:00 PM).
* The void transaction must have the same orderId as the original payment transaction.
* The void transaction has a different transactionId from the original payment transaction, and the transactionId of the original payment transaction must be placed in the targetTransactionId field.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>VOID: Request to void a previous transaction</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>14</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.maximumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The maximum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.numberOfPayments</p></td><td><p>Integer</p></td><td><p>99</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The number of merchant-initiated payments within the recurring payment agreement.</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>agreement.startDate</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>This is the effective start date for the payment agreement.</p><p>Cannot be in the past.Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>authorizationResponse</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>CommercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network. </p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction. </p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>TransactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td></td><td><p>C</p></td><td><p>The validation code returned by the issuer. </p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>O</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The device information</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>The response code which indicates the status.</p></td></tr><tr><td><p>response.3DSecure.gatewayCode</p></td><td><p>String</p></td><td><p>99</p></td><td></td><td><p>C</p></td><td><p>The detailed response from the payment gateway to indicate the status of the 3DS authentication.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p><p>ACCOUNT: for account payments</p><p>DEELINK: for deep link payments</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/APITEST/order/ORD_123456/transaction/TXN_123457</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
  "apiOperation": "VOID",
  "transaction": {
    "targetTransactionId": "TXN_123456"
  },
  "channel": "6014"
}

**_Response:_**

{
  "apiOperation": "VOID",
  "authorizationResponse": {
    "date": "0220",
    "financialNetworkDate": "2017-02-20",
    "processingCode": "003000",
    "responseCode": "00",
    "returnAci": "Y",
    "stan": "234121",
    "time": "024228"
  },
  "merchantId": "APITEST",
  "order": {
    "amount": "10000",
    "creationTime": "2017-02-20T02:42:28.528Z",
    "currency": "VND",
    "id": "ORD_123456",
    "reference": "ORD_123456",
    "totalAuthorizedAmount": "0",
    "totalCapturedAmount": "0",
    "totalRefundedAmount": "0"
  },
  "response": {
    "acquirerCode": "00",
    "acquirerMessage": "Approved",
    "gatewayCode": "APPROVED",
    "message": "Transaction is successful."
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "VISA",
        "expiry": {
          "month": "5",
          "year": "17"
        },
        "issuer": "JPMORGAN CHASE BANK, N.A.",
        "number": "400555xxxxxx0019",
        "scheme": "VISA"
      }
    },
    "token": "4005550856160019",
    "type": "CARD"
  },
  "timeOfRecord": "2017-02-20T09:26:07.022Z",
  "transaction": {
    "acquirer": {
      "batch": "20170220",
      "date": "0220",
      "id": "VCB_S2I",
      "merchantId": "000101596992725"
    },
    "amount": "10000",
    "currency": "VND",
    "id": "TXN_123457",
    "receipt": "705102234120",
    "targetTransactionId": "1026862",
    "type": "VOID_PAYMENT"
  },
  "channel": "6014",
  "version": "1"
}

### 5.4.7. Refund

* This transaction is used to refund to customers.
* Partner can refund many times for the same orderId, as long as the total amount of refund does not exceed the original transaction amount.
* The refund transaction must have the same orderId with the previous payment transaction.
* The refund transaction has a transactionId different from the previous payment transaction, each partial refund transactions for the same order must have unique transactionId.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>REFUND: Request to refund previously captured funds to the payer.</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>14</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.maximumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The maximum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.numberOfPayments</p></td><td><p>Integer</p></td><td><p>99</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The number of merchant-initiated payments within the recurring payment agreement.</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>agreement.startDate</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>This is the effective start date for the payment agreement.</p><p>Cannot be in the past.Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>authorizationResponse</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>CommercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network. </p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction. </p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>TransactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td></td><td><p>C</p></td><td><p>The validation code returned by the issuer. </p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>O</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The device information</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>The response code which indicates the status.</p></td></tr><tr><td><p>response.3DSecure.gatewayCode</p></td><td><p>String</p></td><td><p>99</p></td><td></td><td><p>C</p></td><td><p>The detailed response from the payment gateway to indicate the status of the 3DS authentication.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: only use for recurring payments.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p><p>ACCOUNT: for account payments</p><p>DEELINK: for deep link payments</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/APITEST/order/ORD_112233/transaction/TXN_112244</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
  "apiOperation": "REFUND",
  "transaction": {
    "amount": 10000,
    "currency": "VND"
  },
  "channel": "6014"
}

**_Response:_**

{
  "apiOperation": "REFUND",
  "authorizationResponse": {
    "commercialCardIndicator": "1",
    "date": "0220",
    "financialNetworkDate": "2017-02-20",
    "processingCode": "003000",
    "responseCode": "00",
    "stan": "235121",
    "time": "065456",
    "transactionIdentifier": "011160"
  },
  "merchantId": "APITEST",
  "order": {
    "amount": "10000",
    "creationTime": "2017-02-20T06:54:56.446Z",
    "currency": "VND",
    "id": "ORD_112233",
    "reference": "ORD_112233",
    "totalAuthorizedAmount": "10000",
    "totalCapturedAmount": "10000",
    "totalRefundedAmount": "10000"
  },
  "response": {
    "acquirerCode": "00",
    "gatewayCode": "APPROVED",
    "message": "Transaction is successful."
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "MASTERCARD",
        "expiry": {
          "month": "5",
          "year": "17"
        },
        "issuer": "U.S. BANK NATIONAL ASSOCIATION, ND",
        "number": "511111xxxxxx1118",
        "scheme": "MASTERCARD"
      }
    },
    "token": "5111115498061118",
    "type": "CARD"
  },
  "timeOfRecord": "2017-02-20T09:32:09.503Z",
  "transaction": {
    "acquirer": {
      "batch": "20170220",
      "date": "0220",
      "id": "VCB_S2I",
      "merchantId": "000101596992725",
      "transactionId": "011160"
    },
    "amount": "10000",
    "currency": "VND",
    "id": "TXN_112244",
    "receipt": "705109235121",
    "type": "REFUND"
  },
  "channel": "6014",
  "version": "1"
}

### 5.4.8. Verify Token

Request to verify the cardholder's account before processing the financial transaction.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>VERIFY_TOKEN: Request to verify the cardholder's account before processing the financial transaction. The card is verified using the verification method supported by the acquirer and the data provided in the request.</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>14</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.maximumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The maximum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumAmountPerPayment</p></td><td><p>Decimal</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum amount for a single payment in the series as agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.numberOfPayments</p></td><td><p>Integer</p></td><td><p>99</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The number of merchant-initiated payments within the recurring payment agreement.</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>agreement.startDate</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>This is the effective start date for the payment agreement.</p><p>Cannot be in the past.Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>authorizationResponse</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>CommercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network. </p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction. </p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>TransactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td></td><td><p>C</p></td><td><p>The validation code returned by the issuer. </p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>O</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The device information</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>The response code which indicates the status.</p></td></tr><tr><td><p>response.3DSecure.gatewayCode</p></td><td><p>String</p></td><td><p>99</p></td><td></td><td><p>C</p></td><td><p>The detailed response from the payment gateway to indicate the status of the 3DS authentication.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: only use for recurring payments.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p><p>ACCOUNT: for account payments</p><p>DEELINK: for deep link payments</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/ZION/order/ORD_783089/transaction/TXN_783089</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
  "apiOperation": "VERIFY_TOKEN",
  "order": {
    "currency": "VND"
  },
  "agreement": {
    "type": "RECURRING",
    "id": "12345",
    "amountVariability": "FIXED"
  },
  "sourceOfFunds": {
    "token": "9149468462265267"
  }
}

**_Response:_**

{
  "apiOperation": "VERIFY_TOKEN",
  "gatewayEntryPoint": "WEB_SERVICES_API",
  "merchantId": "ZION",
  "order": {
    "amount": "0",
    "creationTime": "2025-04-02T02:59:39.178Z",
    "currency": "VND",
    "id": "ORD_783089",
    "status": "VERIFIED",
    "totalAuthorizedAmount": "0",
    "totalCapturedAmount": "0",
    "totalRefundedAmount": "0",
    "totalDisbursedAmount": "0",
    "merchantCategoryCode": "5999",
    "lastUpdatedTime": "2025-04-02T02:59:39.139Z",
    "merchantAmount": "0",
    "merchantCurrency": "VND",
    "chargeback": {
      "currency": "VND",
      "amount": "0"
    }
  },
  "response": {
    "acquirerCode": "00",
    "gatewayCode": "SUCCESS",
    "message": "Transaction is successful."
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "MASTERCARD",
        "expiry": {
          "month": "1",
          "year": "39"
        },
        "fundingMethod": "DEBIT",
        "number": "512345xxxxxx0008",
        "scheme": "MASTERCARD"
      }
    },
    "token": "9149468462265267",
    "type": "CARD"
  },
  "timeOfRecord": "2025-04-02T02:59:39.018Z",
  "transaction": {
    "acquirer": {
      "id": "SACOMBANK_S2I",
      "merchantId": "000000060332640"
    },
    "amount": "0",
    "currency": "VND",
    "id": "TXN_783089",
    "receipt": "509202164817",
    "source": "INTERNET",
    "terminal": "80153026",
    "type": "VERIFICATION",
    "stan": "164817"
  },
  "version": "1",
  "agreement": {
    "id": "12345",
    "type": "RECURRING",
    "amountVariability": "FIXED"
  },
  "timeOfLastUpdate": "2025-04-02T02:59:39.139Z"
}

### 5.4.9. Retrieve Order

Request to retrieve the details of an order and all transactions associated with this order.

<table><tbody><tr><td><p>URL (for branded card retrieval)</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/order/{orderId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Response Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td></td><td><p>100</p></td><td><p>O</p></td><td><p>R</p></td><td><p>RETRIEVE: Request to retrieve the details of a transaction</p></td></tr><tr><td><p>authorizationResponse&nbsp;&nbsp;</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError&nbsp;</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard&nbsp;</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network. </p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction. </p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>transactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td></td><td><p>C</p></td><td><p>The validation code returned by the issuer. </p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>O</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td></td><td></td><td></td><td></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>merchantId</p></td><td></td><td><p>999</p></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The total amount for the order. </p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>response</p></td><td></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>sourceOfFunds</p></td><td></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card&nbsp;</p></td><td></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme&nbsp;</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: The payer selected to pay using a credit or debit card. The payer's card details must be provided.</p><p>In case of token using, please send this parameter with value CARD.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction&nbsp;&nbsp;</p></td><td></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>maximum value: 1000000000000</p><p>minimum value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference&nbsp;</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>maximum value: 1000000000000</p><p>minimum value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p></td></tr><tr><td><p>transaction.type</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>10</p></td><td></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>9</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/ZION/order/ORD_250053</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Response:_**

{
  "status": "CAPTURED",
  "apiOperation": "RETRIEVE",
  "customer": {
    "firstName": "NGUYEN",
    "lastName": "VAN A"
  },
  "device": {
    "browser": "Mozilla",
    "ipAddress": "192.168.1.1"
  },
  "merchantId": "ZION",
  "order": {
    "id": "ORD_250053"
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "MASTERCARD",
        "expiry": {
          "month": "1",
          "year": "39"
        },
        "issuer": "AFRILAND FIRST BANK",
        "nameOnCard": "NGUYEN VAN A",
        "number": "512345xxxxxx0008",
        "scheme": "MASTERCARD",
        "storedOnFile": "NOT_STORED"
      }
    },
    "type": "CARD"
  },
  "transaction": {},
  "version": "1",
  "amount": "10000",
  "authenticationStatus": "AUTHENTICATION_SUCCESSFUL",
  "authenticationVersion": "3DS2",
  "chargeback": {
    "currency": "VND",
    "amount": "0"
  },
  "creationTime": "2025-04-02T03:04:05.373Z",
  "currency": "VND",
  "id": "ORD_250053",
  "lastUpdatedTime": "2025-04-02T03:04:47.250Z",
  "merchantAmount": "10000",
  "merchantCategoryCode": "5999",
  "merchantCurrency": "VND",
  "reference": "ORD_250053",
  "totalAuthorizedAmount": "10000",
  "totalCapturedAmount": "10000",
  "totalRefundedAmount": "0",
  "totalDisbursedAmount": "0",
  "transactions": [
    {
      "authentication": {
        "acceptVersions": "3DS1,3DS2",
        "channel": "PAYER_BROWSER",
        "purpose": "PAYMENT_TRANSACTION",
        "version": "3DS2",
        "redirect": {
          "domainName": "mtf.gateway.mastercard.com"
        },
        "method": "OUT_OF_BAND",
        "payerInteraction": "REQUIRED",
        "amount": 10000,
        "time": "2025-04-02T03:04:05.383Z",
        "3ds": {
          "acsEci": "02",
          "authenticationToken": "kHyn+7YFi1EUAREAAAAvNUe6Hv8=",
          "transactionId": "1f77f9db-2529-4ce5-9c17-92905d225128"
        },
        "3ds2": {
          "directoryServerId": "A999999999",
          "methodCompleted": "true",
          "methodSupported": "SUPPORTED",
          "requestorId": "MAS00001_INT_MPGS_MTTESTTCTTWL",
          "requestorName": "NAPAS TCTT WL",
          "acsTransactionId": "b4b712ae-7c84-4437-9d6e-83fe03d1186c",
          "dsTransactionId": "1f77f9db-2529-4ce5-9c17-92905d225128",
          "protocolVersion": "2.2.0",
          "transactionStatus": "Y",
          "acsReference": "MPGS_ACS_SANDBOX",
          "authenticationScheme": "MASTERCARD",
          "dsReference": "MC_DS_SANDBOX",
          "3dsServerTransactionId": "775a276e-5ac1-474b-8f0c-877f91e9c0ea"
        }
      },
      "customer": {
        "firstName": "NGUYEN",
        "lastName": "VAN A"
      },
      "device": {
        "browser": "Mozilla",
        "ipAddress": "192.168.1.1"
      },
      "merchant": "ZION",
      "order": {
        "amount": "10000",
        "creationTime": "2025-04-02T03:04:05.373Z",
        "currency": "VND",
        "id": "ORD_250053",
        "status": "CAPTURED",
        "totalAuthorizedAmount": "0",
        "totalCapturedAmount": "0",
        "totalRefundedAmount": "0",
        "totalDisbursedAmount": "0",
        "authenticationStatus": "AUTHENTICATION_SUCCESSFUL",
        "merchantCategoryCode": "5999",
        "valueTransfer": {
          "accountType": "NOT_A_TRANSFER"
        },
        "lastUpdatedTime": "2025-04-02T03:04:47.250Z",
        "merchantAmount": "10000",
        "merchantCurrency": "VND",
        "chargeback": {
          "currency": "VND",
          "amount": "0"
        }
      },
      "response": {
        "gatewayCode": "APPROVED",
        "gatewayRecommendation": "PROCEED"
      },
      "result": "SUCCESS",
      "sourceOfFunds": {
        "provided": {
          "card": {
            "brand": "MASTERCARD",
            "expiry": {
              "month": "1",
              "year": "39"
            },
            "fundingMethod": "DEBIT",
            "issuer": "AFRILAND FIRST BANK",
            "nameOnCard": "NGUYEN VAN A",
            "number": "512345xxxxxx0008",
            "scheme": "MASTERCARD"
          }
        },
        "type": "CARD"
      },
      "timeOfLastUpdate": "2025-04-02T03:04:45.810Z",
      "timeOfRecord": "2025-04-02T03:04:02.213Z",
      "transaction": {
        "acquirer": {
          "merchantId": "000000060332640"
        },
        "amount": "10000",
        "currency": "VND",
        "id": "3589120",
        "type": "AUTHENTICATION",
        "authenticationStatus": "AUTHENTICATION_SUCCESSFUL",
        "stan": "0"
      },
      "version": "82"
    },
    {
      "authentication": {
        "version": "3DS2",
        "transactionId": "3589120",
        "amount": 10000,
        "time": "2025-04-02T03:04:05.383Z",
        "3ds": {
          "acsEci": "02",
          "authenticationToken": "kHyn+7YFi1EUAREAAAAvNUe6Hv8=",
          "transactionId": "1f77f9db-2529-4ce5-9c17-92905d225128"
        },
        "3ds2": {
          "acsTransactionId": "b4b712ae-7c84-4437-9d6e-83fe03d1186c",
          "dsTransactionId": "1f77f9db-2529-4ce5-9c17-92905d225128",
          "protocolVersion": "2.2.0",
          "transactionStatus": "Y",
          "acsReference": "MPGS_ACS_SANDBOX",
          "authenticationScheme": "MASTERCARD",
          "dsReference": "MC_DS_SANDBOX"
        }
      },
      "authorizationResponse": {
        "cardSecurityCodeError": "M",
        "commercialCard": "888",
        "commercialCardIndicator": "3",
        "financialNetworkCode": "777",
        "posData": "1025100006600",
        "posEntryMode": "812",
        "processingCode": "003000",
        "responseCode": "00",
        "stan": "155388",
        "transactionIdentifier": "123456789"
      },
      "customer": {
        "firstName": "NGUYEN",
        "lastName": "VAN A"
      },
      "device": {
        "browser": "Mozilla",
        "ipAddress": "192.168.1.1"
      },
      "gatewayEntryPoint": "WEB_SERVICES_API",
      "merchant": "ZION",
      "order": {
        "amount": "10000",
        "creationTime": "2025-04-02T03:04:05.373Z",
        "currency": "VND",
        "id": "ORD_250053",
        "reference": "ORD_250053",
        "status": "CAPTURED",
        "totalAuthorizedAmount": "10000",
        "totalCapturedAmount": "10000",
        "totalRefundedAmount": "0",
        "totalDisbursedAmount": "0",
        "authenticationStatus": "AUTHENTICATION_SUCCESSFUL",
        "merchantCategoryCode": "5999",
        "lastUpdatedTime": "2025-04-02T03:04:47.250Z",
        "merchantAmount": "10000",
        "merchantCurrency": "VND",
        "chargeback": {
          "currency": "VND",
          "amount": "0"
        }
      },
      "response": {
        "acquirerCode": "00",
        "acquirerMessage": "Approved",
        "cardSecurityCode": {
          "acquirerCode": "M",
          "gatewayCode": "MATCH"
        },
        "gatewayCode": "APPROVED",
        "gatewayRecommendation": "NO_ACTION"
      },
      "result": "SUCCESS",
      "sourceOfFunds": {
        "provided": {
          "card": {
            "brand": "MASTERCARD",
            "expiry": {
              "month": "1",
              "year": "39"
            },
            "fundingMethod": "DEBIT",
            "issuer": "AFRILAND FIRST BANK",
            "nameOnCard": "NGUYEN VAN A",
            "number": "512345xxxxxx0008",
            "scheme": "MASTERCARD",
            "storedOnFile": "NOT_STORED"
          }
        },
        "type": "CARD"
      },
      "timeOfLastUpdate": "2025-04-02T03:04:47.250Z",
      "timeOfRecord": "2025-04-02T03:04:47.097Z",
      "transaction": {
        "acquirer": {
          "batch": "20250402",
          "date": "0402",
          "id": "SACOMBANK_S2I",
          "merchantId": "000000060332640",
          "transactionId": "123456789",
          "settlementDate": "2025-04-02",
          "timeZone": "+0700"
        },
        "amount": "10000",
        "authorizationCode": "155388",
        "currency": "VND",
        "id": "HFPAYMENT_936614",
        "receipt": "509203155388",
        "source": "INTERNET",
        "terminal": "80153026",
        "type": "PAYMENT",
        "authenticationStatus": "AUTHENTICATION_SUCCESSFUL",
        "stan": "155388"
      },
      "version": "82"
    }
  ],
  "authentication": {
    "3ds": {
      "acsEci": "02",
      "authenticationToken": "kHyn+7YFi1EUAREAAAAvNUe6Hv8=",
      "transactionId": "1f77f9db-2529-4ce5-9c17-92905d225128"
    }
  },
  "3dsAcsEci": "02"
}

### 5.4.10. Retrieve Transaction

Request to retrieve the details of a transaction. For example you can retrieve the details of an authorization that you previously executed.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Response Body:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td></td><td><p>100</p></td><td><p>O</p></td><td><p>R</p></td><td><p>RETRIEVE: Request to retrieve the details of a transaction</p></td></tr><tr><td><p>authorizationResponse&nbsp;&nbsp;</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError&nbsp;</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard&nbsp;</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network. </p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction. </p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>transactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td></td><td><p>C</p></td><td><p>The validation code returned by the issuer. </p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>O</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td></td><td></td><td></td><td></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>merchantId</p></td><td></td><td><p>999</p></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The total amount for the order. </p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>response</p></td><td></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>sourceOfFunds</p></td><td></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card&nbsp;</p></td><td></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme&nbsp;</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: The payer selected to pay using a credit or debit card. The payer's card details must be provided.</p><p>In case of token using, please send this parameter with value CARD.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction&nbsp;&nbsp;</p></td><td></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>maximum value: 1000000000000</p><p>minimum value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference&nbsp;</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>maximum value: 1000000000000</p><p>minimum value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p></td></tr><tr><td><p>transaction.type</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p></td></tr><tr><td><p>transaction.otp</p></td><td><p>Data consist of a-z, A-Z, 0-9 characters</p></td><td><p>20</p></td><td></td><td><p>O</p></td><td><p>One time password, use for local purpose</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>10</p></td><td></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>9</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/ZION/order/ORD_250053/transaction/HFPAYMENT_936614</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Response:_**

{
  "apiOperation": "RETRIEVE",
  "authorizationResponse": {
    "cardSecurityCodeError": "M",
    "commercialCard": "888",
    "commercialCardIndicator": "3",
    "posData": "1025100006600",
    "posEntryMode": "812",
    "processingCode": "003000",
    "responseCode": "00",
    "stan": "155388",
    "transactionIdentifier": "123456789"
  },
  "customer": {
    "firstName": "NGUYEN",
    "lastName": "VAN A"
  },
  "device": {
    "browser": "Mozilla",
    "ipAddress": "192.168.1.1"
  },
  "merchantId": "ZION",
  "order": {
    "amount": "10000",
    "creationTime": "2025-04-02T03:04:05.373Z",
    "currency": "VND",
    "id": "ORD_250053",
    "reference": "ORD_250053",
    "totalAuthorizedAmount": "10000",
    "totalCapturedAmount": "10000",
    "totalRefundedAmount": "0",
    "totalDisbursedAmount": "0",
    "authenticationStatus": "AUTHENTICATION_SUCCESSFUL",
    "merchantCategoryCode": "5999",
    "lastUpdatedTime": "2025-04-02T03:04:47.250Z",
    "merchantAmount": "10000",
    "merchantCurrency": "VND",
    "chargeback": {
      "currency": "VND",
      "amount": "0"
    }
  },
  "response": {
    "acquirerCode": "00",
    "acquirerMessage": "Approved",
    "cardSecurityCode": {
      "acquirerCode": "M",
      "gatewayCode": "MATCH"
    },
    "gatewayCode": "SUCCESS",
    "message": "Transaction is successful.",
    "gatewayRecommendation": "NO_ACTION"
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "MASTERCARD",
        "expiry": {
          "month": "1",
          "year": "39"
        },
        "issuer": "AFRILAND FIRST BANK",
        "nameOnCard": "NGUYEN VAN A",
        "number": "512345xxxxxx0008",
        "scheme": "MASTERCARD",
        "storedOnFile": "NOT_STORED"
      }
    },
    "type": "CARD"
  },
  "timeOfRecord": "2025-04-02T03:04:47.097Z",
  "transaction": {
    "acquirer": {
      "batch": "20250402",
      "date": "0402",
      "id": "SACOMBANK_S2I",
      "merchantId": "000000060332640",
      "transactionId": "123456789",
      "settlementDate": "2025-04-02",
      "timeZone": "+0700"
    },
    "amount": "10000",
    "authorizationCode": "155388",
    "currency": "VND",
    "id": "HFPAYMENT_936614",
    "receipt": "509203155388",
    "type": "PAYMENT",
    "authenticationStatus": "AUTHENTICATION_SUCCESSFUL",
    "stan": "155388"
  },
  "version": "1",
  "authentication": {
    "version": "3DS2",
    "transactionId": "3589120",
    "amount": 10000,
    "time": "2025-04-02T03:04:05.383Z",
    "3ds": {
      "acsEci": "02",
      "authenticationToken": "kHyn+7YFi1EUAREAAAAvNUe6Hv8=",
      "transactionId": "1f77f9db-2529-4ce5-9c17-92905d225128"
    },
    "3ds2": {
      "acsTransactionId": "b4b712ae-7c84-4437-9d6e-83fe03d1186c",
      "dsTransactionId": "1f77f9db-2529-4ce5-9c17-92905d225128",
      "protocolVersion": "2.2.0",
      "transactionStatus": "Y",
      "acsReference": "MPGS_ACS_SANDBOX",
      "authenticationScheme": "MASTERCARD",
      "dsReference": "MC_DS_SANDBOX"
    }
  },
  "timeOfLastUpdate": "2025-04-02T03:04:47.250Z"
}

### 5.4.11. Retrieve Token

Request to retrieve the specified token based on the payment orderId.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/orderID/{orderId}/getToken</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Response Body:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>merchantId</p></td><td></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>result</p></td><td></td><td></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>domestic</p></td><td><p>String</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>1: token attached with domestic card details.</p><p>0: token attached with branded card details.</p></td></tr><tr><td><p>orderId</p></td><td><p>String</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>OrderId from request message</p></td></tr><tr><td><p>status</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>VALID: token is usable for payment</p><p>INVALID: token cannot be used for payment</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/ZION/orderID/ORD_289314/getToken</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Response:_**

{
  "status": "VALID",
  "merchantId": "ZION",
  "result": "SUCCESS",
  "token": "9074778698893354",
  "domestic": "0",
  "orderId": "ORD_289314"
}

### 5.4.12. Delete Token

Request to delete a token.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/{merchantId}/token/{token}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>DELETE</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT + 7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Response Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td></td><td><p>100</p></td><td><p>O</p></td><td><p>R</p></td><td><p>DELETE_TOKEN</p></td></tr><tr><td><p>merchantId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-</p></td><td><p>32</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>29</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>result</p></td><td></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/api/rest/version/1/merchant/NAPASTEST/token/9949254226426623</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Response:_**

{
  "apiOperation": "DELETE_TOKEN",
  "merchantId": "NAPASTEST",
  "result": "SUCCESS",
  "version": "1",
  "token": "9949254226426623"
}

## 5.5. Domestic APIs

### 5.5.1 Purchase OTP (with card / card token)

Used for Payment Service Provider (PSP) who registered for White label or Cashin service utilizing the merchant-hosted model to process payments via card or card token.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>PURCHASE_OTP: Authorise the payment and transfer funds. Only use for domestic cards</p></td></tr><tr><td><p>transactionInitiator</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>CUSTOMER: the customer initiates the transaction</p><p>MERCHANT: the merchant initiates the transaction</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Information on 3DSecure fields.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect</p></td><td></td><td></td><td></td><td></td><td><p>A collection of parameters required to build the HTML form that is redirected to the ACS.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple</p></td><td></td><td></td><td></td><td></td><td><p>The simple field is the response returned to those merchants who have chosen the simple option for form submission.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple.htmlBodyContent</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>The generated form to post to the cardholder’s browser.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.responseUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>2048</p></td><td><p>R</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p></td></tr><tr><td><p>3Dsecure.summaryStatus</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The summarized response from the card issuer and the payment gateway indicating the overall status of the attempt to authenticate the cardholder.</p></td></tr><tr><td><p>3DSecure.xid</p></td><td></td><td><p>128</p></td><td></td><td></td><td><p>A unique transaction identifier generated by the Payment Gateway on behalf of the merchant to identify the 3DS transaction.</p></td></tr><tr><td><p>3DSecureId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>A unique identifier supplied by the merchant for the authentication.</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The field represents the customer’s account or device identifier used when digitizing the card information.<br>This value must be unique within the merchant’s system and is required when performing a payment with token.</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>billing</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>Details of the payer's billing address.</p></td></tr><tr><td><p>billing.address</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The payer's billing address.</p></td></tr><tr><td><p>billing.address.city</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The city portion of the address.</p></td></tr><tr><td><p>billing.address.company</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The name of the company associated with this address.</p></td></tr><tr><td><p>billing.address.country</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td></tr><tr><td><p>billing.address.postcodeZip</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The post code or zip code of the address.</p></td></tr><tr><td><p>billing.address.stateProvinceCode</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td></tr><tr><td><p>billing.address.street</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The first line of the address.</p></td></tr><tr><td><p>billing.address.street2</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The second line of the address (if provided).</p></td></tr><tr><td><p>billing.address.street3</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The third line of the address (if provided).</p></td></tr><tr><td><p>shipping</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>Shipping information for this order.</p></td></tr><tr><td><p>shipping.address</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The address to which this order will be shipped.</p></td></tr><tr><td><p>shipping.address.city</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The city portion of the address.</p></td></tr><tr><td><p>shipping.address.company</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The name of the company associated with this address.</p></td></tr><tr><td><p>shipping.address.country</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td></tr><tr><td><p>shipping.address.postcodeZip</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The post code or zip code of the address.</p></td></tr><tr><td><p>shipping.address.stateProvinceCode</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td></tr><tr><td><p>shipping.address.street</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The first line of the address.</p></td></tr><tr><td><p>shipping.address.street2</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The second line of the address (if provided).</p></td></tr><tr><td><p>shipping.address.street3</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The third line of the address (if provided).</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.browser</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The User-Agent header of the browser the customer used to place the order.</p></td></tr><tr><td><p>device.fingerprint</p></td><td><p>String</p></td><td><p>4000</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Information collected about a remote computing device for the purpose of providing a unique identifier for the device.</p></td></tr><tr><td><p>device.hostname</p></td><td><p>String</p></td><td><p>60</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The name of the server to which the customer is connected.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>45</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The device information</p></td></tr><tr><td><p>device.browserDetails</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>Browser details</p></td></tr><tr><td><p>device.browserDetails.userAgent</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Browser’s User-Agent header content.</p></td></tr><tr><td><p>device.browserDetails.javaEnabled</p></td><td><p>Boolean</p></td><td><p>true/fasle</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: navigator.javaEnabled()</p></td></tr><tr><td><p>device.browserJavascriptEnabled</p></td><td><p>Boolean</p></td><td><p>true/false</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript is enabled or not</p></td></tr><tr><td><p>device.browserDetails.3DSecureChallengeWindowSize</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Browser window size</p></td></tr><tr><td><p>device.browserDetails.acceptHeaders</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Browser’s User-Agent header content</p></td></tr><tr><td><p>device.browserDetails.colorDepth</p></td><td><p>String</p></td><td><p>2</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.colorDepth;</p></td></tr><tr><td><p>device.browserDetails.language</p></td><td><p>String</p></td><td><p>8</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: navigator.language;</p></td></tr><tr><td><p>device.browserDetails.screenHeight</p></td><td><p>String</p></td><td><p>6</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.height;</p></td></tr><tr><td><p>device.browserDetails.screenWidth</p></td><td><p>String</p></td><td><p>6</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.width;</p></td></tr><tr><td><p>device.browserDetails.timeZone</p></td><td><p>String</p></td><td><p>5</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: (new Date()).getTimeZoneOffset();</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td><p>O</p></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td><p>R</p></td><td><p>C</p></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p><p>For CASHIN transactions, the value must start with “CASHIN” prefix</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>O</p></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td><p>C</p></td><td><p>Response data group</p></td></tr><tr><td><p>response.3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td><p>C</p></td><td><p>The response code which indicates the status.</p></td></tr><tr><td><p>response.3DSecure.gatewayCode</p></td><td><p>String</p></td><td><p>99</p></td><td></td><td><p>C</p></td><td><p>The detailed response from the payment gateway to indicate the status of the 3DS authentication.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: use for recurring payments.</p><p>FASTPAY: use for fast purchase.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td><p>R</p></td><td><p>R</p></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td><p>O</p></td><td><p>O</p></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td><p>O</p></td><td><p>O</p></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card issuing bank.</p><p>Value must be a member of the list in Appendix A – Issuing Bank Code. The values are case sensitive.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td><p>O</p></td><td><p>O</p></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHERS: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>O</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td><p>C</p></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td><p>R</p></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.date</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer. Format yyyy/mm/dd HH:MM:SS</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_PAYMENT: Void Payment</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>transaction.otp</p></td><td><p>Data consist of a-z, A-Z, 0-9 characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>One time password, use for local purpose</p></td></tr><tr><td><p>transaction.authenGroup</p></td><td><p>String</p></td><td><p>10</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of transaction group, such as A, B, C, D, E, F (according to Cicular 50 of SBV)</p></td></tr><tr><td><p>transaction.typeOfVerification</p></td><td></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Indicates the type of verification performed with debit/atm card.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SMS_OTP: in this case, transaction.otp will contain the OTP value sent to payer (payer inputs this value).</p><p>SOFT_OTP: in this case, customers will get soft otp from issuer’s mobile application.</p><p>MOBILE_BANKING: in this case, customers will be redirected to issuer mobile application</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td><p>inputParameters</p></td><td></td><td></td><td><p>R</p></td><td><p>O</p></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>R</p></td><td><p>O</p></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>R</p></td><td><p>O</p></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>R</p></td><td><p>O</p></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>R</p></td><td><p>O</p></td><td><p><em>CreditCard</em>: use in case of international cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td></td><td><p>10</p></td><td><p>R</p></td><td><p>O</p></td><td><p>Supports 3DSecure for authorizing cardholder when using CreditCard.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>dataKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string that represents the session of merchant which wants to do server-hosted form.</p></td></tr><tr><td><p>napasKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string used for security reasons. This is a public key, used in checking signature of Napas.</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/TGTT7/order/ORD_153536/transaction/TXN_153536</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request(Whitelabel service, pay with card):_**

{
  "apiOperation": "PURCHASE_OTP",
  "order": {
    "amount": 10000,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "provided": {
      "card": {
        "number": "9704000000000018",
        "issueDate": "0307",
        "nameOnCard": "NGUYEN VAN A"
      }
    }
  },
  "submerchant": {
    "code": "SUBMERCHANT",
    "name": "Blah blah blah",
    "referenceId": "12345"
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  }
}

**_Request (Cashin service, pay with card):_**

{
  "apiOperation": "PURCHASE_OTP",
  "order": {
    "amount": 10000,
    "currency": "VND",
    "reference": "CASHIN123"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "provided": {
      "card": {
        "number": "9704000000000018",
        "issueDate": "0307",
        "nameOnCard": "NGUYEN VAN A"
      }
    }
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  }
}

**_Request(Whitelabel service, pay with token card):_**

{
  "apiOperation": "PURCHASE_OTP",
  "order": {
    "amount": 10000,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "token": "9704004851830018"
  },
  "submerchant": {
    "code": "SUBMERCHANT",
    "name": "Blah blah blah",
    "referenceId": "12345"
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  },
  "customer": {
   "customerId": "123456789"
  }
}

**_Request(Cashin service, pay with token card):_**

{
  "apiOperation": "PURCHASE_OTP",
  "order": {
    "amount": 10000,
    "currency": "VND",
    "reference": "CASHIN123"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "token": "9704004851830018"
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  },
  "customer": {
   "customerId": "123456789"
  }
}

**_Response (following the 3DS flow):_**

{
  "apiOperation": "PURCHASE_OTP",
  "merchantId": "NAPASTEST",
  "response": {
    "gatewayCode": "CARD_ENROLLED",
    "3DSecure": {
      "gatewayCode": "CARD_ENROLLED"
    }
  },
  "result": "SUCCESS",
  "acsMode": "REDIRECT",
  "3DSecure": {
    "authenticationRedirect": {
      "simple": {
        "htmlBodyContent": "<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width, initial-scale=1.0'><title>NAPAS Payment Service</title></head><body><div class="container" style="display: none;"><div><div class="loading"><div class="loading__letter">N</div><div class="loading__letter">A</div><div class="loading__letter">P</div><div class="loading__letter">A</div><div class="loading__letter">S</div><div class="loading__letter">.</div><div class="loading__letter">.</div><div class="loading__letter">.</div></div><div class="notify"><p lang="en">Processing transaction. Please wait...</p></div></div></div><form id='merchant-form' action='https://test-gateway.napas.com.vn/api/restjs/merchant/NAPASTEST/order/ORD_480439/transaction/TXN_480439/3DSecureId/3DS_480439/ref/1759216966469/payer' method='POST'></form><div style="height: 100%" id='napas-widget-container'></div><script type='text/javascript' id='napas-widget-script' src='https://test-gateway.napas.com.vn/api/restjs/resources/js/napas.pay.3ds2.min.js'><\/script><div id="iframeMC" style="height: 100%;display: none"><div id="initiate3dsSimpleRedirect" xmlns="http://www.w3.org/1999/html"> <iframe id="methodFrame" name="methodFrame" height="100" width="200" > </iframe> <form id ="initiate3dsSimpleRedirectForm" method="POST" action="https://issuer.domain.com/acs/mastercard/v2/method" target="methodFrame"> <input type="hidden" name="threeDSMethodData" value="eyJ0aHJlZURTTWV0aG9kTm90aWZpY2F0aW9uVVJMIjoiaHR0cHM6Ly9tdGYuZ2F0ZXdheS5tYXN0ZXJjYXJkLmNvbS9jYWxsYmFja0ludGVyZmFjZS9nYXRld2F5LzM5ODEzMWY1ZjVkMDljZmY0MGZlOWE4Y2UyYWUzODhkNTc1N2ZmMTlmZjMwMTFlNzczYjQzMDE4MzA2YjI4MzUiLCJ0aHJlZURTU2VydmVyVHJhbnNJRCI6IjBkNTg2NTVhLTA5MWEtNGU4ZS1hYWU3LTc4ZTgxMTc0ZmJmYyJ9" /> </form> <script id="initiate-authentication-script"> var e=document.getElementById("initiate3dsSimpleRedirectForm"); if (e) { e.submit(); if (e.parentNode !== null) { e.parentNode.removeChild(e); } } <\/script> </div></div></body><style>body{overflow:auto;height:auto;margin:0}@font-face{font-family:"Audiowide";src:url(https://test-gateway.napas.com.vn/api/restjs/resources/fonts/Audiowide-Regular.ttf)}#iframeMC>div{height:100%}iframe#challengeFrame{height:100%!important;width:100%!important}.container{height:100vh;background:#fff;display:flex!important;justify-content:center;align-items:center}.loading{display:flex;flex-direction:row;justify-content:center;align-items:center}.loading__letter{font-size:40px;font-weight:700;letter-spacing:4px;text-transform:uppercase;color:#1f407f;animation-name:bounce;animation-duration:2s;animation-iteration-count:infinite;font-family:'Audiowide'}.loading__letter:nth-child(2){animation-delay:.1s}.loading__letter:nth-child(3){animation-delay:.2s}.loading__letter:nth-child(4){animation-delay:.3s}.loading__letter:nth-child(5){animation-delay:.4s}.loading__letter:nth-child(6){animation-delay:.5s}.loading__letter:nth-child(7){animation-delay:.6s}.loading__letter:nth-child(8){animation-delay:.8s}.loading__letter:nth-child(9){animation-delay:1s}.loading__letter:nth-child(10){animation-delay:1.2s}@keyframes bounce{0%{transform:translateY(0)}40%{transform:translateY(-40px)}80%,100%{transform:translateY(0)}}@media (max-width:700px){.loading__letter{font-size:50px}}@media (max-width:340px){.loading__letter{font-size:40px}}</style></html>"
      }
    },
    "summaryStatus": "CARD_ENROLLED"
  },
  "3DSecureId": "3DS_480439"
}

**_Response:_**

{
    "apiOperation": "PURCHASE_OTP",
    "order": {
        "amount": "10000",
        "currency": "VND",
        "id": "ORD_700005"
    },
    "result": "SUCCESS",
    "response": {
        "acquirerCode": "11",
        "gatewayCode": "PENDING_FOR_OTP",
        "message": "Transaction needs to be verified."
    },
    "merchantId": "VTBWL",
    "transaction": {
        "acquirer": {
            "id": "100003168",
            "transactionId": "100003168"
        },
        "amount": 10000,
        "currency": "VND",
        "id": "1000023",
        "type": "PAYMENT"
    },
    "dataKey": "dc0TeA+RsgtZAwGxJA/+gU8OHOfF3A4zKU+LsTAWUY2RwTjVEcPXWK1oaiEuQhwCv+pZ6m9zEHdbuK7gbDDZAUhx6J3Q16GqAtbq4pZvW+AwZAm0JxtSg4XbiynQ+gPqQpoKX1+9tlZhKVgdncIP+CDMVz92yR061B7Ump7eZm0lrjVmuPDU566WoNZlUafOjwhl7jQVoJoZtiFDrlmiWPMaL3XhCowcNSwBvscS6XCB4y0kw91Zk2KW9RFmVvG/9FkyHuetGE65jZc84Gv81zKDVWxp+SDeFoBFiop73Z47H7okvNlj0bA0snRteBypd79EiWux0t6r95eLWM3DWOc1O5AW5CfLG9qDi+nER+axioebGe0dc7H5Bgd2cWrtO2tis34Pui30cpyxSmfgq/4gsa72LbgYqMGUxZOihKznRV2X",
    "napasKey": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArbP6iFl0Z9pDHv5ni/fhl4ME6AfP16E5zmrHYftaBlcvq1bWRwk1TH23OrYQ6n6jEGIbmrVXzIM00lk723/ZHtvbyZld8r5TcEh5M+h/jIu3/J9gqNYGTo9jLJ0DvRdSfzbDWJqPImPfcGJDRPTrEtckqmd8HvkU6J3MCPrg0IOGTYplUmw6DZ25g1SpBSb1CAWGqP36nqyxNZ4hNJ08agHQbRc/ICHUb/8+/UjDETX96SYVn+GBKbrMM/NcgiJV7UXbEmQ9OEiM3BbI5srhCOt0oYoCp0sJcpLcLbRlpdC7/nV44KPty1rkZ32KlBufz3UVggXpHPz0k0yxYTvl/wIDAQAB:MIICtTCCAZ0CBgFoko89+DANBgkqhkiG9w0BAQUFADAeMRwwGgYDVQQDExNUZXN0IENBIENlcnRpZmljYXRlMB4XDTE5MDEyODAzNDQ0N1oXDTE5MDEyOTAzNDQ0N1owHjEcMBoGA1UEAxMTVGVzdCBDQSBDZXJ0aWZpY2F0ZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK2z+ohZdGfaQx7+Z4v34ZeDBOgHz9ehOc5qx2H7WgZXL6tW1kcJNUx9tzq2EOp+oxBiG5q1V8yDNNJZO9t/2R7b28mZXfK+U3BIeTPof4yLt/yfYKjWBk6PYyydA70XUn82w1iajyJj33BiQ0T06xLXJKpnfB75FOidzAj64NCDhk2KZVJsOg2duYNUqQUm9QgFhqj9+p6ssTWeITSdPGoB0G0XPyAh1G//Pv1IwxE1/ekmFZ/hgSm6zDPzXIIiVe1F2xJkPThIjNwWyObK4QjrdKGKAqdLCXKS3C20ZaXQu/51eOCj7cta5Gd9ipQbn891FYIF6Rz89JNMsWE75f8CAwEAATANBgkqhkiG9w0BAQUFAAOCAQEAFXK48p71S87EmrnCm5Yvv42Oxzh0B18/q4jn891xS1abFRkW2jdCvpc3IUQL6gy+JFQcY2NSaLhIYgBafmcngiBFt4kkTqUuwSdIWudl3jYkO58SOYKdxW8jbXM5KwTujpb0gYBpf1u5828RmEq6YEog/yx/hYQOFQlfIBBZFNmUJ7U5TDCFL2wT5MqPg2cfb1DirveD3sLSIUc90IJM3eUXfzXqkwdrCKDZRSuV3TMHChi1IRio2fg7zesi9HliFueaekkvynnwXoG41LKaMSBMM/Mdrb2tm29jVYnlYJ8Coj+dOjWhU2y83dFi5DGr8a3ftWOc+rEz2zlOUKRF7Q=="
}

After receiving a response from Napas (which is just the result of the card verification step, there is no payment authorization yet):

**With the 3DS response**, the merchant loads an HTML page whose body is the value of **_3DSecure.authenticationRedirect.simple.htmlBodyContent_** which in turn loads the ACS URL to authenticate the customer.

**With the normal response**, follow these steps below:

* If payment information isn’t verified successfully (**_result is other than SUCCESS_**), the final result is showed to the customer, payment process is done without integrating the hosted form / payment page.
* If the result is successful (**_result is SUCCESS_**), Napas returns result with two parameters **_dataKey_** and **_napasKey_**, partner creates the HTML as follow and embed in the web/mobile application:

<form id="merchant-form" action="https://web.merchant.com/result-page" method="POST">
<div id="napas-widget-container"></div>
<script
    type="text/javascript"
    id="napas-widget-script"
    src="https://{domain}/web/js/napas.hostedform.min.js"
    merchantId="APITEST"
    clientIP="192.168.1.1"
    deviceId="123456789"
    environment="WebApp"
    cardScheme="AtmCard"
    enable3DSecure="false"
    apiOperation="PURCHASE_OTP"
    orderReference="Thanh toan hoa don"
    orderId="ORD_123321"
    channel="7399"
    sourceOfFundsType="CARD"
    customerId = “123456789”

    dataKey: "XxHnHSmY9qJQ+GGuI4TSvQ0KO6R2HqH4aObrGuTMcObZLQFCWGuAC874LoJHCXEK4ZWOoMtWIfK80+GQqi+t1mQXsab8fJDQzx05FiM1GmNUI0IKeMlZtcvnb/6XCBBrYFeZXRagrAdBFbmBOex1eGm7TCqFm91zaO3IzfybpFSRyF2GYbv0tNFr53YmFbUddDMUe6zsCBqyt2mQB8vg9iCmkbjpk7ghzA/l+UfrLUsgrj/531u0bK6yQuKtVRadb7GB2VaTzeUOsp3EmBxPvFpLD+KtXaxwLBQPga1njkdF6PLbJPwi8zXT5k7JqOXhuaScjzED59SrEVzDI+B0NeV9CytEzP/Te5NmbV72HdNMCQgd7FI2Jmfjh2i5vX1Gw2yth5Gx9+LUggcHl1GvPQ=="

    napasKey="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCeKjIJk0hiUG2JXSRIuSzqhc/Z09HqUfm3Ozn9NR4kHXWy4aFIY4Aeudq3Atscxfi1qCG1pkE6K1srzRyvIApteM+EizATUpz4g58OAWfp1LbvrPWdowOxWFYx6seduGWeltnWqDgLA7amTjkpM3NuXIHpeHD+JVx61LSmVf2LUwIDAQAB:MIIBsDCCARkCBgFaWR1D9TANBgkqhkiG9w0BAQUFADAeMRwwGgYDVQQDExNUZXN0IENBIENlcnRpZmljYXRlMB4XDTE3MDIyMDAxMjI1NFoXDTE3MDIyMTAxMjI1NFowHjEcMBoGA1UEAxMTVGVzdCBDQSBDZXJ0aWZpY2F0ZTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAnioyCZNIYlBtiV0kSLks6oXP2dPR6lH5tzs5/TUeJB11suGhSGOAHrnatwLbHMX4taghtaZBOitbK80cryAKbXjPhIswE1Kc+IOfDgFn6dS276z1naMDsVhWMerHnbhlnpbZ1qg4CwO2pk45KTNzblyB6Xhw/iVcetS0plX9i1MCAwEAATANBgkqhkiG9w0BAQUFAAOBgQBHvcmZJR7TUJVancvAeRgSq8GVXXTwNT9pjvtuyhRVIWDH72SD4SK7dK9m0LEywJIBYNoXczcD0ZTUWEVkZYD5Y8RezYuMC+vkAGpPMGGJjCzzZktHiFWxUMR7NmR7obWbTTs95m9YgRXSVKgFma3uf8nVz14TFEpn+9Bxh93/xA=="

>
<\/script>
</form>

Partner uses the appropriate parameters as described in the table below:

* M is a required parameter
* ME is a required parameter and a value must match the previous request
* O is an optional parameter
* C is a conditional parameter

<table><tbody><tr><td><p><strong>Parameter</strong></p></td><td><p><strong>Description</strong></p></td><td></td></tr><tr><td><p>action</p></td><td><p>Partner put the URL of the webpage that will catch and show transaction result, includes https://...</p></td><td><p>M</p></td></tr><tr><td><p>merchantId</p></td><td><p>Partner identifier</p></td><td><p>M</p></td></tr><tr><td><p>clientIP</p></td><td><p>Customer’s IP address</p></td><td><p>ME</p></td></tr><tr><td><p>deviceId</p></td><td><p>Customer’s identifier, this will be returned after processing transaction</p></td><td><p>ME</p></td></tr><tr><td><p>environment</p></td><td><p>Integration environment</p><p><strong><em>WebApp</em></strong>: desktop web</p><p><strong><em>MobileApp</em></strong>: mobile web/mobile app</p></td><td><p>ME</p></td></tr><tr><td><p>cardScheme</p></td><td><p>Card schemes in use</p><p><strong><em>AtmCard</em></strong>: domestic card</p></td><td><p>ME</p></td></tr><tr><td><p>enable3DSecure</p></td><td><p>Supports 3DSecure to authorize cardholder (always be false with AtmCard)</p><p><strong>false</strong>: disable 3DSecure flow</p></td><td><p>ME</p></td></tr><tr><td><p>apiOperation</p></td><td><p>The value of this field must match the value sent in the preceding request.</p><p><strong>PURCHASE_OTP</strong>: payment with card details or token.</p><p><strong>PURCHASE_WITH_RETURNED_TOKEN</strong>: pay and tokenize card/account details.</p><p><strong>PURCHASE_ACCOUNT</strong>: payment with bank account information.</p></td><td><p>ME</p></td></tr><tr><td><p>orderReference</p></td><td><p>Order short description</p><p>For Cashin transaction, this parameter must have a prefix as “CASHIN”, and is required in the preceding PURCHASE_OTP request</p></td><td><p>C</p></td></tr><tr><td><p>orderId</p></td><td><p>Order ID (must be unique)</p></td><td><p>ME</p></td></tr><tr><td><p>orderAmount</p></td><td><p>Order Amount</p></td><td><p>ME</p></td></tr><tr><td><p>orderCurrency</p></td><td><p>Order Currency</p></td><td><p>ME</p></td></tr><tr><td><p>channel</p></td><td><p>Partner business code</p></td><td><p>M</p></td></tr><tr><td><p>sourceOfFundsType</p></td><td><p><strong>CARD / ACCOUNT</strong></p></td><td><p>M</p></td></tr><tr><td><p>dataKey</p></td><td><p>Secured key for communication with Napas system</p></td><td><p>M</p></td></tr><tr><td><p>napasKey</p></td><td><p>Secured key for data encryption</p></td><td><p>M</p></td></tr><tr><td><p>serviceCode</p></td><td><p>EC_CASHIN: used for cashin to e-wallet transaction</p><p>WHITELABEL: used for whitelabel payment gateway transaction.</p><p>LINK_EW: used for link a card to e-wallet transaction.</p><p>AUTOPAY: used for auto pay transaction</p></td><td><p>O</p></td></tr><tr><td><p>submerchantCode</p></td><td><p>Code of submerchant (required if partner is using Whitelabel service). Also required in the initial PURCHASE_OTP request.</p></td><td><p>C</p></td></tr><tr><td><p>submerchantName</p></td><td><p>Name of submerchant</p></td><td><p>C</p></td></tr><tr><td><p>submerchantReferenceId</p></td><td><p>ReferenceId of submerchant</p></td><td><p>C</p></td></tr><tr><td><p>language</p></td><td><p>The default language displayed on the form</p><p><strong>vi</strong>: Vietnamese</p><p><strong>en</strong>: English</p></td><td><p>O</p></td></tr></tbody></table>

**_The final response example:_**

{
  "paymentResult": {
    "apiOperation": "PURCHASE_OTP",
    "merchantId": "VTBWL",
    "order": {
      "amount": "10000",
      "creationTime": "2025-09-30T14:17:23",
      "currency": "VND",
      "id": "ORD_700006"
    },
    "response": {
      "acquirerCode": "0",
      "gatewayCode": "APPROVED",
      "message": "Transaction is successful."
    },
    "result": "SUCCESS",
    "sourceOfFunds": {
      "provided": {
        "card": {
          "brand": "SML",
          "nameOnCard": "NGUYEN VAN A",
          "issueDate": "0307",
          "number": "970400xxxxxx0018",
          "scheme": "SML"
        }
      },
      "type": "PAYMENT"
    },
    "transaction": {
      "acquirer": {
        "id": "100003271",
        "transactionId": "100003271"
      },
      "amount": "10000",
      "currency": "VND",
      "id": "PURCHASE_701433100000",
      "type": "PAYMENT"
    },
    "version": "1",
    "channel": "6014"
  }
}

### 5.5.2. Purchase With Returned Token (with card or account)

Used for Payment Service Provider (PSP) who registered for White label or Cashin service utilizing the merchant-hosted model to process payments and create tokens via card or account.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>PURCHASE_WITH_RETURNED_TOKEN: Authorize the payment, transfer funds, generate token and return the token to the merchant.</p></td></tr><tr><td><p>transactionInitiator</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>CUSTOMER: the customer initiates the transaction</p><p>MERCHANT: the merchant initiates the transaction</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Information on 3DSecure fields.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect</p></td><td></td><td></td><td></td><td></td><td><p>A collection of parameters required to build the HTML form that is redirected to the ACS.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple</p></td><td></td><td></td><td></td><td></td><td><p>The simple field is the response returned to those merchants who have chosen the simple option for form submission.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple.htmlBodyContent</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>The generated form to post to the cardholder’s browser.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.responseUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>2048</p></td><td><p>R</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p></td></tr><tr><td><p>3Dsecure.summaryStatus</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The summarized response from the card issuer and the payment gateway indicating the overall status of the attempt to authenticate the cardholder.</p></td></tr><tr><td><p>3DSecure.xid</p></td><td></td><td><p>128</p></td><td></td><td></td><td><p>A unique transaction identifier generated by the Payment Gateway on behalf of the merchant to identify the 3DS transaction.</p></td></tr><tr><td><p>3DSecureId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>A unique identifier supplied by the merchant for the authentication.</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The field represents the customer’s account or device identifier used when digitizing the card information.<br>This value must be unique within the merchant’s system and is required when performing a payment with token.</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>billing</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>Details of the payer's billing address.</p></td></tr><tr><td><p>billing.address</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The payer's billing address.</p></td></tr><tr><td><p>billing.address.city</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The city portion of the address.</p></td></tr><tr><td><p>billing.address.company</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The name of the company associated with this address.</p></td></tr><tr><td><p>billing.address.country</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td></tr><tr><td><p>billing.address.postcodeZip</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The post code or zip code of the address.</p></td></tr><tr><td><p>billing.address.stateProvinceCode</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td></tr><tr><td><p>billing.address.street</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The first line of the address.</p></td></tr><tr><td><p>billing.address.street2</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The second line of the address (if provided).</p></td></tr><tr><td><p>billing.address.street3</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The third line of the address (if provided).</p></td></tr><tr><td><p>shipping</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>Shipping information for this order.</p></td></tr><tr><td><p>shipping.address</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The address to which this order will be shipped.</p></td></tr><tr><td><p>shipping.address.city</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The city portion of the address.</p></td></tr><tr><td><p>shipping.address.company</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The name of the company associated with this address.</p></td></tr><tr><td><p>shipping.address.country</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td></tr><tr><td><p>shipping.address.postcodeZip</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The post code or zip code of the address.</p></td></tr><tr><td><p>shipping.address.stateProvinceCode</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td></tr><tr><td><p>shipping.address.street</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The first line of the address.</p></td></tr><tr><td><p>shipping.address.street2</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The second line of the address (if provided).</p></td></tr><tr><td><p>shipping.address.street3</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The third line of the address (if provided).</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.browser</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The User-Agent header of the browser the customer used to place the order.</p></td></tr><tr><td><p>device.fingerprint</p></td><td><p>String</p></td><td><p>4000</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Information collected about a remote computing device for the purpose of providing a unique identifier for the device.</p></td></tr><tr><td><p>device.hostname</p></td><td><p>String</p></td><td><p>60</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The name of the server to which the customer is connected.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>45</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The device information</p></td></tr><tr><td><p>device.browserDetails</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>Browser details</p></td></tr><tr><td><p>device.browserDetails.userAgent</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td></td><td><p>Browser’s User-Agent header content.</p></td></tr><tr><td><p>device.browserDetails.javaEnabled</p></td><td><p>Boolean</p></td><td><p>true/fasle</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: navigator.javaEnabled()</p></td></tr><tr><td><p>device.browserDetails.3DSecureChallengeWindowSize</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Browser window size</p></td></tr><tr><td><p>device.browserDetails.acceptHeaders</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Browser’s User-Agent header content</p></td></tr><tr><td><p>device.browserDetails.colorDepth</p></td><td><p>String</p></td><td><p>2</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.colorDepth;</p></td></tr><tr><td><p>device.browserDetails.language</p></td><td><p>String</p></td><td><p>8</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: navigator.language;</p></td></tr><tr><td><p>device.browserDetails.screenHeight</p></td><td><p>String</p></td><td><p>6</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.height;</p></td></tr><tr><td><p>device.browserDetails.screenWidth</p></td><td><p>String</p></td><td><p>6</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.width;</p></td></tr><tr><td><p>device.browserDetails.timeZone</p></td><td><p>String</p></td><td><p>5</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: (new Date()).getTimeZoneOffset();</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p><p>For CASHIN transactions, the value must start with “CASHIN” prefix</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>The response code which indicates the status.</p></td></tr><tr><td><p>response.3DSecure.gatewayCode</p></td><td><p>String</p></td><td><p>99</p></td><td></td><td><p>C</p></td><td><p>The detailed response from the payment gateway to indicate the status of the 3DS authentication.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: use for recurring payments.</p><p>FASTPAY: use for fast purchase.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card issuing bank.</p><p>Value must be a member of the list in Appendix A – Issuing Bank Code. The values are case sensitive.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value. YY format</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHERS: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p><p>ACCOUNT: for account payments</p><p>DEELINK: for deep link payments</p></td></tr><tr><td><p>sourceOfFunds.provided.account</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>C</p></td><td><p>Source of fund provided account data group.</p><p>Details of the bank account.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Code of the issuing bank.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountName</p></td><td><p>Data is a string that consist of the characters A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s bank account name</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s bank account number</p></td></tr><tr><td><p>sourceOfFunds.provided.account.identificationNumber</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s indentification number or passport number</p></td></tr><tr><td><p>sourceOfFunds.provided.account.phoneNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s phone number (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.ibUsername</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s internet banking username used to login to the issuer bank’s internet banking</p></td></tr><tr><td><p>sourceOfFunds.provided.account.email</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z._@</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s email (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.taxCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s tax code (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.hardToken</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s hard token (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.customerCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s customer code (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.deeplink</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>C</p></td><td><p>Issuer Bank payment information via deeplink</p></td></tr><tr><td><p>sourceOfFunds.provided.deeplink.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Issuer code information selected by the user from the issuer bank list by Napas provided to the merchant</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.date</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer. Format yyyy/mm/dd HH:MM:SS</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_PAYMENT: Void Payment</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>transaction.otp</p></td><td><p>Data consist of a-z, A-Z, 0-9 characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>One time password, use for local purpose</p></td></tr><tr><td><p>transaction.authenGroup</p></td><td><p>String</p></td><td><p>10</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of transaction group, such as A, B, C, D, E, F (according to Cicular 50 of SBV)</p></td></tr><tr><td><p>transaction.typeOfVerification</p></td><td></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Indicates the type of verification performed with debit/atm card.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SMS_OTP: in this case, transaction.otp will contain the OTP value sent to payer (payer inputs this value).</p><p>SOFT_OTP: in this case, customers will get soft otp from issuer’s mobile application.</p><p>MOBILE_BANKING: in this case, customers will be redirected to issuer mobile application</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td><p>inputParameters</p></td><td></td><td></td><td><p>R</p></td><td></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>R</p></td><td></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>R</p></td><td></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>R</p></td><td></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>R</p></td><td></td><td><p><em>CreditCard</em>: use in case of international cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td></td><td><p>10</p></td><td><p>R</p></td><td></td><td><p>Supports 3DSecure for authorizing cardholder when using CreditCard.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>dataKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string that represents the session of merchant which wants to do server-hosted form.</p></td></tr><tr><td><p>napasKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string used for security reasons. This is a public key, used in checking signature of Napas.</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/TGTT7/order/ORD_244185/transaction/TXN_244185</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request(Whitelabel service):_**

{
  "apiOperation": "PURCHASE_WITH_RETURNED_TOKEN",
  "order": {
    "amount": 10000,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "provided": {
      "card": {
        "number": "9704000000000018",
        "issueDate": "0307",
        "nameOnCard": "NGUYEN VAN A"
      }
    }
  },
  "submerchant": {
    "code": "SUBMERCHANT",
    "name": "Blah blah blah",
    "referenceId": "12345"
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  },
  "customer": {
   "customerId": "123456789"
  }
}

**_Request (Cashin service):_**

{
  "apiOperation": "PURCHASE_WITH_RETURNED_TOKEN",
  "order": {
    "amount": 10000,
    "currency": "VND",
    "reference": "CASHIN123"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "provided": {
      "card": {
        "number": "9704000000000018",
        "issueDate": "0307",
        "nameOnCard": "NGUYEN VAN A"
      }
    }
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  },
  "customer": {
   "customerId": "123456789"
  }
}

**_Request (pay with account):_**

{
  "apiOperation": "PURCHASE_WITH_RETURNED_TOKEN",
  "order": {
    "amount": 10000,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "ACCOUNT",
    "provided": {
      "account": {
        "accountName": "NGUYEN VAN A",
        "accountNumber": "01040001",
        "issuerCode": "SML",
        "identificationNumber": "01040001"
      }
    }
  },
  "submerchant": {
    "code": "SUBMERCHANT",
    "name": "Blah blah blah",
    "referenceId": "12345"
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  },
  "customer": {
   "customerId": "123456789"
  }
}

**_Response:_**

{
    "apiOperation": "PURCHASE_WITH_RETURNED_TOKEN",
    "order": {
        "amount": "10000",
        "currency": "VND",
        "id": "ORD_700008"
    },
    "result": "SUCCESS",
    "response": {
        "acquirerCode": "11",
        "gatewayCode": "PENDING_FOR_OTP",
        "message": "Transaction needs to be verified."
    },
    "merchantId": "VTBWL",
    "transaction": {
        "acquirer": {
            "id": "100003283",
            "transactionId": "100003283"
        },
        "amount": 10000,
        "currency": "VND",
        "id": "1000023",
        "type": "PAYMENT"
    },
    "dataKey": "dc0TeA+RsgtZAwGxJA/+gU8OHOfF3A4zKU+LsTAWUY2RwTjVEcPXWK1oaiEuQhwCv+pZ6m9zEHdbuK7gbDDZAUhx6J3Q16GqAtbq4pZvW+AwZAm0JxtSg4XbiynQ+gPqQpoKX1+9tlZhKVgdncIP+CDMVz92yR061B7Ump7eZm0lrjVmuPDU566WoNZlUafOjwhl7jQVoJoZtiFDrlmiWPMaL3XhCowcNSwBvscS6XCB4y0kw91Zk2KW9RFmVvG/9FkyHuetGE65jZc84Gv81zKDVWxp+SDeFoBFiop73Z47H7okvNlj0bA0snRteBypd79EhGux0t6r95eLWM3DWOc1O5AW5CfLG9qDi+nER+axioebGe0edLH9BQZ8dmrtO2tis34Pui30cpyxSmfgq/4gsa4kJqKJGCKxE4wuOhtJjt+O",
    "napasKey": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArbP6iFl0Z9pDHv5ni/fhl4ME6AfP16E5zmrHYftaBlcvq1bWRwk1TH23OrYQ6n6jEGIbmrVXzIM00lk723/ZHtvbyZld8r5TcEh5M+h/jIu3/J9gqNYGTo9jLJ0DvRdSfzbDWJqPImPfcGJDRPTrEtckqmd8HvkU6J3MCPrg0IOGTYplUmw6DZ25g1SpBSb1CAWGqP36nqyxNZ4hNJ08agHQbRc/ICHUb/8+/UjDETX96SYVn+GBKbrMM/NcgiJV7UXbEmQ9OEiM3BbI5srhCOt0oYoCp0sJcpLcLbRlpdC7/nV44KPty1rkZ32KlBufz3UVggXpHPz0k0yxYTvl/wIDAQAB:MIICtTCCAZ0CBgFoko89+DANBgkqhkiG9w0BAQUFADAeMRwwGgYDVQQDExNUZXN0IENBIENlcnRpZmljYXRlMB4XDTE5MDEyODAzNDQ0N1oXDTE5MDEyOTAzNDQ0N1owHjEcMBoGA1UEAxMTVGVzdCBDQSBDZXJ0aWZpY2F0ZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK2z+ohZdGfaQx7+Z4v34ZeDBOgHz9ehOc5qx2H7WgZXL6tW1kcJNUx9tzq2EOp+oxBiG5q1V8yDNNJZO9t/2R7b28mZXfK+U3BIeTPof4yLt/yfYKjWBk6PYyydA70XUn82w1iajyJj33BiQ0T06xLXJKpnfB75FOidzAj64NCDhk2KZVJsOg2duYNUqQUm9QgFhqj9+p6ssTWeITSdPGoB0G0XPyAh1G//Pv1IwxE1/ekmFZ/hgSm6zDPzXIIiVe1F2xJkPThIjNwWyObK4QjrdKGKAqdLCXKS3C20ZaXQu/51eOCj7cta5Gd9ipQbn891FYIF6Rz89JNMsWE75f8CAwEAATANBgkqhkiG9w0BAQUFAAOCAQEAFXK48p71S87EmrnCm5Yvv42Oxzh0B18/q4jn891xS1abFRkW2jdCvpc3IUQL6gy+JFQcY2NSaLhIYgBafmcngiBFt4kkTqUuwSdIWudl3jYkO58SOYKdxW8jbXM5KwTujpb0gYBpf1u5828RmEq6YEog/yx/hYQOFQlfIBBZFNmUJ7U5TDCFL2wT5MqPg2cfb1DirveD3sLSIUc90IJM3eUXfzXqkwdrCKDZRSuV3TMHChi1IRio2fg7zesi9HliFueaekkvynnwXoG41LKaMSBMM/Mdrb2tm29jVYnlYJ8Coj+dOjWhU2y83dFi5DGr8a3ftWOc+rEz2zlOUKRF7Q=="
}

The next step to integrate the hosted form/payment page is the same as **_“Purchase OTP (with card / token card)”_**

**_The final response example:_**

{
  "tokenResult": {
    "result": "SUCCESS",
    "response": {
      "acquirerCode": "0",
      "gatewayCode": " APPROVED",
      "message": "SUCCESS"
    },
    "tokenId": "11-00c51f69-1c64-415a-8aac-2dee8ca9cfee",
    "pan": "9704111354493487",
    "card": {
      "brand": "SML",
      "nameOnCard": "NGUYEN VAN A",
      "issueDate": "032007",
      "number": "970400xxxxxx0018",
      "scheme": "SML"
    },
    "orderId": "ORD_243682"
  },
  "paymentResult": {
    "apiOperation": "PAY_WITH_RETURNED_TOKEN",
    "merchantId": "TGTT7",
    "order": {
      "amount": "10000",
      "creationTime": "2025-09-29T08:42:24",
      "currency": "VND",
      "id": "ORD_243682"
    },
    "response": {
      "acquirerCode": "0",
      "gatewayCode": "APPROVED",
      "message": "SUCCESS"
    },
    "result": "SUCCESS",
    "sourceOfFunds": {
      "provided": {
        "card": {
          "brand": "SML",
          "nameOnCard": "NGUYEN VAN A",
          "issueDate": "032007",
          "number": "970400xxxxxx0018",
          "scheme": "SML"
        }
      },
      "type": "PAYMENT"
    },
    "transaction": {
      "acquirer": {
        "id": "100003212",
        "transactionId": "100003212"
      },
      "amount": "10000",
      "currency": "VND",
      "id": "PURCHASE_133394100000",
      "type": "PAYMENT"
    },
    "version": "1",
    "channel": "6014"
  }
}

### 5.5.3. Purchase Account (with account / account token)

Used for Payment Service Provider (PSP) who registered for White label or Cashin service utilizing the merchant-hosted model to process payments via account or account token.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>PURCHASE_ACCOUNT: Authorise the payment and transfer funds. Only use for domestic accounts.</p></td></tr><tr><td><p>transactionInitiator</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td></td><td><p>CUSTOMER: the customer initiates the transaction</p><p>MERCHANT: the merchant initiates the transaction</p></td></tr><tr><td><p>agreement</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>A series of related orders that execute one commercial agreement.</p></td></tr><tr><td><p>agreement.expiryDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd 10</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Date at which your agreement with the payer to process payments expires.</p></td></tr><tr><td><p>agreement.id</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Your identifier for the agreement you have with the payer to process payments.</p></td></tr><tr><td><p>agreement.amountVariability</p></td><td><p>Enumeration</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Indicates if all the payments within the agreement use the same amount or if the amount differs between the payments.</p><p>FIXED: All payments in the recurring payment agreement have the same amount. Examples include magazine subscriptions or gym memberships.</p><p>VARIABLE: The amount for the payments within the recurring payment agreement differs between payments. Examples include usage-based charges like utility or phone bills.</p></td></tr><tr><td><p>agreement.type</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The type of commercial agreement that the payer has with you.</p><p>INSTALLMENT: An agreement where the payer authorizes the payment for a single purchase to be split into a number of payments processed at agreed intervals. For example, pay for a purchase in six monthly installments.</p><p>OTHER: An agreement where the merchant wants to link related payments for any purpose other than processing recurring, installment, or unscheduled payments. For example, split tender payments.</p><p>RECURRING: An agreement where the payer authorizes the merchant to process payments for recurring bills or invoices at agreed intervals (for example, weekly, monthly). The amount might be fixed or variable.</p><p>UNSCHEDULED: An agreement where the payer authorizes the merchant to automatically deduct funds for a payment for an agreed purchase when required (unscheduled). For example, auto top-ups when the account value falls below a threshold.</p><p>Required if serviceCode=AUTOPAY.</p></td></tr><tr><td><p>agreement.minimumDaysBetweenPayments</p></td><td><p>Integer</p></td><td><p>9999</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The minimum number of days between payments agreed with the payer under your agreement with them.</p></td></tr><tr><td><p>agreement.paymentFrequency</p></td><td><p>Enumeration</p></td><td><p>15</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The frequency of the payments within the series as agreed with the payer under your agreement with them. It could be these values: AD_HOC, DAILY, FORTNIGHTLY, MONTHLY, OTHER, QUARTERLY, TWICE_YEARLY, WEEKLY, YEARLY</p></td></tr><tr><td><p>3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Information on 3DSecure fields.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect</p></td><td></td><td></td><td></td><td></td><td><p>A collection of parameters required to build the HTML form that is redirected to the ACS.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple</p></td><td></td><td></td><td></td><td></td><td><p>The simple field is the response returned to those merchants who have chosen the simple option for form submission.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.simple.htmlBodyContent</p></td><td><p>Data can consist of any characters</p></td><td></td><td></td><td><p>C</p></td><td><p>The generated form to post to the cardholder’s browser.</p></td></tr><tr><td><p>3DSecure.authenticationRedirect.responseUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>2048</p></td><td><p>R</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p></td></tr><tr><td><p>3Dsecure.summaryStatus</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The summarized response from the card issuer and the payment gateway indicating the overall status of the attempt to authenticate the cardholder.</p></td></tr><tr><td><p>3DSecure.xid</p></td><td></td><td><p>128</p></td><td></td><td></td><td><p>A unique transaction identifier generated by the Payment Gateway on behalf of the merchant to identify the 3DS transaction.</p></td></tr><tr><td><p>3DSecureId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>A unique identifier supplied by the merchant for the authentication.</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td></td><td></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The field represents the customer’s account or device identifier used when digitizing the card information.<br>This value must be unique within the merchant’s system and is required when performing a payment with token.</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>billing</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>Details of the payer's billing address.</p></td></tr><tr><td><p>billing.address</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The payer's billing address.</p></td></tr><tr><td><p>billing.address.city</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The city portion of the address.</p></td></tr><tr><td><p>billing.address.company</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The name of the company associated with this address.</p></td></tr><tr><td><p>billing.address.country</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td></tr><tr><td><p>billing.address.postcodeZip</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The post code or zip code of the address.</p></td></tr><tr><td><p>billing.address.stateProvinceCode</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td></tr><tr><td><p>billing.address.street</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The first line of the address.</p></td></tr><tr><td><p>billing.address.street2</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The second line of the address (if provided).</p></td></tr><tr><td><p>billing.address.street3</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The third line of the address (if provided).</p></td></tr><tr><td><p>shipping</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>Shipping information for this order.</p></td></tr><tr><td><p>shipping.address</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The address to which this order will be shipped.</p></td></tr><tr><td><p>shipping.address.city</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The city portion of the address.</p></td></tr><tr><td><p>shipping.address.company</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The name of the company associated with this address.</p></td></tr><tr><td><p>shipping.address.country</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td></tr><tr><td><p>shipping.address.postcodeZip</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The post code or zip code of the address.</p></td></tr><tr><td><p>shipping.address.stateProvinceCode</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td></tr><tr><td><p>shipping.address.street</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The first line of the address.</p></td></tr><tr><td><p>shipping.address.street2</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The second line of the address (if provided).</p></td></tr><tr><td><p>shipping.address.street3</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The third line of the address (if provided).</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.browser</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The User-Agent header of the browser the customer used to place the order.</p></td></tr><tr><td><p>device.fingerprint</p></td><td><p>String</p></td><td><p>4000</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Information collected about a remote computing device for the purpose of providing a unique identifier for the device.</p></td></tr><tr><td><p>device.hostname</p></td><td><p>String</p></td><td><p>60</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The name of the server to which the customer is connected.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>45</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The device information</p></td></tr><tr><td><p>device.browserDetails</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>Browser details</p></td></tr><tr><td><p>device.browserDetails.userAgent</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td></td><td><p>Browser’s User-Agent header content.</p></td></tr><tr><td><p>device.browserDetails.javaEnabled</p></td><td><p>Boolean</p></td><td><p>true/false</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: navigator.javaEnabled()</p></td></tr><tr><td><p>device.browserDetails.3DSecureChallengeWindowSize</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Browser window size</p></td></tr><tr><td><p>device.browserDetails.acceptHeaders</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Browser’s User-Agent header content</p></td></tr><tr><td><p>device.browserDetails.colorDepth</p></td><td><p>String</p></td><td><p>2</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.colorDepth;</p></td></tr><tr><td><p>device.browserDetails.language</p></td><td><p>String</p></td><td><p>8</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: navigator.language;</p></td></tr><tr><td><p>device.browserDetails.screenHeight</p></td><td><p>String</p></td><td><p>6</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.height;</p></td></tr><tr><td><p>device.browserDetails.screenWidth</p></td><td><p>String</p></td><td><p>6</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.width;</p></td></tr><tr><td><p>device.browserDetails.timeZone</p></td><td><p>String</p></td><td><p>5</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: (new Date()).getTimeZoneOffset();</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p><p>For CASHIN transactions, the value must start with “CASHIN” prefix</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>C</p></td><td></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.3DSecure</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>The response code which indicates the status.</p></td></tr><tr><td><p>response.3DSecure.gatewayCode</p></td><td><p>String</p></td><td><p>99</p></td><td></td><td><p>C</p></td><td><p>The detailed response from the payment gateway to indicate the status of the 3DS authentication.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: use for recurring payments.</p><p>FASTPAY: use for fast purchase.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.account</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>C</p></td><td><p>Source of fund provided account data group.</p><p>Details of the bank account.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Code of the issuing bank.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountName</p></td><td><p>Data is a string that consist of the characters A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s bank account name</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s bank account number</p></td></tr><tr><td><p>sourceOfFunds.provided.account.identificationNumber</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s indentification number or passport number</p></td></tr><tr><td><p>sourceOfFunds.provided.account.phoneNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s phone number (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.ibUsername</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s internet banking username used to login to the issuer bank’s internet banking</p></td></tr><tr><td><p>sourceOfFunds.provided.account.email</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z._@</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s email (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.taxCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s tax code (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.hardToken</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s hard token (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.customerCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s customer code (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>ACCOUNT: for account payments</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.date</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer. Format yyyy/mm/dd HH:MM:SS</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_PAYMENT: Void Payment</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>transaction.otp</p></td><td><p>Data consist of a-z, A-Z, 0-9 characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>O</p></td><td><p>One time password, use for local purpose</p></td></tr><tr><td><p>transaction.authenGroup</p></td><td><p>String</p></td><td><p>10</p></td><td></td><td><p>C</p></td><td><p>Indicates the type of transaction group, such as A, B, C, D, E, F (according to Cicular 50 of SBV)</p></td></tr><tr><td><p>transaction.typeOfVerification</p></td><td></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Indicates the type of verification performed with debit/atm card.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SMS_OTP: in this case, transaction.otp will contain the OTP value sent to payer (payer inputs this value).</p><p>SOFT_OTP: in this case, customers will get soft otp from issuer’s mobile application.</p><p>MOBILE_BANKING: in this case, customers will be redirected to issuer mobile application</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td><p>inputParameters</p></td><td></td><td></td><td></td><td></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>CreditCard</em>: use in case of international cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td></td><td></td><td><p>R</p></td><td></td><td><p>Supports 3DSecure for authorizing cardholder when using CreditCard.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>dataKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string that represents the session of merchant which wants to do server-hosted form.</p></td></tr><tr><td><p>napasKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string used for security reasons. This is a public key, used in checking signature of Napas.</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/NAPASTEST/order/ORD_321355/transaction/TXN_321355</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request (Whitelabel service, pay with account):_**

{
  "apiOperation": "PURCHASE_ACCOUNT",
  "order": {
    "amount": 10000,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "ACCOUNT",
    "provided": {
      "account": {
        "issuerCode": "SML",
        "accountName": "NGUYEN VAN A",
        "accountNumber": "01040001",
        "identificationNumber": "01040001"
      }
    }
  },
  "submerchant": {
    "code": "SUBMERCHANT",
    "name": "Blah blah blah",
    "referenceId": "12345"
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  }
}

**_Request (Whitelabel service, pay with account token):_**

{
  "apiOperation": "PURCHASE_ACCOUNT",
  "order": {
    "amount": 10000,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "ACCOUNT",
    "token": "9704003179960018"
  },
  "submerchant": {
    "code": "SUBMERCHANT",
    "name": "Blah blah blah",
    "referenceId": "12345"
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  },
  "customer": {
   "customerId": "123456789"
  }
}

**_Request (Cashin service, pay with account token):_**

{
  "apiOperation": "PURCHASE_ACCOUNT",
  "order": {
    "amount": 10000,
    "currency": "VND",
    "reference": "CASHIN123"
  },
  "sourceOfFunds": {
    "type": "ACCOUNT",
    "token": "9704003179960018"
  },
  "channel": "6014",
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  },
  "customer": {
   "customerId": "123456789"
  }
}

**_Response:_**

{
    "apiOperation": "PURCHASE_ACCOUNT",
    "order": {
        "amount": "10000",
        "currency": "VND",
        "fastPay": "0",
        "id": "ORD_710001",
        "merchantTransId": "1000023"
    },
    "result": "SUCCESS",
    "response": {
        "acquirerCode": "11",
        "gatewayCode": "PENDING_FOR_OTP",
        "message": "Transaction needs to be verified."
    },
    "transaction": {
        "acquirer": {
            "id": "100003504",
            "transactionId": "100003504"
        },
        "amount": 10000,
        "currency": "VND",
        "id": "1000023",
        "type": "PAYMENT"
    },
    "dataKey": "dc0TeA+RsgtZAwGxJA/+g1wYH5zF3A4zKU+LsTAWUY2RwTjVEcPXWK1oaiEuQhwCv+pZ6m9zEHdbuK7gbDDZAUhx6J3Q16GqAtbq4pZvW+AwZAm0JxtSg4XbiynQ+gPqQpoKX1+9tlZhKVgdncIP+CDMVz92yR061B7Ump7eZm0lrjVmuPDU566WoNZlUafOjwhl7jQVoJoZtiFDrlmiWPMaL3XhCowcNSwBvscS6XCB4y0kw91Zk2KW9RFmVvG/9FkyHuetGE65jZc84Gv81zKDVWxp+SDeFoBFiop73Z47H7okvNlj0bA0snRteByod79EjWux0t6r95eLWM3DWOc1O5AW5CfLG9qDi+nER+axioebGe0ecrn+AAVycmrtO2tis34Pui30cpyxSmfgq/4gsa6RxAVgx4co9iS+ew6tQSE5",
    "napasKey": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArbP6iFl0Z9pDHv5ni/fhl4ME6AfP16E5zmrHYftaBlcvq1bWRwk1TH23OrYQ6n6jEGIbmrVXzIM00lk723/ZHtvbyZld8r5TcEh5M+h/jIu3/J9gqNYGTo9jLJ0DvRdSfzbDWJqPImPfcGJDRPTrEtckqmd8HvkU6J3MCPrg0IOGTYplUmw6DZ25g1SpBSb1CAWGqP36nqyxNZ4hNJ08agHQbRc/ICHUb/8+/UjDETX96SYVn+GBKbrMM/NcgiJV7UXbEmQ9OEiM3BbI5srhCOt0oYoCp0sJcpLcLbRlpdC7/nV44KPty1rkZ32KlBufz3UVggXpHPz0k0yxYTvl/wIDAQAB:MIICtTCCAZ0CBgFoko89+DANBgkqhkiG9w0BAQUFADAeMRwwGgYDVQQDExNUZXN0IENBIENlcnRpZmljYXRlMB4XDTE5MDEyODAzNDQ0N1oXDTE5MDEyOTAzNDQ0N1owHjEcMBoGA1UEAxMTVGVzdCBDQSBDZXJ0aWZpY2F0ZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK2z+ohZdGfaQx7+Z4v34ZeDBOgHz9ehOc5qx2H7WgZXL6tW1kcJNUx9tzq2EOp+oxBiG5q1V8yDNNJZO9t/2R7b28mZXfK+U3BIeTPof4yLt/yfYKjWBk6PYyydA70XUn82w1iajyJj33BiQ0T06xLXJKpnfB75FOidzAj64NCDhk2KZVJsOg2duYNUqQUm9QgFhqj9+p6ssTWeITSdPGoB0G0XPyAh1G//Pv1IwxE1/ekmFZ/hgSm6zDPzXIIiVe1F2xJkPThIjNwWyObK4QjrdKGKAqdLCXKS3C20ZaXQu/51eOCj7cta5Gd9ipQbn891FYIF6Rz89JNMsWE75f8CAwEAATANBgkqhkiG9w0BAQUFAAOCAQEAFXK48p71S87EmrnCm5Yvv42Oxzh0B18/q4jn891xS1abFRkW2jdCvpc3IUQL6gy+JFQcY2NSaLhIYgBafmcngiBFt4kkTqUuwSdIWudl3jYkO58SOYKdxW8jbXM5KwTujpb0gYBpf1u5828RmEq6YEog/yx/hYQOFQlfIBBZFNmUJ7U5TDCFL2wT5MqPg2cfb1DirveD3sLSIUc90IJM3eUXfzXqkwdrCKDZRSuV3TMHChi1IRio2fg7zesi9HliFueaekkvynnwXoG41LKaMSBMM/Mdrb2tm29jVYnlYJ8Coj+dOjWhU2y83dFi5DGr8a3ftWOc+rEz2zlOUKRF7Q=="
}

The next step to integrate the hosted form/payment page is the same as **_“Purchase OTP (with card / token card)”_**

**_The final response example:_**

{
  "paymentResult": {
    "apiOperation": "PURCHASE_ACCOUNT",
    "merchantId": "TGTT7",
    "order": {
      "amount": "10000",
      "currency": "VND",
      "fastPay": 0,
      "id": "ORD_710006",
      "merchantTransId": "PURCHASE_389806100000",
      "creationTime": "2025-09-30T17:08:23"
    },
    "response": {
      "acquirerCode": "0",
      "gatewayCode": "SUCCESS",
      "message": "Transaction is successful."
    },
    "result": "SUCCESS",
    "sourceOfFunds": {
      "type": "ACCOUNT",
      "provided": {
        "account": {
          "accountName": "NGUYEN VAN A",
          "accountNumber": "0104xx01",
          "issuerCode": "SML"
        }
      }
    },
    "transaction": {
      "currency": "VND",
      "acquirer": {
        "date": "2025-09-30T17:08:23",
        "id": "100003294",
        "transactionId": "100003294"
      },
      "amount": "10000",
      "id": "PURCHASE_389806100000",
      "type": "PAYMENT"
    }
  }
}

### 5.5.4. Refund Domestic

* This transaction is used to refund customers.
* Partner can refund many times for the same orderId, if the total amount of refund does not exceed the original transaction amount.
* The refund transaction must have the same orderId with the previous payment transaction.
* The refund transaction has a transactionId different from the previous payment transaction, each partial refund transactions for the same order must have unique transactionId.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}/refundTransaction</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>REFUND_DOMESTIC: Request to refund previously captured funds to the payer (for previous domestic transaction).</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>O</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.acquirer.customData</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Napas refund transaction Id.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order. REFUND</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/api/rest/version/1/merchant/NAPASTEST/order/ORD_170974/transaction/TXN_837271/refundTransaction</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
  "apiOperation": "REFUND_DOMESTIC",
  "transaction": {
    "amount": 10000,
    "currency": "VND"
  },
  "channel": "6014"
}

**_Response:_**

{
    "apiOperation": "REFUND_DOMESTIC",
    "merchantId": "VTBWL",
    "order": {
        "creationTime": "2025-09-30T19:11:51.88664097",
        "currency": "VND",
        "id": "ORD_914093"
    },
    "response": {
        "acquirerCode": "0",
        "gatewayCode": "APPROVED",
        "message": "Transaction is successful."
    },
    "result": "SUCCESS",
    "transaction": {
        "acquirer": {
            "transactionId": "100003206"
        },
        "amount": "2000",
        "id": "1000023",
        "type": "REFUND"
    }
}

### 5.5.5. Void Domestic

* A void transaction cancels a previous payment transaction. It is only valid if performed on the same processing day as the original payment transaction (before 23:54 PM).
* The void transaction must have the same orderId as the original payment transaction.
* The void transaction has a different transactionId from the original payment transaction, and the transactionId of the original payment transaction must be placed in the targetTransactionId field.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}/voidTransaction</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>VOID_DOMESTIC: Request to void a previous transaction</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order. VOID_PAYMENT</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/NAPASTEST/order/ORD_170974/transaction/TXN_837271/voidTransaction</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
  "apiOperation": "VOID_DOMESTIC",
  "transaction": {
    "targetTransactionId": "100003216"
  },
  "channel": "6014"
}

**_Response:_**

{
    "apiOperation": "VOID_DOMESTIC",
    "merchantId": "VTBWL",
    "order": {
        "creationTime": "2025-09-30T19:19:25",
        "id": "ORD_636854"
    },
    "response": {
        "acquirerCode": "0",
        "gatewayCode": "APPROVED",
        "message": "Transaction is successful."
    },
    "result": "SUCCESS",
    "transaction": {
        "acquirer": {
            "transactionId": "100003307"
        },
        "amount": "10000",
        "id": "100002909",
        "type": "VOID"
    }
}

### 5.5.6. Retrieve Order

Request to retrieve the details of an order.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/domestic</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Response Body:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td></td><td><p>100</p></td><td><p>O</p></td><td><p>R</p></td><td><p>RETRIEVE: Request to retrieve the details of a transaction</p></td></tr><tr><td><p>merchantId</p></td><td></td><td><p>999</p></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The total amount for the order. </p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>O</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>O</p></td><td><p>The amount that has been successfully captured for this order</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td></td><td><p>12</p></td><td></td><td><p>O</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>response</p></td><td></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>sourceOfFunds</p></td><td></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card&nbsp;</p></td><td></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme&nbsp;</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: The payer selected to pay using a credit or debit card. The payer's card details must be provided.</p><p>In case of token using, please send this parameter with value CARD.</p></td></tr><tr><td><p>transaction&nbsp;&nbsp;</p></td><td></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>maximum value: 1000000000000</p><p>minimum value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference&nbsp;</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>maximum value: 1000000000000</p><p>minimum value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p></td></tr><tr><td><p>transaction.type</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>QR_PUSH: Payment by QRCode</p><p>OTHER: Other transaction types</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>10</p></td><td></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>9</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/NAPASTEST/order/ORD_170974/domestic</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Response:_**

{
    "apiOperation": "RETRIEVE",
    "merchantId": "VTBWL",
    "order": {
        "creationTime": "2025-09-30T08:45:30",
        "currency": "VND",
        "id": "ORD_834131"
    },
    "response": {
        "acquirerCode": "0",
        "gatewayCode": "SUCCESS",
        "message": "Transaction is successful."
    },
    "result": "SUCCESS",
    "transaction": {
        "acquirer": {
            "transactionId": "100003255"
        },
        "amount": "10000",
        "id": "",
        "type": "RETRIEVE"
    }
}

### 5.5.7. Create Token

Request for the gateway to store a payment instrument against a token.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}/createToken</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ssm, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>CREATE_TOKEN: A request to generate a token that represents the payment details.</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form.</p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card.</p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card.</p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p><p>ACCOUNT: for account payments</p><p>DEELINK: for deep link payments</p></td></tr><tr><td><p>sourceOfFunds.provided.account</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>C</p></td><td><p>Source of fund provided account data group.</p><p>Details of the bank account.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Code of the issuing bank.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountName</p></td><td><p>Data is a string that consist of the characters A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s bank account name</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s bank account number</p></td></tr><tr><td><p>sourceOfFunds.provided.account.identificationNumber</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s indentification number or passport number</p></td></tr><tr><td><p>sourceOfFunds.provided.account.phoneNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s phone number (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.ibUsername</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s internet banking username used to login to the issuer bank’s internet banking</p></td></tr><tr><td><p>sourceOfFunds.provided.account.email</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z._@</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s email (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.taxCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s tax code (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.hardToken</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s hard token (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.customerCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Customer’s customer code (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.deeplink</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>C</p></td><td><p>Issuer Bank payment information via deeplink</p></td></tr><tr><td><p>sourceOfFunds.provided.deeplink.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>O</p></td><td><p>C</p></td><td><p>Issuer code information selected by the user from the issuer bank list by Napas provided to the merchant</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The field represents the customer’s account or device identifier used when digitizing the account information.<br>This value must be unique within the merchant’s system and is required when performing a payment with token.</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The email address of the customer.</p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>billing</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>Details of the payer's billing address.</p></td></tr><tr><td><p>billing.address</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The payer's billing address.</p></td></tr><tr><td><p>billing.address.city</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The city portion of the address.</p></td></tr><tr><td><p>billing.address.company</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The name of the company associated with this address.</p></td></tr><tr><td><p>billing.address.country</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td></tr><tr><td><p>billing.address.postcodeZip</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The post code or zip code of the address.</p></td></tr><tr><td><p>billing.address.stateProvinceCode</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td></tr><tr><td><p>billing.address.street</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The first line of the address.</p></td></tr><tr><td><p>billing.address.street2</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The second line of the address (if provided).</p></td></tr><tr><td><p>billing.address.street3</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The third line of the address (if provided).</p></td></tr><tr><td><p>shipping</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>Shipping information for this order.</p></td></tr><tr><td><p>shipping.address</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>O</p></td><td><p>The address to which this order will be shipped.</p></td></tr><tr><td><p>shipping.address.city</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The city portion of the address.</p></td></tr><tr><td><p>shipping.address.company</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The name of the company associated with this address.</p></td></tr><tr><td><p>shipping.address.country</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The 3 letter ISO standard alpha country code of the address.</p></td></tr><tr><td><p>shipping.address.postcodeZip</p></td><td><p>String</p></td><td><p>10</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The post code or zip code of the address.</p></td></tr><tr><td><p>shipping.address.stateProvinceCode</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The three character ISO 3166-2 country subdivision code for the state or province of the address.</p></td></tr><tr><td><p>shipping.address.street</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The first line of the address.</p></td></tr><tr><td><p>shipping.address.street2</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The second line of the address (if provided).</p></td></tr><tr><td><p>shipping.address.street3</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The third line of the address (if provided).</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.browser</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The User-Agent header of the browser the customer used to place the order.</p></td></tr><tr><td><p>device.fingerprint</p></td><td><p>String</p></td><td><p>4000</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Information collected about a remote computing device for the purpose of providing a unique identifier for the device.</p></td></tr><tr><td><p>device.hostname</p></td><td><p>String</p></td><td><p>60</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The name of the server to which the customer is connected.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>45</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The device information</p></td></tr><tr><td><p>device.browserDetails</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>Browser details</p></td></tr><tr><td><p>device.browserDetails.userAgent</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td></td><td><p>Browser’s User-Agent header content.</p></td></tr><tr><td><p>device.browserDetails.javaEnabled</p></td><td><p>Boolean</p></td><td><p>true/false</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: navigator.javaEnabled()</p></td></tr><tr><td><p>device.browserDetails.3DSecureChallengeWindowSize</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Browser window size</p></td></tr><tr><td><p>device.browserDetails.acceptHeaders</p></td><td><p>String</p></td><td><p>2048</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Browser’s User-Agent header content</p></td></tr><tr><td><p>device.browserDetails.colorDepth</p></td><td><p>String</p></td><td><p>2</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.colorDepth;</p></td></tr><tr><td><p>device.browserDetails.language</p></td><td><p>String</p></td><td><p>8</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: navigator.language;</p></td></tr><tr><td><p>device.browserDetails.screenHeight</p></td><td><p>String</p></td><td><p>6</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.height;</p></td></tr><tr><td><p>device.browserDetails.screenWidth</p></td><td><p>String</p></td><td><p>6</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: screen.width;</p></td></tr><tr><td><p>device.browserDetails.timeZone</p></td><td><p>String</p></td><td><p>5</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Javascript: (new Date()).getTimeZoneOffset();</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td><p>inputParameters</p></td><td></td><td></td><td></td><td></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>CreditCard</em>: use in case of international cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td></td><td></td><td><p>R</p></td><td></td><td><p>Supports 3DSecure for authorizing cardholder when using CreditCard.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>dataKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string that represents the session of merchant which wants to do server-hosted form.</p></td></tr><tr><td><p>napasKey</p></td><td><p>string</p></td><td></td><td></td><td><p>C</p></td><td><p>A system-generated string used for security reasons. This is a public key, used in checking signature of Napas.</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/APITEST/order/ORD_244185/transaction/TXN_244185/createToken</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request (card):_**

{
  "apiOperation": "CREATE_TOKEN",
  "order": {
    "amount": 0,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "provided": {
      "card": {
        "number": "9704000000000018",
        "issueDate": "0307",
        "nameOnCard": "Nguyen Van A"
      }
    }
  },
 "customer": {
   " customerId": " 123456789"
 },
  "channel": "6014"
}

**_Request (account):_**

{
  "apiOperation": "CREATE_TOKEN",
  "order": {
    "amount": 0,
    "currency": "VND"
  },
  "sourceOfFunds": {
    "type": "CARD",
    "provided": {
      "account": {
        "issuerCode": "SML",
        "accountName": "NGUYEN VAN A",
        "accountNumber": "01040001",
        "identificationNumber": "01040001"
      }
    }
  },
  "customer": {
   " customerId": " 123456789"
  },
  "channel": "6014"
}

**_Response (when token is existed):_**

{
    "tokenResult": {
        "result": "SUCCESS",
        "response": {
            "acquirerCode": "50",
            "gatewayCode": "TOKEN_EXISTED",
            "message": "Your payment details has been saved with this card. Please contact your merchant for more information."
        },
        "token": "9704111354493487"
    }
}

**_Response:_**

{
    "apiOperation": "CREATE_TOKEN",
    "order": {
        "amount": "2000",
        "currency": "VND",
        "id": "ORD_700050"
    },
    "result": "SUCCESS",
    "response": {
        "acquirerCode": "11",
        "gatewayCode": "PENDING_FOR_OTP",
        "message": "Transaction needs to be verified."
    },
    "dataKey": "dc0TeA+RsgtZAwGxJA/+g1wYH5zF3A4zKU+LsTAWUY2RwTjVEcPXWK1oaiEuQhwCv+pZ6m9zEHdbuK7gbDDZAUhx6J3Q16GqAtbq4pZvW+AwZAm0JxtSg4XbiynQ+gPqQpoKX1+9tlZhKVgdncIP+CDMVz92yR061B7Ump7eZm0lrjVmuPDU566WoNZlUafOjwhl7jQVoJoZtiFDrlmiWPMaL3XhCowcNSwBvscS6XCB4y0kw91Zk2KW9RFmVvG/9FkyHuetGE65jZc842v81yCNWy1//iDJHY1f0ZJjqYYxebQq99QlyahZr2J2EBupd7pEnjTg3Iq44JaRXsyPQP8kOoAY6mHODsuytu3MAP66jIWXEucUcLnzDwBza2SuPmtvrmMJuyL5PISpBkjRmoo37ib2KMk4FaSksZMLGsEx6Dg=",
    "napasKey": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArbP6iFl0Z9pDHv5ni/fhl4ME6AfP16E5zmrHYftaBlcvq1bWRwk1TH23OrYQ6n6jEGIbmrVXzIM00lk723/ZHtvbyZld8r5TcEh5M+h/jIu3/J9gqNYGTo9jLJ0DvRdSfzbDWJqPImPfcGJDRPTrEtckqmd8HvkU6J3MCPrg0IOGTYplUmw6DZ25g1SpBSb1CAWGqP36nqyxNZ4hNJ08agHQbRc/ICHUb/8+/UjDETX96SYVn+GBKbrMM/NcgiJV7UXbEmQ9OEiM3BbI5srhCOt0oYoCp0sJcpLcLbRlpdC7/nV44KPty1rkZ32KlBufz3UVggXpHPz0k0yxYTvl/wIDAQAB:MIICtTCCAZ0CBgFoko89+DANBgkqhkiG9w0BAQUFADAeMRwwGgYDVQQDExNUZXN0IENBIENlcnRpZmljYXRlMB4XDTE5MDEyODAzNDQ0N1oXDTE5MDEyOTAzNDQ0N1owHjEcMBoGA1UEAxMTVGVzdCBDQSBDZXJ0aWZpY2F0ZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK2z+ohZdGfaQx7+Z4v34ZeDBOgHz9ehOc5qx2H7WgZXL6tW1kcJNUx9tzq2EOp+oxBiG5q1V8yDNNJZO9t/2R7b28mZXfK+U3BIeTPof4yLt/yfYKjWBk6PYyydA70XUn82w1iajyJj33BiQ0T06xLXJKpnfB75FOidzAj64NCDhk2KZVJsOg2duYNUqQUm9QgFhqj9+p6ssTWeITSdPGoB0G0XPyAh1G//Pv1IwxE1/ekmFZ/hgSm6zDPzXIIiVe1F2xJkPThIjNwWyObK4QjrdKGKAqdLCXKS3C20ZaXQu/51eOCj7cta5Gd9ipQbn891FYIF6Rz89JNMsWE75f8CAwEAATANBgkqhkiG9w0BAQUFAAOCAQEAFXK48p71S87EmrnCm5Yvv42Oxzh0B18/q4jn891xS1abFRkW2jdCvpc3IUQL6gy+JFQcY2NSaLhIYgBafmcngiBFt4kkTqUuwSdIWudl3jYkO58SOYKdxW8jbXM5KwTujpb0gYBpf1u5828RmEq6YEog/yx/hYQOFQlfIBBZFNmUJ7U5TDCFL2wT5MqPg2cfb1DirveD3sLSIUc90IJM3eUXfzXqkwdrCKDZRSuV3TMHChi1IRio2fg7zesi9HliFueaekkvynnwXoG41LKaMSBMM/Mdrb2tm29jVYnlYJ8Coj+dOjWhU2y83dFi5DGr8a3ftWOc+rEz2zlOUKRF7Q=="
}

After receiving a response from Napas (which is just the result of the card verification step, there is no token result yet):

* If payment information isn’t verified successfully (**_result is other than SUCCESS_**), the final result is showed to the customer, create token process is done without integrating the hosted form / payment page.
* If the result is successful (**_result is SUCCESS_**), Napas returns result with two parameters **_dataKey_** and **_napasKey_**, partner creates the HTML as follow and embed in the web/mobile application:

<form id="merchant-form" action="https://web.merchant.com/result-page" method="POST">
<div id="napas-widget-container"></div>
<script
    type="text/javascript"
    id="napas-widget-script"
    src="https://{domain}/web/js/napas.hostedform.min.js"
    merchantId="APITEST"
    clientIP="192.168.1.1"
    deviceId="123456789"
    environment="WebApp"
    cardScheme="AtmCard"
    enable3DSecure="false"
    apiOperation="CREATE_TOKEN"
    orderReference="abc"
    orderId="ORD_123321"
    orderAmount="2000"
    orderCurrency="VND"
    channel="7399"
    sourceOfFundsType="CARD"
    customerId = "123456789"
    dataKey="XxHnHSmY9qJQ+GGuI4TSvQ0KO6R2HqH4aObrGuTMcObZLQFCWGuAC874LoJHCXEK4ZWOoMtWIfK80+GQqi+t1mQXsab8fJDQzx05FiM1GmOXlXTDash5Hf4bJeT7FJT8X1kgGvJzwCXDEA7A8O3LODKFfiDrLOVDmbuRSq8d+w973OPssqCj8mXIqTqAqJbZ2FyxEyp8fmJl0h8tJPuZSl8t9Q1zt3LWKt+Nuu/t3NzK1T7YNGZKvoYn4fgrm6ORbz4iXoM7efDUdWdfHjzfB/H3aDnb+vGmGve5/tV0gNVTeAk8fZ8epb01W941pjfsARRHZIcNihMd707VuxzJTdm6TWNmTBOjqfsfzAWlndQYRgRZ8kvPzSEYYJQLJA8OlydRc8c0+4jZWjXfWthPlQ=="

    napasKey="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCeKjIJk0hiUG2JXSRIuSzqhc/Z09HqUfm3Ozn9NR4kHXWy4aFIY4Aeudq3Atscxfi1qCG1pkE6K1srzRyvIApteM+EizATUpz4g58OAWfp1LbvrPWdowOxWFYx6seduGWeltnWqDgLA7amTjkpM3NuXIHpeHD+JVx61LSmVf2LUwIDAQAB:MIIBsDCCARkCBgFaWR1D9TANBgkqhkiG9w0BAQUFADAeMRwwGgYDVQQDExNUZXN0IENBIENlcnRpZmljYXRlMB4XDTE3MDIyMDAxMjI1NFoXDTE3MDIyMTAxMjI1NFowHjEcMBoGA1UEAxMTVGVzdCBDQSBDZXJ0aWZpY2F0ZTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAnioyCZNIYlBtiV0kSLks6oXP2dPR6lH5tzs5/TUeJB11suGhSGOAHrnatwLbHMX4taghtaZBOitbK80cryAKbXjPhIswE1Kc+IOfDgFn6dS276z1naMDsVhWMerHnbhlnpbZ1qg4CwO2pk45KTNzblyB6Xhw/iVcetS0plX9i1MCAwEAATANBgkqhkiG9w0BAQUFAAOBgQBHvcmZJR7TUJVancvAeRgSq8GVXXTwNT9pjvtuyhRVIWDH72SD4SK7dK9m0LEywJIBYNoXczcD0ZTUWEVkZYD5Y8RezYuMC+vkAGpPMGGJjCzzZktHiFWxUMR7NmR7obWbTTs95m9YgRXSVKgFma3uf8nVz14TFEpn+9Bxh93/xA=="
>
<\/script>
</form>

Partner uses the appropriate parameters as described in the table below:

* M is a required parameter
* ME is a required parameter and a value must match the previous request
* O is an optional parameter
* C is a conditional parameter

<table><tbody><tr><td><p><strong>Parameter</strong></p></td><td><p><strong>Description</strong></p></td><td></td></tr><tr><td><p>action</p></td><td><p>Partner put the URL of the webpage that will catch and show transaction result, includes https://...</p></td><td><p>M</p></td></tr><tr><td><p>merchantId</p></td><td><p>Partner identifier</p></td><td><p>M</p></td></tr><tr><td><p>clientIP</p></td><td><p>Customer’s IP address</p></td><td><p>ME</p></td></tr><tr><td><p>deviceId</p></td><td><p>Customer’s identifier, this will be returned after processing transaction</p></td><td><p>ME</p></td></tr><tr><td><p>environment</p></td><td><p>Integration environment</p><p><strong><em>WebApp</em></strong>: desktop web</p><p><strong><em>MobileApp</em></strong>: mobile web/mobile app</p></td><td><p>ME</p></td></tr><tr><td><p>cardScheme</p></td><td><p>Card schemes in use</p><p><strong><em>AtmCard</em></strong>: domestic card</p></td><td><p>ME</p></td></tr><tr><td><p>enable3DSecure</p></td><td><p>Supports 3DSecure to authorize cardholder (always be false with AtmCard)</p><p><strong>false</strong>: disable 3DSecure flow</p></td><td><p>ME</p></td></tr><tr><td><p>apiOperation</p></td><td><p><strong>CREATE_TOKEN</strong></p></td><td><p>M</p></td></tr><tr><td><p>orderReference</p></td><td><p>Order short description</p></td><td><p>C</p></td></tr><tr><td><p>orderId</p></td><td><p>Order ID (must be unique)</p></td><td><p>ME</p></td></tr><tr><td><p>orderAmount</p></td><td><p>Order Amount</p></td><td><p>ME</p></td></tr><tr><td><p>orderCurrency</p></td><td><p>Order Currency</p></td><td><p>ME</p></td></tr><tr><td><p>channel</p></td><td><p>Partner business code</p></td><td><p>M</p></td></tr><tr><td><p>dataKey</p></td><td><p>Secured key for communication with Napas system</p></td><td><p>M</p></td></tr><tr><td><p>napasKey</p></td><td><p>Secured key for data encryption</p></td><td><p>M</p></td></tr><tr><td><p>submerchantCode</p></td><td><p>Code of submerchant (required if partner is using Whitelabel service). Also required in the initial PURCHASE_OTP request.</p></td><td><p>C</p></td></tr><tr><td><p>submerchantName</p></td><td><p>Name of submerchant</p></td><td><p>C</p></td></tr><tr><td><p>submerchantReferenceId</p></td><td><p>ReferenceId of submerchant</p></td><td><p>C</p></td></tr><tr><td><p>language</p></td><td><p>The default language displayed on the form</p><p><strong>vi</strong>: Vietnamese</p><p><strong>en</strong>: English</p></td><td><p>O</p></td></tr></tbody></table>

**_The final response example:_**

{
  "tokenResult": {
    "result": "SUCCESS",
    "response": {
      "gatewayCode": "SUCCESS",
      "message": "SUCCESS"
    },
    "token": "9704112827985634",
    "account": {
      "accountName": "SML",
      "accountNumber": "01040002",
      "issuerCode": "SML"
    },
    "orderId": "ORD_607695"
  }
}

### 5.5.8. Retrieve Token

Request to retrieve the specified token based on the payment orderId.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/customerId/{customerId}/order/{orderId}/getToken</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Response Body:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>merchantId</p></td><td></td><td><p>32</p></td><td></td><td><p>C</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>result</p></td><td></td><td></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>domestic</p></td><td><p>String</p></td><td><p>1</p></td><td></td><td><p>C</p></td><td><p>1: token attached with domestic card details.</p><p>0: token attached with branded card details.</p></td></tr><tr><td><p>orderId</p></td><td><p>String</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>OrderId from request message</p></td></tr><tr><td><p>status</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>VALID: token is usable for payment</p><p>INVALID: token cannot be used for payment</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/TGTT11/customerId/123456789/order/ORD_545601/getToken</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Response:_**

{
  "status": "VALID",
  "merchantId": "TGTT11",
  "result": "SUCCESS",
  "token": "9704002466670018",
  "domestic": "1",
  "orderId": "ORD_545601"
}

### 5.5.9. Delete Token

Request to delete a token.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/customerId/{customerId}/token/{token}</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>DELETE</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Response Body:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td></td><td><p>100</p></td><td><p>O</p></td><td><p>R</p></td><td><p>DELETE_TOKEN</p></td></tr><tr><td><p>merchantId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-</p></td><td><p>32</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>29</p></td><td><p>O</p></td><td><p>O</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>result</p></td><td></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/TGTT11/customerId/123456789/token/9704002466670018</p></td></tr><tr><td><p>Method</p></td><td><p>DELETE</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Response:_**

{
    "apiOperation": "DELETE_TOKEN",
    "merchantId": "VTBWL",
    "result": "SUCCESS",
    "token": "9704111354493487"
}

### 5.5.10. Create APG QR

Used for merchants who want to obtain the QR code generated by Napas and process transactions via the Napas payment gateway.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/createapgqr</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>CREATE_ APGQR: request to create a VietQR Code string that includes all the order information, which can be scanned with a QR Code scanner to make payment.</p></td></tr><tr><td><p>merchantId</p></td><td></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>order</p></td><td></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p><p>For CASHIN transactions, this parameter is required and the value must starts with “CASHIN” prefix</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>response</p></td><td></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td></td><td><p>50</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The value must be APGQR</p></td></tr><tr><td><p>apgQRCode</p></td><td></td><td><p>800</p></td><td></td><td><p>C</p></td><td><p>The QRCode string that represents order information</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>{dpp-domain}/dpp/merchant/NAPASDPP/order/ORD_20040022/createapgqr</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
    "apiOperation": "CREATE_APGQR",
    "inputParameters": {
        "clientIP": "192.168.1.1",
        "deviceId": "0123456789",
        "environment": "WebApp",
        "cardScheme": "AtmCard",
        "enable3DSecure": "false"
    },
    "order": {
        "amount": 1000000,
        "currency": "VND",
        "reference": "Thanh toan TEST_mnb6b1u3mm2b5sv"
    },
    "channel": "6014",
    "submerchant": {
        "code": "sub2",
        "name": "napas",
        "referenceId": "12345"
    },
    "serviceCode": "APGQR"
}

**_Response:_**

{
    "apiOperation": "CREATE_APGQR",
    "merchantId": "NAPASDPP",
    "order": {
        "amount": 1000000,
        "creationTime": "2025-06-23T14:29:13.070+0700",
        "reference": "Thanh toan TEST_mnb6b1u3mm2b5sv",
        "currency": "VND",
        "id": "ORD_20040022"
    },
    "response": {
        "acquirerCode": "0",
        "gatewayCode": "APPROVED",
        "message": "Transaction is successful."
    },
    "result": "SUCCESS",
    "version": "1",
    "channel": "6014",
    "apgQRCode": "0002010102125303704540710000005802VN38630010A000000727013300069711330119NPND0020030310049550208QRIBFTTA62350831Thanh toan TEST_mnb6b1u3mm2b5sv6304E54D"
}

### 5.5.11. Pay Apple (Merchant decrypts Apple Payment Token)

Used for merchants registered with Apple and processing transactions through the Napas payment gateway.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>PAY_APPLE: Authorise the Apple Pay payment.</p></td></tr><tr><td><p>applePay</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>Related information for Apple Pay transaction</p></td></tr><tr><td><p>applePay.paymentBundle</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>This object applies to merchants using the merchant-hosted model and sends Apple Payment Token to Napas who will perform decryption and transaction authorization.</p><p>This is an object that contains the user's payment credentials. Refer to apple pay payment token details</p><p>https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymenttoken</p></td></tr><tr><td><p>applePay.paymentMethod</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>The information about the card used in the transaction.</p></td></tr><tr><td><p>applePay.paymentMethod.displayName</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td><p>O</p></td><td><p>A string, suitable for display, that describes the card.</p></td></tr><tr><td><p>applePay.paymentMethod.network</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>O</p></td><td><p>A string, suitable for display, that is the name of the payment network backing the card.</p></td></tr><tr><td><p>applePay.paymentMethod.type</p></td><td><p>String</p></td><td><p>10</p></td><td><p>C</p></td><td><p>O</p></td><td><p>A string value representing the card's type of payment.</p></td></tr><tr><td><p>applePay.transactionIdentifier</p></td><td><p>String</p></td><td><p>64</p></td><td><p>C</p></td><td><p>O</p></td><td><p>A unique identifier for this payment.</p></td></tr><tr><td><p>applePay.paymentData</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>This object applies to merchants using the merchant-hosted model and performing Apple Payment Token decryption themselves, then sending transaction information and DPAN to Napas for transaction authorization.</p><p>This is an object containing the payment data that’s decrypted by the merchant from Apple Payment Token.</p></td></tr><tr><td><p>applePay.paymentData. applicationPrimaryAccountNumber</p></td><td><p>String</p></td><td><p>999</p></td><td><p>R</p></td><td><p>R</p></td><td><p>Device-specific account number of the card that funds this transaction</p></td></tr><tr><td><p>applePay.paymentData. applicationExpirationDate</p></td><td><p>Date as a string</p></td><td><p>6</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card expiration date in the format YYMMDD</p></td></tr><tr><td><p>applePay.paymentData.currencyCode</p></td><td><p>String</p></td><td><p>5</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ISO 4217 numeric currency code, as a string to preserve leading zeros</p></td></tr><tr><td><p>applePay.paymentData. transactionAmount</p></td><td><p>Number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>Transaction amount.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>applePay.paymentData. cardholderName</p></td><td><p>String</p></td><td><p>100</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Optional. Cardholder name.</p></td></tr><tr><td><p>applePay.paymentData. deviceManufacturerIdentifier</p></td><td><p>String</p></td><td><p>100</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Hex-encoded device manufacturer identifier</p></td></tr><tr><td><p>applePay.paymentData. paymentDataType</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Either "3DSecure" or "EMV"</p></td></tr><tr><td><p>applePay.paymentData.paymentData</p></td><td><p>Object</p></td><td><p>999</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Detailed payment data, see Detailed Payment Data Keys (3D Secure) and Detailed Payment Data Keys (EMV) in this link:</p><p>https://developer.apple.com/documentation/passkit_apple_pay_and_wallet/apple_pay/payment_token_format_reference</p></td></tr><tr><td><p>applePay.paymentData. merchantTokenIdentifier</p></td><td><p>String</p></td><td><p>100</p></td><td><p>C</p></td><td><p>O</p></td><td><p>For a merchant token request, the provisioned merchant token identifier from the payment network</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p><p>For CASHIN transactions, the value must start with “CASHIN” prefix</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: only use for recurring payments.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p><p>ACCOUNT: for account payments</p><p>DEELINK: for deep link payments</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/APITEST/order/ORD_123PPY1/transaction/TXN_123PPY1</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
  "apiOperation": "PAY_APPLE",
  "applePay": {
    "paymentMethod": {
      "displayName": "",
      "network": "",
      "type": ""
    },
    "transactionIdentifier": "",
    "paymentData": {
      "applicationPrimaryAccountNumber": "23456789111",
      "applicationExpirationDate": "001231",
      "currencyCode": "VND",
      "transactionAmount": "1500000",
      "cardholderName": "",
      "deviceManufacturerIdentifier": "",
      "paymentDataType": "",
      "paymentData": {},
      "merchantTokenIdentifier": ""
    }
  },
  "order": {
    "amount": "1500000",
    "currency": "VND",
    "reference": "Thanh toan ORD_123PPY1"
  }
}

**_Response:_**

{
  "apiOperation": "PAY_APPLE",
  "merchantId": "NAPASTEST",
  "order": {
    "amount": "15000",
    "creationTime": "2024-03-14T10:33:20.453Z",
    "currency": "VND",
    "id": "ORD_123PP1Y"
  },
  "response": {
    "acquirerCode": "0",
    "gatewayCode": "SUCCESS",
    "message": "Transaction is successful."
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "SML",
        "issueDate": "xxxx",
        "number": "234567x9111",
        "scheme": "OTHERS"
      }
    },
    "type": "PAYAPPLE"
  },
  "transaction": {
    "acquirer": {
      "id": "855290023",
      "transactionId": "855290023"
    },
    "amount": "15000",
    "currency": "VND",
    "id": "TX_12113",
    "type": "PAYMENT"
  }
}

### 5.5.12. Pay Apple (Merchant sends Apple Payment Token to Napas decrypts)

Used for merchants registered with Apple and processing transactions through the Napas payment gateway.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>PAY_APPLE: Authorise the Apple Pay payment.</p></td></tr><tr><td><p>applePay</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>Related information for Apple Pay transaction</p></td></tr><tr><td><p>applePay.paymentBundle</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>This object applies to merchants using the merchant-hosted model and sends Apple Payment Token to Napas who will perform decryption and transaction authorization.</p><p>This is an object that contains the user's payment credentials. Refer to apple pay payment token details</p><p>https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymenttoken</p></td></tr><tr><td><p>applePay.paymentMethod</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>O</p></td><td><p>The information about the card used in the transaction.</p></td></tr><tr><td><p>applePay.paymentMethod.displayName</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td><p>O</p></td><td><p>A string, suitable for display, that describes the card.</p></td></tr><tr><td><p>applePay.paymentMethod.network</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>O</p></td><td><p>A string, suitable for display, that is the name of the payment network backing the card.</p></td></tr><tr><td><p>applePay.paymentMethod.type</p></td><td><p>String</p></td><td><p>10</p></td><td><p>C</p></td><td><p>O</p></td><td><p>A string value representing the card's type of payment.</p></td></tr><tr><td><p>applePay.transactionIdentifier</p></td><td><p>String</p></td><td><p>64</p></td><td><p>C</p></td><td><p>O</p></td><td><p>A unique identifier for this payment.</p></td></tr><tr><td><p>applePay.paymentData</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>C</p></td><td><p>This object applies to merchants using the merchant-hosted model and performing Apple Payment Token decryption themselves, then sending transaction information and DPAN to Napas for transaction authorization.</p><p>This is an object containing the payment data that’s decrypted by the merchant from Apple Payment Token.</p></td></tr><tr><td><p>applePay.paymentData. applicationPrimaryAccountNumber</p></td><td><p>String</p></td><td><p>999</p></td><td><p>R</p></td><td><p>R</p></td><td><p>Device-specific account number of the card that funds this transaction</p></td></tr><tr><td><p>applePay.paymentData. applicationExpirationDate</p></td><td><p>Date as a string</p></td><td><p>6</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card expiration date in the format YYMMDD</p></td></tr><tr><td><p>applePay.paymentData.currencyCode</p></td><td><p>String</p></td><td><p>5</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ISO 4217 numeric currency code, as a string to preserve leading zeros</p></td></tr><tr><td><p>applePay.paymentData. transactionAmount</p></td><td><p>Number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>Transaction amount.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>applePay.paymentData. cardholderName</p></td><td><p>String</p></td><td><p>100</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Optional. Cardholder name.</p></td></tr><tr><td><p>applePay.paymentData. deviceManufacturerIdentifier</p></td><td><p>String</p></td><td><p>100</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Hex-encoded device manufacturer identifier</p></td></tr><tr><td><p>applePay.paymentData. paymentDataType</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Either "3DSecure" or "EMV"</p></td></tr><tr><td><p>applePay.paymentData.paymentData</p></td><td><p>Object</p></td><td><p>999</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Detailed payment data, see Detailed Payment Data Keys (3D Secure) and Detailed Payment Data Keys (EMV) in this link:</p><p>https://developer.apple.com/documentation/passkit_apple_pay_and_wallet/apple_pay/payment_token_format_reference</p></td></tr><tr><td><p>applePay.paymentData. merchantTokenIdentifier</p></td><td><p>String</p></td><td><p>100</p></td><td><p>C</p></td><td><p>O</p></td><td><p>For a merchant token request, the provisioned merchant token identifier from the payment network</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p><p>For CASHIN transactions, the value must start with “CASHIN” prefix</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>C</p></td><td></td><td><p>AUTOPAY: only use for recurring payments.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>C</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>O</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p><p>ACCOUNT: for account payments</p><p>DEELINK: for deep link payments</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/APITEST/order/ORD_12346_2/transaction/TXN_12346_2</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
    "apiOperation": "PAY_APPLE",
    "applePay": {
        "paymentBundle": {
            "paymentData": {
                "data": "I4jeR1Hk3eQmZFT0aZ51jkUFM2q/CiDVQQXr/8sYwGo00ITIg0SRTdJWgk6yYoaU2Z8j43lB5vDlg5+oBJQLnWRvswdTYtcQm9/HM2buHXlgb7KX+9Bt3sxiYhaalLa9eH5kUjEB/zOPutz+XWWECqM/Z3JDc73eR753wynGVrAOEZtsyJjsN1QEs6FOROJOIkQd1cPQHySfUhuaO3wOq4XolSswA4po/xdS6SAwi9xOHZ+xRcV3EevefpaQ5BwzX75YWiXltlX2RMFUuX8lyV/PGzoOkBq5b4RAADI5tfYjYZPHgS0bwbkERdoJXz8wVtttqnoONMurelJKhHtD6irYlsaAzpRHeO25XPt03CUKdmdvYRE3SriCFHarwNGOIZyCdao4fwiE85PommKkaLHJp91T6JqejHBActwsEGxleIk=",
                "signature": "MIAGCSqGSIb3DQEHAqCAMIACAQExDTALBglghkgBZQMEAgEwgAYJKoZIhvcNAQcBAACggDCCA+MwggOIoAMCAQICCEwwQUlRnVQ2MAoGCCqGSM49BAMCMHoxLjAsBgNVBAMMJUFwcGxlIEFwcGxpY2F0aW9uIEludGVncmF0aW9uIENBIC0gRzMxJjAkBgNVBAsMHUFwcGxlIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MRMwEQYDVQQKDApBcHBsZSBJbmMuMQswCQYDVQQGEwJVUzAeFw0xOTA1MTgwMTMyNTdaFw0yNDA1MTYwMTMyNTdaMF8xJTAjBgNVBAMMHGVjYy1zbXAtYnJva2VyLXNpZ25fVUM0LVBST0QxFDASBgNVBAsMC2lPUyBTeXN0ZW1zMRMwEQYDVQQKDApBcHBsZSBJbmMuMQswCQYDVQQGEwJVUzBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABMIVd+3r1seyIY9o3XCQoSGNx7C9bywoPYRgldlK9KVBG4NCDtgR80B+gzMfHFTD9+syINa61dTv9JKJiT58DxOjggIRMIICDTAMBgNVHRMBAf8EAjAAMB8GA1UdIwQYMBaAFCPyScRPk+TvJ+bE9ihsP6K7/S5LMEUGCCsGAQUFBwEBBDkwNzA1BggrBgEFBQcwAYYpaHR0cDovL29jc3AuYXBwbGUuY29tL29jc3AwNC1hcHBsZWFpY2EzMDIwggEdBgNVHSAEggEUMIIBEDCCAQwGCSqGSIb3Y2QFATCB/jCBwwYIKwYBBQUHAgIwgbYMgbNSZWxpYW5jZSBvbiB0aGlzIGNlcnRpZmljYXRlIGJ5IGFueSBwYXJ0eSBhc3N1bWVzIGFjY2VwdGFuY2Ugb2YgdGhlIHRoZW4gYXBwbGljYWJsZSBzdGFuZGFyZCB0ZXJtcyBhbmQgY29uZGl0aW9ucyBvZiB1c2UsIGNlcnRpZmljYXRlIHBvbGljeSBhbmQgY2VydGlmaWNhdGlvbiBwcmFjdGljZSBzdGF0ZW1lbnRzLjA2BggrBgEFBQcCARYqaHR0cDovL3d3dy5hcHBsZS5jb20vY2VydGlmaWNhdGVhdXRob3JpdHkvMDQGA1UdHwQtMCswKaAnoCWGI2h0dHA6Ly9jcmwuYXBwbGUuY29tL2FwcGxlYWljYTMuY3JsMB0GA1UdDgQWBBSUV9tv1XSBhomJdi9+V4UH55tYJDAOBgNVHQ8BAf8EBAMCB4AwDwYJKoZIhvdjZAYdBAIFADAKBggqhkjOPQQDAgNJADBGAiEAvglXH+ceHnNbVeWvrLTHL+tEXzAYUiLHJRACth69b1UCIQDRizUKXdbdbrF0YDWxHrLOh8+j5q9svYOAiQ3ILN2qYzCCAu4wggJ1oAMCAQICCEltL786mNqXMAoGCCqGSM49BAMCMGcxGzAZBgNVBAMMEkFwcGxlIFJvb3QgQ0EgLSBHMzEmMCQGA1UECwwdQXBwbGUgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkxEzARBgNVBAoMCkFwcGxlIEluYy4xCzAJBgNVBAYTAlVTMB4XDTE0MDUwNjIzNDYzMFoXDTI5MDUwNjIzNDYzMFowejEuMCwGA1UEAwwlQXBwbGUgQXBwbGljYXRpb24gSW50ZWdyYXRpb24gQ0EgLSBHMzEmMCQGA1UECwwdQXBwbGUgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkxEzARBgNVBAoMCkFwcGxlIEluYy4xCzAJBgNVBAYTAlVTMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE8BcRhBnXZIXVGl4lgQd26ICi7957rk3gjfxLk+EzVtVmWzWuItCXdg0iTnu6CP12F86Iy3a7ZnC+yOgphP9URaOB9zCB9DBGBggrBgEFBQcBAQQ6MDgwNgYIKwYBBQUHMAGGKmh0dHA6Ly9vY3NwLmFwcGxlLmNvbS9vY3NwMDQtYXBwbGVyb290Y2FnMzAdBgNVHQ4EFgQUI/JJxE+T5O8n5sT2KGw/orv9LkswDwYDVR0TAQH/BAUwAwEB/zAfBgNVHSMEGDAWgBS7sN6hWDOImqSKmd6+veuv2sskqzA3BgNVHR8EMDAuMCygKqAohiZodHRwOi8vY3JsLmFwcGxlLmNvbS9hcHBsZXJvb3RjYWczLmNybDAOBgNVHQ8BAf8EBAMCAQYwEAYKKoZIhvdjZAYCDgQCBQAwCgYIKoZIzj0EAwIDZwAwZAIwOs9yg1EWmbGG+zXDVspiv/QX7dkPdU2ijr7xnIFeQreJ+Jj3m1mfmNVBDY+d6cL+AjAyLdVEIbCjBXdsXfM4O5Bn/Rd8LCFtlk/GcmmCEm9U+Hp9G5nLmwmJIWEGmQ8Jkh0AADGCAYgwggGEAgEBMIGGMHoxLjAsBgNVBAMMJUFwcGxlIEFwcGxpY2F0aW9uIEludGVncmF0aW9uIENBIC0gRzMxJjAkBgNVBAsMHUFwcGxlIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MRMwEQYDVQQKDApBcHBsZSBJbmMuMQswCQYDVQQGEwJVUwIITDBBSVGdVDYwCwYJYIZIAWUDBAIBoIGTMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTI0MDMyNzA3NDg0MFowKAYJKoZIhvcNAQk0MRswGTALBglghkgBZQMEAgGhCgYIKoZIzj0EAwIwLwYJKoZIhvcNAQkEMSIEIKbbTJ6jeMQnsj3fnMJU377HsJSVHnF5CI15O8cQD/N5MAoGCCqGSM49BAMCBEcwRQIhANR1wMbBMEqmN8jZ7jPBbwlXQMpCkbabHePpr60pvnXlAiB5feCCY44GHBR/2th8utaY5yCdlHvJrEnA6/whHuMVKAAAAAAAAA==",
                "header": {
                    "publicKeyHash": "xrVCBPOYLv5xSv69/fKfImQZMCEImVdut2lxgLGx3Vc=",
                    "ephemeralPublicKey": "MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEej5g7CZoW8YRioVA32cVsP9FIvRiFAzqOWH8rGM35JPtR5Lfr7WlhGwt5r6437W4nGeLWZiiT1uYR0LXhyPGVw==",
                    "transactionId": "144ceeae5638fdd26666ba75dcb44e8a88243bdff8b849b3261e2f34dcf2e99f"
                },
                "version": "EC_v1"
            },
            "paymentMethod": {
                "displayName": "Visa 0253",
                "network": "Visa",
                "type": "debit"
            },
            "transactionIdentifier": "144ceeae5638fdd26666ba75dcb44e8a88243bdff8b849b3261e2f34dcf2e99f"
        }
    },
    "order": {
        "amount": "15000",
        "currency": "VND",
        "reference": "Thanh toan ORD_12346_2"
    }
}

**_Response:_**

{
  "apiOperation": "PAY_APPLE",
  "merchantId": "NAPASTEST",
  "order": {
    "amount": "1000000",
    "creationTime": "2024-03-27T15:11:47.263Z",
    "currency": "VND",
    "id": "ORD_12346_1"
  },
  "response": {
    "acquirerCode": "0",
    "gatewayCode": "SUCCESS",
    "message": "Transaction is successful."
  },
  "result": "SUCCESS",
  "sourceOfFunds": {
    "provided": {
      "card": {
        "brand": "SML",
        "issueDate": "1231",
        "number": "481132******7073",
        "scheme": "OTHERS"
      }
    },
    "type": "PAYAPPLE"
  },
  "transaction": {
    "acquirer": {
      "id": "855290194",
      "transactionId": "855290194"
    },
    "amount": "1000000",
    "currency": "VND",
    "id": "abc123",
    "type": "PAYMENT"
  }
}

### 5.5.13. Deep Link App List

Return a list of banking applications or e-wallets that are connected to Napas via Deep Link.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/TGTT7/deepLinkApplist</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ssm, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>DEEPLINK_APPLIST: Request to get app list</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>result</p></td><td></td><td></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: Successful.</p><p>FAIL: Fail.</p><p>UNKNOWN: Response unknown</p></td></tr><tr><td><p>deeplinkAppList</p></td><td><p>Array of objects</p></td><td><p>1</p></td><td></td><td><p>R</p></td><td><p>Application list</p></td></tr><tr><td><p>deeplinkAppList[].issuerCode</p></td><td><p>String</p></td><td><p>5</p></td><td></td><td><p>C</p></td><td><p>Refer to Apendix A – Issuing Bank Code</p></td></tr><tr><td><p>deeplinkAppList[].issuerLogoIOS</p></td><td><p>String</p></td><td><p>999</p></td><td></td><td><p>R</p></td><td><p>Issuer/e-Wallet ISO logo path</p></td></tr><tr><td><p>deeplinkAppList[].issuerLogoAndroid</p></td><td><p>String</p></td><td><p>999</p></td><td></td><td><p>R</p></td><td><p>Issuer/e-Wallet Android logo path</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/TGTT7/deepLinkApplist</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Response:_**

{
    "apiOperation": "DEEPLINK_APPLIST",
    "merchantId": " TGTT7",
    "response": {
        "acquirerCode": "0",
        "gatewayCode": "SUCCESS",
        "message": "Transaction is successful."
    },
    "result": "SUCCESS",
    "deeplinkAppList": [
        {
            "issuerCode": "VCB",
            "issuerLogoIOS": "https://is5-ssl.mzstatic.com/image/thumb/Purple116/v4/80/39/e2/8039e21e-83d4-3f1a-de06-2ea1d8ef30f1/AppIcon-0-0-1x_U007emarketing-0-0-0-10-0-0-sRGB-0-0-0-GLES2_U002c0-512MB-85-220-0-0.png/1200x630wa.png",
            "issuerLogoAndroid": "https://play-lh.googleusercontent.com/1BSuD_TyG_azvCaCH_p1WIv8NYdFC0GuS4tVMubcGRn1yXpGfOjeE-yPZ4lmzEdK-zg"
        },
        {
            "issuerCode": "TPB",
            "issuerLogoIOS": "https://is4-ssl.mzstatic.com/image/thumb/Purple122/v4/19/18/68/191868f2-e019-e06a-ae1e-fd29373ef151/AppIcon-0-0-1x_U007emarketing-0-0-0-7-0-0-sRGB-0-0-0-GLES2_U002c0-512MB-85-220-0-0.png/1200x630wa.png",
            "issuerLogoAndroid": "https://play-lh.googleusercontent.com/9VrdSOnjmE5ocjxm85jFYEcdAWxYSyVGqkv6X1BBH7mdWiEQKO4Lo_lbk--MHH6p1Ck"
        }
    ]
}

### 5.5.14. Verify Deep Link

Make a request to initiate a Deep Link transaction.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/TGTT7/order/{orderId}/transaction/{transactionId}/deeplink</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ssm, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>DEEPLINK: Request to initiate a Deep Link transaction</p></td></tr><tr><td><p>issuer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Issuer information</p></td></tr><tr><td><p>issuer.code</p></td><td><p>String</p></td><td><p>5</p></td><td><p>R</p></td><td></td><td><p>Refer to Appendix A – Issuing Bank Code</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p><p>For CASHIN transactions, the value must start with “CASHIN” prefix</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr><tr><td><p>inputParameters</p></td><td></td><td></td><td></td><td></td><td><p>Input parameters data group.</p></td></tr><tr><td><p>inputParameters.clientIP</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>IP of the customer client</p></td></tr><tr><td><p>inputParameters.deviceId</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p>Customer identifier, this will be returned to merchant after processing transaction.</p></td></tr><tr><td><p>inputParameters.environment</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>WebApp</em>: use to integrate on Web Applications</p><p><em>MobileApp</em>: use to integrate on Mobile Applications</p></td></tr><tr><td><p>inputParameters.cardScheme</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>R</p></td><td></td><td><p><em>CreditCard</em>: use in case of international cards.</p><p><em>AtmCard</em>: use in case of domestic cards</p></td></tr><tr><td><p>inputParameters.enable3DSecure</p></td><td></td><td></td><td><p>R</p></td><td></td><td><p>Supports 3DSecure for authorizing cardholder when using CreditCard.</p><p><em>true</em>: enable 3DSecure flow</p><p><em>false</em>: disable 3DSecure flow</p></td></tr><tr><td><p>result</p></td><td></td><td></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>deeplink</p></td><td><p>Object</p></td><td></td><td></td><td><p>R</p></td><td><p>Deep Link details</p></td></tr><tr><td><p>deeplink.issuerCode</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Refer to Appendix A – Issuing Bank Code</p></td></tr><tr><td><p>deeplink.URL</p></td><td><p>String</p></td><td><p>999</p></td><td></td><td><p>R</p></td><td><p>Deep Link to banking applications or e-wallets</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.date</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer. Format yyyy/mm/dd HH:MM:SS</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void or refund.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_PAYMENT: Void Payment</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/TGTT7/order/ORD_1r214/transaction/TXN_12516/deeplink</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss. GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
  "apiOperation": "DEEPLINK",
  "order": {
    "amount": "10000",
    "currency": "VND",
    "fastPay": 0
  },
  "channel": "6014",
  "submerchant": {
    "code": "SUBMERCHANT",
    "name": "Blah blah blah",
    "referenceId": "12345"
  },
  "issuer": {
    "code": "SML"
  },
  "inputParameters": {
    "clientIP": "192.168.1.1",
    "deviceId": "0123456789",
    "environment": "WebApp",
    "cardScheme": "AtmCard",
    "enable3DSecure": "false"
  }
}

**_Response:_**

{
  "paymentResult": {
    "apiOperation": "DEEPLINK",
    "deeplink": {
      "issuerCode": "SML",
      "URL": "<https://dpp-web-test.napas.com.vn/web/actuator/health>"
    },
    "order": {
      "amount": "10000",
      "currency": "VND",
      "fastPay": 0,
      "id": "ORD_1r214r9r87833353882",
      "merchantTransId": "TXN_0012516",
      "creationTime": "2025-06-23T10:53:44"
    },
    "response": {
      "acquirerCode": "0",
      "gatewayCode": "SUCCESS"
    },
    "result": "SUCCESS",
    "transaction": {
      "currency": "VND",
      "acquirer": {
        "date": "2025-06-23T10:53:44",
        "id": "100001064",
        "transactionId": "100001064"
      },
      "amount": "1000000",
      "id": "TXN_0012516",
      "type": "PAYMENT"
    },
    "channel": "6014"
  }
}

## 5.6 CPQR API

### 5.6.1. Verify CPQR/Barcode

This API enables in-store merchants to verify whether a Consumer Presented QR (CPQR) string or barcode string is valid and usable for payment processing.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/verifycpqr</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>VERIFY_CPQR: Verify whether the Consumer Presented QR string or barcode string is valid.</p></td></tr><tr><td><p>acceptorTerminalId</p></td><td><p>String</p></td><td><p>8</p></td><td><p>R</p></td><td></td><td><p>This field is used to identify a point-of-sale terminal of the merchant, and it must be unique for each merchant. The field consists of 8 characters:</p><p>The first 4 characters represent the branch code.</p><p>The last 4 characters represent the terminal device code.</p></td></tr><tr><td><p>sourceOfFunds.qrString</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>800</p></td><td><p>C</p></td><td><p>C</p></td><td><p>a QR string generated by the consumer’s app.</p></td></tr><tr><td><p>sourceOfFunds.barcodeString</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>30</p></td><td><p>C</p></td><td><p>C</p></td><td><p>a barcode string generated by the consumer’s app.</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>R</p></td><td><p>CSP_RETAIL: for retail transactions</p><p>CSP_TRANSIT: for transit transactions</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td><p>R</p></td><td><p>Response data group</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>result</p></td><td></td><td></td><td></td><td></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/verifycpqr</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
    "apiOperation": "VERIFY_CPQR",
    "sourceOfFunds": {
        "qrString": "85054350563031617BDF2003970411DF210897041199329840896368DF400B89391124535264378676999F37041425600D9F360234009F260835D8F68D95C8889DF6040B7440340E04938DE576B947E43399770CB225027147A719166CB60D0092C050010E7FC38011A8DE0FBB3ABBA83CCF5B639DBCF0037F6557FA4792858C838C3A",
        "type": "CSP_RETAIL"
    }
}

**_Response:_**

{
    "apiOperation": "VERIFY_CPQR",
    "sourceOfFunds": {
        "qrString": "85054350563031617BDF2003970411DF210897041199329840896368DF400B89391124535264378676999F37041425600D9F360234009F260835D8F68D95C8889DF6040B7440340E04938DE576B947E43399770CB225027147A719166CB60D0092C050010E7FC38011A8DE0FBB3ABBA83CCF5B639DBCF0037F6557FA4792858C838C3A",
        "type": "CSP_RETAIL"
    },
    "result": "SUCCESS",
    "response": {
        "acquirerCode": "0",
        "gatewayCode": "APPROVED",
        "message": "CPQR verified successfully."
    }
}

### 5.6.2. Purchase CPQR/Barcode

This API enables in-store merchants to accept payments using either a Consumer Presented QR (CPQR) string or a barcode string. The merchant scans the code provided by the consumer, submits it to the API, and the payment is processed securely from the consumer’s account to the merchant’s account.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}/purchasecpqr</p></td></tr><tr><td><p>HTTP Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>PURCHASE_CPQR: Authorise the payment and transfer funds.</p></td></tr><tr><td><p>acceptorTerminalId</p></td><td><p>String</p></td><td><p>8</p></td><td><p>R</p></td><td></td><td><p>This field is used to identify a point-of-sale terminal of the merchant, and it must be unique for each merchant. The field consists of 8 characters:</p><p>The first 4 characters represent the branch code.</p><p>The last 4 characters represent the terminal device code.</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td><p>R</p></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td><p>O</p></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p><p>For CASHIN transactions, the value must start with “CASHIN” prefix</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>submerchant</p></td><td></td><td></td><td></td><td></td><td><p>Submerchant data group</p></td></tr><tr><td><p>submerchant.code</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>20</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Code of submerchant.</p><p>This field is required if merchant is using Whitelabel service.</p></td></tr><tr><td><p>submerchant.name</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Name of submerchant.</p></td></tr><tr><td><p>submerchant.categoryCode</p></td><td><p>Data may consist of the characters 0-9</p></td><td><p>4</p></td><td><p>C</p></td><td><p>C</p></td><td><p>Category code of submerchant.</p></td></tr><tr><td><p>submerchant.referenceId</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>40</p></td><td><p>C</p></td><td><p>C</p></td><td><p>ReferenceId of submerchant.</p></td></tr><tr><td><p>sourceOfFunds.qrString</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>800</p></td><td><p>C</p></td><td><p>C</p></td><td><p>a QR string generated by the consumer’s app.</p></td></tr><tr><td><p>sourceOfFunds.barcodeString</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>30</p></td><td><p>C</p></td><td><p>C</p></td><td><p>a barcode string generated by the consumer’s app.</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>R</p></td><td><p>CSP_RETAIL: for retail transactions</p><p>CSP_TRANSIT: for transit transactions</p></td></tr><tr><td><p>merchantId</p></td><td></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.date</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer. Format yyyy/mm/dd HH:MM:SS</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CPQR: Payment by CPQR</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td><p>R</p></td><td><p>Response data group</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>result</p></td><td></td><td></td><td></td><td></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}/purchasecpqr</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
    "apiOperation": "PURCHASE_CPQR",
    "order": {
        "amount": 10000,
        "currency": "VND",
        "reference": "Thanh toan don hang ABC"
    },
    "sourceOfFunds": {
        "qrString": "85054350563031617BDF2003970411DF210897041199329840896368DF400B89391124535264378676999F37041425600D9F360234009F260835D8F68D95C8889DF6040B7440340E04938DE576B947E43399770CB225027147A719166CB60D0092C050010E7FC38011A8DE0FBB3ABBA83CCF5B639DBCF0037F6557FA4792858C838C3A",
        "type": "CSP_RETAIL"
    },
    "submerchant": {
        "code": "SUBMERCHANT",
        "name": "Blah blah blah",
        "referenceId": "12345"
    }
}

**_Response:_**

{
    "apiOperation": "PURCHASE_CPQR",
    "order": {
        "amount": 10000,
        "currency": "VND",
        "reference": "Thanh toan don hang ABC"
    },
    "sourceOfFunds": {
        "qrString": "85054350563031617BDF2003970411DF210897041199329840896368DF400B89391124535264378676999F37041425600D9F360234009F260835D8F68D95C8889DF6040B7440340E04938DE576B947E43399770CB225027147A719166CB60D0092C050010E7FC38011A8DE0FBB3ABBA83CCF5B639DBCF0037F6557FA4792858C838C3A",
        "type": "CSP_RETAIL"
    },
    "transaction": {
        "acquirer": {
            "date": "2025/06/20 10:44:41",
            "id": "840821975",
            "transactionId": "840821975"
        },
        "amount": "10000",
        "currency": "VND",
        "id": "38246702",
        "type": "CSP_RETAIL"
    },
    "result": "SUCCESS",
    "response": {
        "acquirerCode": "0",
        "gatewayCode": "APPROVED",
        "message": "Transaction is successful."
    }
}

### 5.6.3. Refund CPQR

* This transaction is used to refund customers.
* Partner can refund many times for the same orderId, if the total amount of refund does not exceed the original transaction amount.
* The refund transaction must have the same orderId with the previous payment transaction.
* The refund transaction has a transactionId different from the previous payment transaction, each partial refund transactions for the same order must have unique transactionId.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}/refundcpqr</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>REFUND_CPQR: Request to refund previously captured funds to the payer (for previous CPQR/Barcode transaction).</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>R</p></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order.</p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>O</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td><p>R</p></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form.</p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td><p>R</p></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>O</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>O</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction.</p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.acquirer.customData</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>O</p></td><td><p>Napas refund transaction Id.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>R</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order. REFUND</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/api/rest/version/1/merchant/NAPASTEST/order/ORD_170974/transaction/TXN_837271/refundcpqr</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
  "apiOperation": "REFUND_DOMESTIC",
  "transaction": {
    "amount": 10000,
    "currency": "VND"
  },
  "channel": "6014"
}

**_Response:_**

{
    "apiOperation": "REFUND_DOMESTIC",
    "merchantId": "VTBWL",
    "order": {
        "creationTime": "2025-09-30T19:11:51.88664097",
        "currency": "VND",
        "id": "ORD_914093"
    },
    "response": {
        "acquirerCode": "0",
        "gatewayCode": "APPROVED",
        "message": "Transaction is successful."
    },
    "result": "SUCCESS",
    "transaction": {
        "acquirer": {
            "transactionId": "100003206"
        },
        "amount": "2000",
        "id": "1000023",
        "type": "REFUND"
    }
}

### 5.6.4. Void CPQR

* A void CPQR/barcode transaction cancels a previous payment transaction. It is only valid if performed on the same processing day as the original payment transaction (before 23:54 PM).
* The void transaction must have the same orderId as the original payment transaction.
* The void transaction has a different transactionId from the original payment transaction, and the transactionId of the original payment transaction must be placed in the targetTransactionId field.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/transaction/{transactionId}/voidcpqr</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Parameter Details:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>R</p></td><td><p>VOID_CPQR: Request to void a CPQR/Barcode previous transaction</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td></td><td><p>R</p></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The total amount for the order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The identifier of the order.</p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>O</p></td><td><p>O</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td></td><td><p>R</p></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form.</p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td></td><td><p>R</p></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.targetTransactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>R</p></td><td><p>C</p></td><td><p>The identifier for the transaction you wish to void.</p><p>That is the {transactionId} URL field for REST and the transaction.id field for NVP.</p><p>*Required in Void transaction</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction.</p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>C</p></td><td><p>O</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order. VOID_PAYMENT</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>R</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td><p>O</p></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/NAPASTEST/order/ORD_170974/transaction/TXN_837271/voidcpqr</p></td></tr><tr><td><p>Method</p></td><td><p>PUT</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Request:_**

{
  "apiOperation": "VOID_DOMESTIC",
  "transaction": {
    "targetTransactionId": "100003216"
  },
  "channel": "6014"
}

**_Response:_**

Response {
    "apiOperation": "VOID_DOMESTIC",
    "merchantId": "VTBWL",
    "order": {
        "creationTime": "2025-09-30T19:19:25",
        "id": "ORD_636854"
    },
    "response": {
        "acquirerCode": "0",
        "gatewayCode": "APPROVED",
        "message": "Transaction is successful."
    },
    "result": "SUCCESS",
    "transaction": {
        "acquirer": {
            "transactionId": "100003307"
        },
        "amount": "10000",
        "id": "100002909",
        "type": "VOID"
    }
}

### 5.6.5. Retrieve CPQR

Request to retrieve the details of an order.

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/{merchantId}/order/{orderId}/cpqr</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>Application/json</p></td></tr><tr><td><p>Authentication</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>yyyyMMdd HH:mm:ss, GMT +7</p></td></tr><tr><td><p>signature</p></td><td><p>HMAC-SHA256 with shared secret key</p></td></tr></tbody></table>

**_Response Body:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Req Mess</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td></td><td><p>100</p></td><td><p>O</p></td><td><p>R</p></td><td><p>RETRIEVE_CPQR: Request to retrieve the details of a CPQR/Barcode transaction</p></td></tr><tr><td><p>merchantId</p></td><td></td><td><p>999</p></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td></td><td></td><td></td><td></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The total amount for the order.</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>The identifier of the order.</p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>O</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>O</p></td><td><p>The amount that has been successfully captured for this order</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td></td><td><p>12</p></td><td></td><td><p>O</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Max value:1000000000000</p><p>Min value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>response</p></td><td></td><td></td><td></td><td></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.message</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td></td><td><p>C</p></td><td><p>The response from the acquirer in the text form.</p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.gatewayCode</p></td><td></td><td><p>32</p></td><td></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “Domestic Response Code”.</p></td></tr><tr><td><p>result</p></td><td></td><td><p>7</p></td><td></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>sourceOfFunds</p></td><td></td><td></td><td></td><td><p>C</p></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td></td><td></td><td></td><td><p>C</p></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card&nbsp;</p></td><td></td><td></td><td></td><td></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td></td><td></td><td></td><td></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td></td><td><p>R</p></td><td><p>Month, as shown on the card.</p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td></td><td><p>R</p></td><td><p>Year, as shown on the card.</p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme&nbsp;</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.provided.account</p></td><td><p>Object</p></td><td></td><td></td><td><p>C</p></td><td><p>Source of fund provided account data group.</p><p>Details of the bank account.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td></td><td><p>C</p></td><td><p>Code of the issuing bank.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountName</p></td><td><p>Data is a string that consist of the characters A-Za-z</p></td><td><p>50</p></td><td></td><td><p>C</p></td><td><p>Customer’s bank account name</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Customer’s bank account number</p></td></tr><tr><td><p>sourceOfFunds.provided.account.identificationNumber</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Customer’s indentification number or passport number</p></td></tr><tr><td><p>sourceOfFunds.provided.account.phoneNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>Customer’s phone number (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.ibUsername</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td></td><td><p>C</p></td><td><p>Customer’s internet banking username used to login to the issuer bank’s internet banking</p></td></tr><tr><td><p>sourceOfFunds.provided.account.email</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z._@</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Customer’s email (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.taxCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td></td><td><p>C</p></td><td><p>Customer’s tax code (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.hardToken</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td></td><td><p>C</p></td><td><p>Customer’s hard token (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.customerCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td></td><td><p>C</p></td><td><p>Customer’s customer code (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td></td><td><p>20</p></td><td></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: The payer selected to pay using a credit or debit card. The payer's card details must be provided.</p><p>In case of token using, please send this parameter with value CARD.</p></td></tr><tr><td><p>transaction&nbsp;&nbsp;</p></td><td></td><td></td><td></td><td></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td></td><td></td><td></td><td></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction.</p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>maximum value: 1000000000000</p><p>minimum value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td></td><td><p>O</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction.</p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference&nbsp;</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount.</p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>maximum value: 1000000000000</p><p>minimum value: 0</p><p>maximum post-decimal digits: 2</p></td></tr><tr><td><p>transaction.type</p></td><td></td><td><p>20</p></td><td></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order. E.g. RETRIEVE</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>10</p></td><td></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>9</p></td><td></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

**_Sample:_**

<table><tbody><tr><td><p>URL</p></td><td><p>https://{domain}/dpp/merchant/NAPASTEST/order/ORD_170974/domestic</p></td></tr><tr><td><p>Method</p></td><td><p>GET</p></td></tr><tr><td><p>Content-Type</p></td><td><p>application/json</p></td></tr><tr><td><p>Authorization</p></td><td><p>Bearer {access token}</p></td></tr><tr><td><p>Application</p></td><td><p>{applicationId} – Napas provides this information during the integration.</p></td></tr><tr><td><p>currentDate</p></td><td><p>Request Date, formatted as yyyyMMdd HH:mm:ss.</p></td></tr><tr><td><p>signature</p></td><td><p>HMACSHA256 with shared key</p></td></tr></tbody></table>

**_Response:_**

{
    "apiOperation": "RETRIEVE",
    "merchantId": "VTBWL",
    "order": {
        "creationTime": "2025-09-30T08:45:30",
        "currency": "VND",
        "id": "ORD_834131"
    },
    "response": {
        "acquirerCode": "0",
        "gatewayCode": "SUCCESS",
        "message": "Transaction is successful."
    },
    "result": "SUCCESS",
    "transaction": {
        "acquirer": {
            "transactionId": "100003255"
        },
        "amount": "10000",
        "id": "",
        "type": "RETRIEVE"
    }
}

# 6. Response From Napas

## 6.1. Form Submit & IPN

Merchant will receive the result from Napas in 2 separate ways

### 6.1.1. Form Submit

The full result (consists of a generated Token if any) will be submitted to the URL defined in **action** parameter. This result will be included in **napasResult** parameter.

### 6.1.2. IPN

The response data (including the full result and a generated token if applicable) will be sent via a POST request to the partner’s IPN endpoint registered with Napas. This IPN callback may correspond to one of the following flows: payment, token status update, or refund for VietQR transactions. The result will be included in the request body, allowing the partner to perform appropriate backend processing.

* Merchants should utilize the results returned through IPN (Instant Payment Notification) - data sent directly from the Napas server to the merchant server - to accurately record order status. This approach ensures data integrity and prevents potential interference or manipulation that could occur on the customer's browser.
* The merchant must verify the signature in the response returned from Napas.
* Merchants should be aware of potential duplicate transaction result records returned from Napas.
* The partner must carefully verify the captured amount against the initial order amount upon receiving a response from Napas. If any discrepancy is found, the transaction should be placed in a pending status, and the issue should be reported to Napas immediately.

**Example of a response from Napas in JSON format:**

{
  "data": "eyJ0b2tlblJlc3VsdCI6eyJyZXN1bHQiOiJTVUNDRVNTIiwicmVzcG9uc2UiOnsiZ2F0ZXdheUNvZGUiOiJOT19WRVJJRklDQVRJT05fUEVSRk9STUVEIiwibWVzc2FnZSI6IlRyYW5zYWN0aW9uIGlzIHN1Y2Nlc3NmdWwuIn0sInRva2VuIjoiNDAwNTU1MDg1NjE2MDAxOSIsImNhcmQiOnsiYnJhbmQiOiJWSVNBIiwiZXhwaXJ5Ijp7Im1vbnRoIjoiMDUiLCJ5ZWFyIjoiMTcifSwiaXNzdWVyIjoiSlBNT1JHQU4gQ0hBU0UgQkFOSywgTi5BLiIsIm51bWJlciI6IjQwMDU1NXh4eHh4eDAwMTkiLCJzY2hlbWUiOiJWSVNBIn0sImRldmljZUlkIjoiMDkzNjc4OTM5MCJ9LCJwYXltZW50UmVzdWx0Ijp7ImFwaU9wZXJhdGlvbiI6IlBBWSIsImF1dGhvcml6YXRpb25SZXNwb25zZSI6eyJjYXJkU2VjdXJpdHlDb2RlRXJyb3IiOiJNIiwiZGF0ZSI6IjAyMTciLCJmaW5hbmNpYWxOZXR3b3JrRGF0ZSI6IjIwMTctMDItMTciLCJwcm9jZXNzaW5nQ29kZSI6IjAwMzAwMCIsInJlc3BvbnNlQ29kZSI6IjAwIiwicmV0dXJuQWNpIjoiWSIsInN0YW4iOiIyMzMwODAiLCJ0aW1lIjoiMTAwNDE5In0sIm1lcmNoYW50SWQiOiJBUElURVNUIiwib3JkZXIiOnsiYW1vdW50IjoiMTUwMDAwIiwiY3JlYXRpb25UaW1lIjoiMjAxNy0wMi0xN1QxMDowNDoxOS42MzZaIiwiY3VycmVuY3kiOiJWTkQiLCJpZCI6Ik9SRF84ODA5MjQiLCJyZWZlcmVuY2UiOiJPUkRfODgwOTI0IiwidG90YWxBdXRob3JpemVkQW1vdW50IjoiMTUwMDAwIiwidG90YWxDYXB0dXJlZEFtb3VudCI6IjE1MDAwMCIsInRvdGFsUmVmdW5kZWRBbW91bnQiOiIwIn0sInJlc3BvbnNlIjp7ImFjcXVpcmVyQ29kZSI6IjAwIiwiYWNxdWlyZXJNZXNzYWdlIjoiQXBwcm92ZWQiLCJjYXJkU2VjdXJpdHlDb2RlIjp7ImFjcXVpcmVyQ29kZSI6Ik0iLCJnYXRld2F5Q29kZSI6Ik1BVENIIn0sImdhdGV3YXlDb2RlIjoiQVBQUk9WRUQiLCJtZXNzYWdlIjoiVHJhbnNhY3Rpb24gaXMgc3VjY2Vzc2Z1bC4ifSwicmVzdWx0IjoiU1VDQ0VTUyIsInNvdXJjZU9mRnVuZHMiOnsicHJvdmlkZWQiOnsiY2FyZCI6eyJicmFuZCI6IlZJU0EiLCJleHBpcnkiOnsibW9udGgiOiI1IiwieWVhciI6IjE3In0sImlzc3VlciI6IkpQTU9SR0FOIENIQVNFIEJBTkssIE4uQS4iLCJudW1iZXIiOiI0MDA1NTV4eHh4eHgwMDE5Iiwic2NoZW1lIjoiVklTQSJ9fSwidHlwZSI6IkNBUkQifSwidGltZU9mUmVjb3JkIjoiMjAxNy0wMi0xN1QxMDowNDoxOS42MzZaIiwidHJhbnNhY3Rpb24iOnsiYWNxdWlyZXIiOnsiYmF0Y2giOiIyMDE3MDIxOCIsImRhdGUiOiIwMjE4IiwiaWQiOiJWQ0JfUzJJIiwibWVyY2hhbnRJZCI6IjAwMDEwMTU5Njk5MjcyNSJ9LCJhbW91bnQiOiIxNTAwMDAiLCJhdXRob3JpemF0aW9uQ29kZSI6IjAxNTAxNiIsImN1cnJlbmN5IjoiVk5EIiwiaWQiOiJIRlBBWVNBVkVfNjE3ODUxIiwicmVjZWlwdCI6IjcwNDgxMDIzMzA4MCIsInR5cGUiOiJQQVlNRU5UIn0sImNoYW5uZWwiOiI3Mzk5IiwidmVyc2lvbiI6IjEifX0=",
  "checksum": "2914690DF3365912942F14EF1620273A6E7C6A5CF74D53F143FA4D4C5DC1A203"
}

<table><tbody><tr><td><p><strong>Parameter</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>data</p></td><td><p>A result string encoded in base64</p></td></tr><tr><td><p>checksum</p></td><td><p>Checksum of the data, calculated by <strong><em>sha256(data + client_secret)</em></strong> use to verify that the data string is correct and consistent.</p></td></tr></tbody></table>

After decoding Base64 data, the partner receives the following result (in the case of a successful transaction):

{  
  "tokenResult": {  
    "result": "SUCCESS",  
    "response": {  
      "acquirerCode": "50",  
      "gatewayCode": "TOKEN\_EXISTED",  
      "message": "Your payment details has been saved with this card. Please contact your merchant for more information."  
    },  
    "tokenId": "11-00c51f69-1c64-415a-8aac-2dee8ca9cfee",  
    "token": "9704111354493487",  
    "card": {  
      "brand": "SML",  
      "nameOnCard": "NGUYEN VAN A",  
      "issueDate": "0307",  
      "number": "970400xxxxxx0018",  
      "scheme": "SML"  
    },  
    "orderId": "ORD\_682755"  
  },  
  "paymentResult": {  
    "apiOperation": "PAY\_WITH\_RETURNED\_TOKEN",  
    "merchantId": "NAPASDPP",  
    "order": {  
      "amount": "10000",  
      "creationTime": "2025-10-01T10:13:21",  
      "currency": "VND",  
      "id": "ORD\_682755"  
    },  
    "response": {  
      "acquirerCode": "0",  
      "gatewayCode": "APPROVED",  
      "message": "Transaction is successful."  
    },  
    "result": "SUCCESS",  
    "sourceOfFunds": {  
      "provided": {  
        "card": {  
          "brand": "SML",  
          "nameOnCard": "NGUYEN VAN A",  
          "issueDate": "0307",  
          "number": "970400xxxxxx0018",  
          "scheme": "SML"  
        }  
      },  
      "type": "PAYMENT"  
    },  
    "transaction": {  
      "acquirer": {  
        "id": "100003324",  
        "transactionId": "100003324"  
      },  
      "amount": "10000",  
      "currency": "VND",  
      "id": "PAYMENT\_603027100000",  
      "type": "CARD"  
    },  
    "version": "1",  
    "channel": "6014"  
  }  
}

After decoding Base64 data, the partner receives the following result (in the case of a failure transaction):

 {
    "result": "ERROR",
    "error": {
        "cause": "INVALID\_REQUEST",
        "explanation": "An error occurred.",
        "validationType": "An error occurred."
    }
}

**_Explanation of response detail:_**

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>tokenResult</p></td><td><p>Object</p></td><td><p>100</p></td><td><p>C</p></td><td><p>Create/Update Token transaction object. This object will be returned in the response when a token is successfully generated or when there is a change or update to the token’s status (e.g., ACTIVATED, SUSPENDED or TERMINATED)</p></td></tr><tr><td><p>tokenResult.result</p></td><td><p>String</p></td><td><p>7</p></td><td><p>R</p></td><td><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>tokenResult.response</p></td><td><p>Object</p></td><td></td><td><p>R</p></td><td><p>Response data group</p></td></tr><tr><td><p>tokenResult.response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International ResponseCodes” or “Domestic Response Code”.</p></td></tr><tr><td><p>tokenResult.response.message</p></td><td><p>String</p></td><td><p>255</p></td><td><p>O</p></td><td><p>Response message</p></td></tr><tr><td><p>tokenResult.tokenId</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>Token id</p></td></tr><tr><td><p>tokenResult.token</p></td><td><p>String</p></td><td></td><td><p>R</p></td><td><p>Token number</p></td></tr><tr><td><p>tokenResult.tokenName</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>Token holder name</p></td></tr><tr><td><p>tokenResult.tokenStatus</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>Token Status – indicates the current state of the token. Possible values:</p><p>NOT_ACTIVE: The token has been issued but is not yet active.</p><p>ACTIVE: The token is currently active and can be used for transactions.</p><p>SUSPENDED: The token is suspended and cannot be used.</p><p>TERMINATED: The token has been permanently deactivated and is no longer valid.</p></td></tr><tr><td><p>tokenResult.tokenType</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Token Type – specifies the type of token issued. Possible values:</p><p>ACCOUNT: Token represents a bank account.</p><p>CARD: Token represents a payment card.</p></td></tr><tr><td><p>tokenResult.card</p></td><td><p>Array of objects</p></td><td><p>1</p></td><td><p>R</p></td><td><p>Card data group</p></td></tr><tr><td><p>tokenResult.card.status3ds</p></td><td><p>String</p></td><td><p>5</p></td><td><p>C</p></td><td><p>Status of the 3DSecure readiness of the card. Only returned if enable3DSecure is set to true in the initial request. For reference only.</p><p>true: card is enrolled with 3DS</p><p>false: card is not enrolled with 3DS</p></td></tr><tr><td><p>tokenResult.deviceId</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>Customer identifier</p></td></tr><tr><td><p>refundResult</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>VietQR refund transaction result. This object will be returned in the response when a VietQR refund transaction is completed.</p></td></tr><tr><td><p>refundResult.order</p></td><td><p>Object</p></td><td></td><td></td><td><p>Order information</p></td></tr><tr><td><p>refundResult.order.amount</p></td><td><p>String</p></td><td><p>12</p></td><td><p>R</p></td><td><p>Order amount</p></td></tr><tr><td><p>refundResult.order.currency</p></td><td><p>String</p></td><td><p>3</p></td><td><p>R</p></td><td><p>Order currency</p></td></tr><tr><td><p>refundResult.order.id</p></td><td><p>String</p></td><td><p>40</p></td><td><p>R</p></td><td><p>Order id</p></td></tr><tr><td><p>refundResult.transaction</p></td><td><p>Object</p></td><td></td><td><p>R</p></td><td><p>Refund transaction data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>refundResult.transaction.id</p></td><td><p>String</p></td><td><p>40</p></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order (Merchant refund transaction id)</p></td></tr><tr><td><p>refundResult.transactino.requestedAmount</p></td><td><p>String</p></td><td><p>12</p></td><td><p>R</p></td><td><p>Refund amount</p></td></tr><tr><td><p>refundResult.transactino.currency</p></td><td><p>String</p></td><td><p>3</p></td><td><p>O</p></td><td><p>Refund transaction currency</p></td></tr><tr><td><p>refundResult.transaction.authorizationCode</p></td><td><p>String</p></td><td><p>100</p></td><td><p>O</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td><p>refundResult.transaction.targetTransactionId</p></td><td><p>String</p></td><td><p>40</p></td><td><p>R</p></td><td><p>The identifier for the transaction you wish to refund. (The original purchase transaction)</p></td></tr><tr><td><p>refundResult.transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>QR_PUSH: Payment by QRCode.</p></td></tr><tr><td><p>refundResult.transaction.acquirer</p></td><td><p>Object</p></td><td></td><td><p>R</p></td><td><p>Acquirer data group.</p></td></tr><tr><td><p>refundResult.transaction.acquirer.id</p></td><td><p>String</p></td><td><p>40</p></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction. (Napas refund transaction Id)</p></td></tr><tr><td><p>paymentResult</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Result of the Payment transaction, refer to Payment Result Fields below</p></td></tr></tbody></table>

## 6.2. Payment Result Fields

<table><tbody><tr><td><p>Field name</p></td><td><p>Field type</p></td><td><p>Max Length</p></td><td><p>Res Mess</p></td><td><p>Description</p></td></tr><tr><td><p>apiOperation</p></td><td><p>String</p></td><td><p>100</p></td><td><p>R</p></td><td><p>PAY: Authorise the payment and transfer funds. Only use for branded cards</p></td></tr><tr><td><p>authorizationResponse</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Authorization response data group.</p><p>Information on fields returned by some acquirers for an authorization or pay transaction.</p></td></tr><tr><td><p>authorizationResponse.</p><p>cardSecurityCodeError</p></td><td><p>Data can consist of any characters</p></td><td><p>1</p></td><td><p>C</p></td><td><p>CSC Incorrect Indicator.</p><p>An indicator, provided by the Issuer in the authorization response, to identify the presence of an invalid card security code (CSC). If there is an error, the Issuer will respond with the 1-byte CSC Error Code (Y).</p></td></tr><tr><td><p>authorizationResponse.</p><p>commercialCard</p></td><td><p>Data can consist of any characters</p></td><td></td><td><p>C</p></td><td><p>Indicates if the card used is a commercial card</p></td></tr><tr><td><p>authorizationResponse.</p><p>CommercialCardIndicator</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td><p>C</p></td><td><p>Indicates the type of commercial card as returned by the card issuer</p></td></tr><tr><td><p>authorizationResponse.date</p></td><td><p>Data can consist of any characters</p></td><td><p>8</p></td><td><p>C</p></td><td><p>The local date, in MMDD format, on which the transaction occurred.</p></td></tr><tr><td><p>authorizationResponse.</p><p>financialNetworkDate</p></td><td><p>Data must comply with ISO 8601 extended date format, yyyy-mm-dd</p></td><td><p>8</p></td><td><p>C</p></td><td><p>The date for the Authorization as returned by the financial network. </p><p>For transactions processed via the MasterCard Network this is the MasterCard Network Reference Date.</p></td></tr><tr><td><p>authorizationResponse.processingCode</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td><p>C</p></td><td><p>Identifies the type of Card Transaction sent to Card Acceptor.</p></td></tr><tr><td><p>authorizationResponse.responseCode</p></td><td><p>Data can consist of any characters</p></td><td><p>2</p></td><td><p>C</p></td><td><p>The response code which indicates the status of the transaction</p></td></tr><tr><td><p>authorizationResponse.responseMessage</p></td><td><p>Data can consist of any characters</p></td><td><p>255</p></td><td><p>C</p></td><td><p>Textual description of the acquirer response code for displaying on terminals</p></td></tr><tr><td><p>authorizationResponse.returnAci</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td><p>C</p></td><td><p>The ACI (Authorization Characteristics Indicator) returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.stan</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td><p>C</p></td><td><p>The System Trace Audit Number is assigned by a transaction originator to assist in identifying a Card Transaction. </p><p>The trace number remains unchanged for the life of the Card Transaction.</p></td></tr><tr><td><p>authorizationResponse.time</p></td><td><p>Data can consist of any characters</p></td><td><p>6</p></td><td><p>C</p></td><td><p>The local time, in HHMMSS format, during which the transaction occurred</p></td></tr><tr><td><p>authorizationResponse.</p><p>TransactionIdentifier</p></td><td><p>Data can consist of any characters</p></td><td><p>64</p></td><td><p>C</p></td><td><p>The unique identifier for the transaction returned by the issuer</p></td></tr><tr><td><p>authorizationResponse.validationCode</p></td><td><p>Data can consist of any characters</p></td><td><p>4</p></td><td><p>C</p></td><td><p>The validation code returned by the issuer. </p><p>This value must be stored to be sent with the capture transaction.</p></td></tr><tr><td><p>correlationId</p></td><td><p>Data can consist of any characters</p></td><td><p>36</p></td><td><p>C</p></td><td><p>A transient identifier for the request, that can be used to match the response to the request</p><p>The value provided is not validated, does not persist in the gateway, and is returned as provided in the response to the request</p></td></tr><tr><td><p>customer</p></td><td></td><td></td><td><p>C</p></td><td><p>Customer data group.</p><p>Information associated with the customer's source of transaction</p></td></tr><tr><td><p>customer.email</p></td><td><p>Ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses</p></td><td><p>100</p></td><td><p>C</p></td><td><p>The email address of the customer. </p><p>The field format restriction ensures that the email address is longer than 3 characters and adheres to a generous subset of valid RFC 2822 email addresses.</p></td></tr><tr><td><p>customer.firstName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>C</p></td><td><p>The payer's first name</p></td></tr><tr><td><p>customer.lastName</p></td><td><p>Data can consist of any characters</p></td><td><p>50</p></td><td><p>C</p></td><td><p>The payer's last or surname</p></td></tr><tr><td><p>customer.mobilePhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>C</p></td><td><p>The contact person's mobile phone or cell phone number.</p></td></tr><tr><td><p>customer.workPhone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>C</p></td><td><p>The contact person's work phone number.</p></td></tr><tr><td><p>customer.phone</p></td><td><p>Data can consist of any characters</p></td><td><p>20</p></td><td><p>C</p></td><td><p>The phone number of the person to whom the order is being billed</p></td></tr><tr><td><p>device</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Device information data group.</p><p>Information associated with the device's source of transaction.</p></td></tr><tr><td><p>device.ipAddress</p></td><td><p>Data can consist of any characters</p></td><td><p>15</p></td><td><p>C</p></td><td><p>The IP address of the computer used by the customer, in nnn.nnn.nnn.nnn format</p></td></tr><tr><td><p>device.info</p></td><td><p>String</p></td><td><p>999</p></td><td><p>C</p></td><td><p>The device information</p></td></tr><tr><td><p>merchantId</p></td><td><p>String</p></td><td></td><td><p>R</p></td><td><p>Id of merchant</p></td></tr><tr><td><p>order</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Order data group.</p><p>Information about the order associated with this transaction</p></td></tr><tr><td><p>order.amount</p></td><td><p>Data is a string that consists of the characters 0-9 and '.' and represents a valid decimal number</p></td><td><p>12</p></td><td><p>R</p></td><td><p>The total amount for the order. </p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.creationTime</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td><p>R</p></td><td><p>The timestamp indicating the time the gateway considers the order to have been created</p></td></tr><tr><td><p>order.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>O</p></td><td><p>The identifier of the order. </p><p>For example, a shopping cart number, an order number, or an invoice number.</p></td></tr><tr><td><p>order.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>The currency of the order expressed as an ISO 4217 alpha code, e.g. USD.</p></td></tr><tr><td><p>order.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>R</p></td><td><p>A unique identifier for this order to distinguish it from any other order you create.</p><p>Use this identifier when referring to this order in subsequent transactions and in retrieval operations.</p><p>This value must be unique for every order created by your merchant profile.</p></td></tr><tr><td><p>order.totalAuthorizedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>O</p></td><td><p>The amount that has been successfully authorized for this order.</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalCapturedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>O</p></td><td><p>The amount that has been successfully captured for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>order.totalRefundedAmount</p></td><td><p>Decimal</p></td><td><p>12</p></td><td><p>O</p></td><td><p>The amount that has been successfully refunded for this order</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>redirectUrl</p></td><td><p>Data can consist of any characters</p></td><td><p>999</p></td><td><p>O</p></td><td><p>The URL to which you want to redirect the payer after completing the payer authentication process.</p><p>* Required in Verify Card transaction, which uses card information</p></td></tr><tr><td><p>response</p></td><td><p>Object</p></td><td></td><td><p>R</p></td><td><p>Response data group</p></td></tr><tr><td><p>response.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>3</p></td><td><p>C</p></td><td><p>Value as generated by the acquirer that summarizes the success or otherwise of the proposed operation</p></td></tr><tr><td><p>response.acquirerMessage</p></td><td><p>Data consists of ASCII characters</p></td><td><p>255</p></td><td><p>C</p></td><td><p>The response from the acquirer in the text form. </p><p>This field is used in addition to response.acquirerCode for some acquirers where additional information needs to be communicated. For example, contact details to allow the merchant to contact the issuer directly to seek authorisation for the transaction.</p></td></tr><tr><td><p>response.cardSecurityCode</p></td><td><p>Object</p></td><td></td><td></td><td><p>Response CSC group</p></td></tr><tr><td><p>response.cardSecurityCode.acquirerCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>1</p></td><td><p>C</p></td><td><p>The acquirer CSC response code generated by the card issuing institution</p></td></tr><tr><td><p>response.cardSecurityCode.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td><p>C</p></td><td><p>The card security code result generated to indicate whether the data supplied matches the data held by the cardholder's issuing bank</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCH: Valid or matched.</p><p>NOT_PRESENT: Merchant indicated CSC not present on card.</p><p>NOT_PROCESSED: Not processed.</p><p>NOT_SUPPORTED: Card issuer is not registered and/or certified</p><p>NO_MATCH: Invalid or not matched.</p></td></tr><tr><td><p>response.cardholderVerification</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>Response cardholder verification data group.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n]</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>Response cardholder verification detailed verification data group.</p><p>Results of the additional verification checks where an acquirer offers advanced cardholder verification and the data has been supplied in the Verify request.</p></td></tr><tr><td><p>response.cardholderVerification.</p><p>detailedVerification[n].gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td><p>O</p></td><td><p>The result returned after the specified data type has been verified by the acquirer</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>MATCHED: Data provided by cardholder matches record held by the cardholder's issuing bank.</p><p>NOT_MATCHED: Data provided by cardholder does NOT match record held by the cardholder's issuing bank.</p><p>NOT_PROVIDED: Verification could not be performed as data not provided.</p><p>NOT_CHECKED: Unable to perform verification checks on data provided.</p><p>SERVICE_NOT_SUPPORTED: Service currently not supported by acquirer or merchant</p><p>SERVICE_NOT_AVAILABLE_RETRY: Issuer system is unavailable. Retry can be attempted</p></td></tr><tr><td><p>response.gatewayCode</p></td><td><p>String</p></td><td><p>32</p></td><td><p>R</p></td><td><p>Summary of the success or otherwise of the proposed operation</p><p>Value must be the one of the values listed in Table “International Response Code”.</p></td></tr><tr><td><p>result</p></td><td><p>String</p></td><td><p>7</p></td><td><p>R</p></td><td><p>A system-generated high level overall result of the operation</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>SUCCESS: The operation was successfully processed</p><p>PENDING: The operation is currently in progress or pending processing</p><p>FAILURE: The operation was declined or rejected by the gateway, acquirer or issuer</p><p>UNKNOWN: The result of the operation is unknown</p><p>ERROR: The operation was rejected during validation</p></td></tr><tr><td><p>serviceCode</p></td><td><p>String</p></td><td><p>50</p></td><td><p>O</p></td><td><p>AUTOPAY: only use for recurring payments.</p></td></tr><tr><td><p>sourceOfFunds</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Source of fund data group.</p><p>Information about the payment type selected by the payer for this payment and the source of the funds.</p><p>Depending on the payment type the source of the funds can be a debit or credit card, bank account, or account with a browser payment provider (such as PayPal).</p></td></tr><tr><td><p>sourceOfFunds.provided</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Source of fund provided data group.</p><p>Information about the source of funds when it is directly provided (as opposed to via a token or session).</p></td></tr><tr><td><p>sourceOfFunds.provided.card</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Source of fund provided card data group.</p><p>Details as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.brand</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>The brand name used to describe the card that is recognized and accepted globally.</p><p>For many major card types this will match the scheme name. In some markets, a card may also be co-branded with a local brand that is recognized and accepted within its country/region of origin (see card.localBrand).<br>You may use this information to support surcharging decisions. This information is gathered from 3rd party sources and may not be accurate in all circumstances.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MAESTRO: Maestro</p><p>MASTERCARD: MasterCard</p><p>VISA: Visa</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>LOCAL_BRAND_ONLY: The card does not have a global brand.</p><p>UNKNOWN: The brand of the card used in the transaction could not be identified</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry</p></td><td><p>Object</p></td><td></td><td><p>O</p></td><td><p>Expiry info data group</p><p>Expiry date, as shown on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.month</p></td><td><p>Data is a number between 1 and 12 represented as a string.</p></td><td><p>2</p></td><td><p>R</p></td><td><p>Month, as shown on the card. </p><p>Months are numbered January=1, through to December=12.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.expiry.year</p></td><td><p>Data is a string that consist of the characters 0-9.</p></td><td><p>4</p></td><td><p>R</p></td><td><p>Year, as shown on the card. </p><p>The Common Era year is 2000 plus this value.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuer</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>The issuer of the card, if known.</p><p>WARNING: This information may be incorrect or incomplete – use at your own risk.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>11</p></td><td><p>C</p></td><td><p>For the local purpose</p><p>Issuer code of local bank</p></td></tr><tr><td><p>sourceOfFunds.provided.card.nameOnCard</p></td><td><p>Data can consist of any characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>The cardholder's name as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.issueDate</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>Card issue date, shown on the card.</p><p>MMYY format.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.number</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>19</p></td><td><p>O</p></td><td><p>Credit card number as printed on the card.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.scheme</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>The organization that owns a card brand and defines operating regulations for its use.</p><p>The card scheme also controls authorization and settlement of card transactions among issuers and acquirers.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AMEX: American Express</p><p>DINERS_CLUB: Diners Club</p><p>DISCOVER: Discover</p><p>JCB: JCB (Japan Credit Bureau)</p><p>MASTERCARD: MasterCard</p><p>UATP: UATP (Universal Air Travel Plan)</p><p>VISA: Visa</p><p>OTHER: The scheme of the card used in the transaction could not be identified.</p></td></tr><tr><td><p>sourceOfFunds.provided.card.</p><p>securityCodePresence</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>15</p></td><td><p>C</p></td><td><p>The code used to indicate the existence of the Card Security Code value</p></td></tr><tr><td><p>sourceOfFunds.provided.</p><p>card.securityCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>4</p></td><td><p>O</p></td><td><p>Card verification code, as printed on the back or front of the card</p></td></tr><tr><td><p>sourceOfFunds.provided.account</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Source of fund provided account data group.</p><p>Details of the bank account.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.issuerCode</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>10</p></td><td><p>C</p></td><td><p>Code of the issuing bank.</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountName</p></td><td><p>Data is a string that consist of the characters A-Za-z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>Customer’s bank account name</p></td></tr><tr><td><p>sourceOfFunds.provided.account.accountNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>100</p></td><td><p>C</p></td><td><p>Customer’s bank account number</p></td></tr><tr><td><p>sourceOfFunds.provided.account.identificationNumber</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>100</p></td><td><p>C</p></td><td><p>Customer’s indentification number or passport number</p></td></tr><tr><td><p>sourceOfFunds.provided.account.phoneNumber</p></td><td><p>Data is a string that consist of the characters 0-9</p></td><td><p>20</p></td><td><p>C</p></td><td><p>Customer’s phone number (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.ibUsername</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>Customer’s internet banking username used to login to the issuer bank’s internet banking</p></td></tr><tr><td><p>sourceOfFunds.provided.account.email</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z._@</p></td><td><p>100</p></td><td><p>C</p></td><td><p>Customer’s email (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.taxCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>Customer’s tax code (which is registered to the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.hardToken</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>Customer’s hard token (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.provided.account.customerCode</p></td><td><p>Data is a string that consist of the characters 0-9A-Za-z</p></td><td><p>50</p></td><td><p>C</p></td><td><p>Customer’s customer code (which is provided by the issuer bank)</p></td></tr><tr><td><p>sourceOfFunds.token</p></td><td><p>Data may consist of the characters 0-9, a-z, A-Z</p></td><td><p>64</p></td><td><p>C</p></td><td><p>Uniquely identifies a card and associated details</p></td></tr><tr><td><p>sourceOfFunds.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>C</p></td><td><p>The payment method your payer has chosen for this payment.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>CARD: for card payments</p></td></tr><tr><td><p>timeOfRecord</p></td><td><p>An instant in time expressed in ISO8601 date + time format - "YYYY-MM-DDThh:mm:ss.SSSZ"</p></td><td><p>24</p></td><td><p>C</p></td><td><p>Transaction Date. </p><p>The date when the transaction happened.The time the gateway considers the operation to have occurred. The gateway uses timeOfRecord as a point-in-time value for operations such as sorting, billing, and reporting.</p></td></tr><tr><td><p>transaction</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Transaction data group.</p><p>Information about this transaction.</p></td></tr><tr><td><p>transaction.acquirer</p></td><td><p>Object</p></td><td></td><td><p>C</p></td><td><p>Acquirer data group.</p><p>Information about this transaction</p></td></tr><tr><td><p>transaction.acquirer.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>R</p></td><td><p>The ID for the acquirer used to process the transaction</p></td></tr><tr><td><p>transaction.acquirer.merchantId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>The Acquirer Merchant Identifier (also known as Card Acceptor Identification Code (CAIC)) is an identifier allocated to you by your acquirer.</p></td></tr><tr><td><p>transaction.acquirer.time</p></td><td><p>Data can consist of any characters</p></td><td><p>24</p></td><td><p>C</p></td><td><p>The time the transaction was processed, as returned by the acquirer</p><p>Not returned by most acquirers</p></td></tr><tr><td><p>transaction.acquirer.transactionId</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>Identifier used by the acquirer to identify the transaction. </p><p>This identifier may be used by the acquirer in settlement reports.</p></td></tr><tr><td><p>transaction.amount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>R</p></td><td><p>The total amount for the transaction</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Maximum post-decimal digits: 2</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.authorizationCode</p></td><td><p>Data consists of ASCII characters</p></td><td><p>100</p></td><td><p>C</p></td><td><p>Value generated by the issuing bank in response to a proposal to transfer funds</p></td></tr><tr><td><p>transaction.currency</p></td><td><p>Data must consist of the characters A-Z</p></td><td><p>3</p></td><td><p>R</p></td><td><p>The currency of the transaction expressed as an ISO 4217 alpha code, e.g. USD</p><p>*Required in Capture / Refund transaction</p></td></tr><tr><td><p>transaction.id</p></td><td><p>Data can consist of any characters</p></td><td><p>40</p></td><td><p>R</p></td><td><p>Unique identifier for this transaction to distinguish it from any other transactions on the order</p></td></tr><tr><td><p>transaction.receipt</p></td><td><p>Data consists of ASCII characters</p></td><td><p>40</p></td><td><p>C</p></td><td><p>The Reference Retrieval Number (RRN) is a unique number generated by the acquirer for a specific merchant transaction. </p><p>The RRN can be used to retrieve the transaction data from the acquirer.</p></td></tr><tr><td><p>transaction.reference</p></td><td><p>Data can consist of any characters</p></td><td><p>512</p></td><td><p>C</p></td><td><p>An optional identifier for this transaction.</p></td></tr><tr><td><p>transaction.requestedAmount</p></td><td><p>A sequence of digits 0-9 separated by a '.' as a decimal indicator. Leading and trailing zeroes are optional. If the fractional part is zero, the '.' and following zero(es) can be omitted</p></td><td><p>12</p></td><td><p>C</p></td><td><p>If the transaction was partially approved (response.gatewayCode=PARTIALLY_APPROVED), this field contains the originally requested amount. </p><p>The transaction amount (transaction.amount) and order amount (order.amount) are both set to the actually approved amount.</p><p>Minimum: 2,000 VND, Maximum: 200,000,000 VND</p><p>Other currencies will be limited accordingly based on the exchange rate at the time of the transaction.</p><p>Note: no decimal number fora domestic transactions</p></td></tr><tr><td><p>transaction.type</p></td><td><p>String</p></td><td><p>20</p></td><td><p>R</p></td><td><p>Indicates the type of action performed on the order.</p><p>Value must be a member of the following list. The values are case sensitive.</p><p>AUTHORIZATION: Authorization</p><p>AUTHORIZATION_UPDATE: Authorization Update</p><p>BALANCE_ENQUIRY: Balance Enquiry</p><p>CAPTURE: Capture</p><p>CREDIT_PAYMENT: Credit Payment</p><p>ORDER_AGREEMENT: Order Agreement</p><p>PRE_AUTHORIZATION: Pre-Authorization</p><p>PAYMENT: Payment (Purchase)</p><p>REFUND: Refund</p><p>VOID_AUTHORIZATION: Void Authorization</p><p>VOID_CAPTURE: Void Capture</p><p>VOID_CREDIT_PAYMENT: Void Credit Payment</p><p>VOID_PAYMENT: Void Payment</p><p>VOID_REFUND: Void Refund</p><p>VERIFICATION: Verification</p><p>REFUND_REQUEST: Refund Request</p><p>OTHER: Other transaction types</p><p>QR_PUSH: Payment by QRCode</p></td></tr><tr><td><p>channel</p></td><td><p>Data consist 0-9 characters</p></td><td><p>9</p></td><td><p>O</p></td><td><p>The system uses MCC clarification from standard industry. Proper values will be sent to merchant.</p></td></tr><tr><td><p>version</p></td><td><p>Data can consist of any characters</p></td><td><p>3</p></td><td><p>C</p></td><td><p>The Web Services API version that you submitted the request in</p></td></tr></tbody></table>

## 6.3. Transaction Status Identification

* The merchant can determine whether a transaction is successful or unsuccessful based on the value of the following field: **response.acquirerCode** is either "**0**" or "**00**".
* Use the value of the **transaction.acquirer.id** field to map with the merchant's original order. This is a unique transaction ID on the Napas gateway.
* For details on the transaction status, refer to the value of **response.gatewayCode** or **error.cause** and cross-check with the **Response Code** table.

# 7. Response Code

## 7.1. International Response Code

<table><tbody><tr><td><p>result</p></td><td><p>response.gatewayCode / error.cause</p></td><td><p>Description</p></td></tr><tr><td rowspan='3'><p>SUCCESS</p></td><td><p> SUCCESS</p></td><td><p>Transaction is successful</p></td></tr><tr><td><p>CARD_ENROLLED</p></td><td><p>Authentication is successful</p></td></tr><tr><td><p>AUTHENTICATION_SUCCESSFUL</p></td><td><p>Authentication is successful</p></td></tr><tr><td rowspan='21'><p>FAILURE</p></td><td><p>OTHER_ERROR</p></td><td><p>Transaction failed</p></td></tr><tr><td><p>DECLINED</p></td><td><p>Transaction is declined by ISS</p></td></tr><tr><td><p>EXPIRED_CARD</p></td><td><p>Card has expired</p></td></tr><tr><td><p>INSUFFICIENT_FUNDS</p></td><td><p> Insufficient funds to make payment</p></td></tr><tr><td><p> TXN_NOT_ALLOWED</p></td><td><p> Transaction failed</p></td></tr><tr><td><p> CANCELLED</p></td><td><p> Transaction is cancelled</p></td></tr><tr><td><p> REJECTED_BY_RISK_MANAGEMENT</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p> REFERRED</p></td><td><p> Transaction is declined by ISS</p></td></tr><tr><td><p> REJECTED_BY_AVS</p></td><td><p> Transaction is declined by ISS</p></td></tr><tr><td><p> REJECTED_BY_CSC</p></td><td><p> Transaction is declined by ISS</p></td></tr><tr><td><p> REJECTED_BY_CSC_AVS</p></td><td><p> Transaction is declined by ISS</p></td></tr><tr><td><p> NOT_ENROLLED</p></td><td><p> Authentication is not available</p></td></tr><tr><td><p> ENROLLMENT_STATUS_UNDETERMINED</p></td><td><p> Authentication failed</p></td></tr><tr><td><p> NO_AUTHENTICATION_DATA</p></td><td><p> Authentication failed</p></td></tr><tr><td><p> AUTHENTICATION_ATTEMPTED</p></td><td><p> Authentication failed</p></td></tr><tr><td><p> AUTHENTICATION_NOT_AVAILABLE</p></td><td><p> Authentication failed</p></td></tr><tr><td><p> AUTHENTICATION_FAILED</p></td><td><p> Authentication failed</p></td></tr><tr><td><p> NOT_AUTHENTICATED</p></td><td><p> Authentication failed</p></td></tr><tr><td><p> NO_3DS_DATA</p></td><td><p> Authentication failed</p></td></tr><tr><td><p> NO_CAVV_AAV</p></td><td><p> Rejected due to no CAVV/AAV</p></td></tr><tr><td><p> RMS_REJECT</p></td><td><p> Rejected by RMS</p></td></tr><tr><td rowspan='12'><p> ERROR</p></td><td><p> OTHER_ERROR</p></td><td><p> Transaction failed</p></td></tr><tr><td><p> INVALID_REQUEST</p></td><td><p> Transaction failed</p></td></tr><tr><td><p> INVALID_CSC</p></td><td><p> Invalid card information</p></td></tr><tr><td><p> EXPIRED_SESSION</p></td><td><p> Session has expired</p></td></tr><tr><td><p> INVALID_CARD</p></td><td><p> Invalid card format</p></td></tr><tr><td><p> CUSTOMER_CANCELLED</p></td><td><p> Customer cancelled the payment</p></td></tr><tr><td><p> BLACKLISTED_BIN</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p> BLACKLISTED_IP</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p> BIN_VELOCITY</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p> IP_VELOCITY</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p> VALUE_EXCEEDED_LIMIT</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p> CANCELLED</p></td><td><p> Transaction is cancelled.</p></td></tr><tr><td><p> PENDING</p></td><td><p> PENDING</p></td><td><p> Transaction is pending</p></td></tr></tbody></table>

## 7.2. Domestic Response Code

<table><tbody><tr><td><p>result</p></td><td><p> response.gatewayCode / error.cause</p></td><td><p> Description</p></td></tr><tr><td><p> SUCCESS (HTTP 200)</p></td><td><p> SUCCESS</p></td><td><p> Transaction is successful</p></td></tr><tr><td rowspan='56'><p> FAILURE (HTTP 200)</p></td><td><p> LOCKED_CARD</p></td><td><p> Card/Account is locked</p></td></tr><tr><td><p> INVALID_CARDINFO</p></td><td><p> Invalid card information</p></td></tr><tr><td><p> EXPIRED_CARD</p></td><td><p> Card has expired</p></td></tr><tr><td><p> TIMED_OUT</p></td><td><p> No reply from bank</p></td></tr><tr><td><p> BANK_ERROR</p></td><td><p> Bank system/communication error</p></td></tr><tr><td><p> INSUFFICIENT_FUNDS</p></td><td><p> Insufficient funds to make payment</p></td></tr><tr><td><p> INVALID_CHECKSUM</p></td><td><p> Checksum error</p></td></tr><tr><td><p> TRANSACTION_NOT_SUPPORTED</p></td><td><p> Unsupported transaction type</p></td></tr><tr><td><p> PENDING_FOR_OTP</p></td><td><p>Transaction is pending for authentication result</p></td></tr><tr><td><p> CARD_LIMIT_EXCEEDED</p></td><td><p>Transaction exceeds daily limit set by bank</p></td></tr><tr><td><p> UNREGISTERED_CARD</p></td><td><p>Card not registered for online payment</p></td></tr><tr><td><p>DETOKENIZE_ERROR</p></td><td><p>Detokenize error</p></td></tr><tr><td><p>INVALID_TOKEN</p></td><td><p>Invalid token</p></td></tr><tr><td><p>CRYPTOGRAM_ERROR</p></td><td><p>Cryptogram error</p></td></tr><tr><td><p> INVALID_OTP</p></td><td><p> Invalid OTP</p></td></tr><tr><td><p>INVALID_PASSWORD</p></td><td><p>Invalid password</p></td></tr><tr><td><p> INVALID_OTP3</p></td><td><p> Invalid OTP</p></td></tr><tr><td><p> INVALID_CARDNAME</p></td><td><p> Invalid cardholder name</p></td></tr><tr><td><p> INVALID_CARDNO</p></td><td><p> Invalid card number</p></td></tr><tr><td><p> INVALID_ISSDATE</p></td><td><p> Invalid issue date</p></td></tr><tr><td><p> INVALID_DATE</p></td><td><p> Invalid effective date</p></td></tr><tr><td><p> INVALID_EXPDATE</p></td><td><p> Invalid expiry date</p></td></tr><tr><td><p> OTP_TIMED_OUT</p></td><td><p> OTP has expired</p></td></tr><tr><td><p> PENDING_FOR_CARDVER</p></td><td><p> Card information has not been verified</p></td></tr><tr><td><p> INELIGIBLE</p></td><td><p> Card is not eligible to make payment</p></td></tr><tr><td><p> TRANSACTION_LIMIT_EXCEEDED</p></td><td><p>Transaction value exceeds maximum limit set by bank</p></td></tr><tr><td><p> VALUE_EXCEEDED_LIMIT</p></td><td><p>Transaction value exceeds maximum limit set by payment gateway</p></td></tr><tr><td><p> PENDING_FOR_PURCHASE</p></td><td><p> OTP has been verified</p></td></tr><tr><td><p>AUTHENTICATION_FAILED</p></td><td><p>Wrong authentication</p></td></tr><tr><td><p> EXPIRED_SESSION</p></td><td><p> Session has expired</p></td></tr><tr><td><p>BANK_ERROR</p></td><td><p>Bank system/communication error</p></td></tr><tr><td><p> TRANSACTION_BELOW_LIMIT</p></td><td><p> Transaction value does not meet minimum limit set by bank</p></td></tr><tr><td><p>TRANSACTION_OUT_OF_LIMIT_BANK</p></td><td><p>Transaction value is out of limit range set by your bank</p></td></tr><tr><td><p> UNDETERMINED_BALANCE</p></td><td><p> Undetermined balance in customer's account</p></td></tr><tr><td><p> TRANSACTION_OUT_OF_LIMIT_PG</p></td><td><p> Transaction value is out of limit range set by the Payment gateway</p></td></tr><tr><td><p>CARD_ACCOUNT_NOT_ALLOWED</p></td><td><p>Card/Account is not allowed for payment</p></td></tr><tr><td><p>FINISHED_PAYMENT</p></td><td><p>Order has been paid</p></td></tr><tr><td><p>ISSUER_RES_CODE_NOT_FOUND</p></td><td><p>Issuer response code not found</p></td></tr><tr><td><p>ISSUER_RES_CODE_DUPLICATE</p></td><td><p>Issuer response code duplicated</p></td></tr><tr><td><p>INVALID_OTP_1TIME</p></td><td><p>Invalid OTP</p></td></tr><tr><td><p>INVALID_ACCOUNT_INFO</p></td><td><p>Invalid account information</p></td></tr><tr><td><p>INVALID_ACC_NAME</p></td><td><p>Invalid account name</p></td></tr><tr><td><p>FASTPAY_LIMIT_EXCEEDED</p></td><td><p>Transaction exceeds fast payment limit</p></td></tr><tr><td><p>FASTPAY_NOT_ALLOWED</p></td><td><p>Transaction is not allowed</p></td></tr><tr><td><p>ACCOUNT_PAY_NOT_ALLOWED</p></td><td><p>Transaction is not allowed</p></td></tr><tr><td><p>CARD_NOT_ALLOWED_FOR_TRANSACTION</p></td><td><p>Transaction is not allowed</p></td></tr><tr><td><p>BIOMETRIC_UNCOMPLETED</p></td><td><p>Transaction failed due to biometric verification with the Issuer not being completed. Please contact the Issuer for further details.</p></td></tr><tr><td><p>FAILED_BIOMETRIC_AUTH</p></td><td><p>Transaction failed due to failed biometric authentication.</p></td></tr><tr><td><p>AUTOPAY_NOT_ALLOWED</p></td><td><p>Autopay not allowed</p></td></tr><tr><td><p>AUTOPAY_LIMIT_EXCEEDED</p></td><td><p>Transaction exceeds fast payment limit</p></td></tr><tr><td><p>REJECTED_VOID</p></td><td><p>Void is rejected</p></td></tr><tr><td><p>VOID_NOT_ALLOWED</p></td><td><p>Void is not allowed</p></td></tr><tr><td><p>INVALID_SUBMERCHANT</p></td><td><p>Invalid MCC</p></td></tr><tr><td><p>INVALID_MCC</p></td><td><p>Token Linking Rejected</p></td></tr><tr><td><p>REJECTED_LINKING_TOKEN</p></td><td><p>Create token is fail</p></td></tr><tr><td><p>PAY_SUCCESS_TOKEN_FAIL</p></td><td><p>Payment transaction is approved but create token is fail</p></td></tr><tr><td rowspan='36'><p> ERROR (HTTP 200)</p></td><td><p> OTHER_ERROR</p></td><td><p> Transaction failed</p></td></tr><tr><td><p> ORDERS_NOT_FOUND</p></td><td><p> Order cannot be found</p></td></tr><tr><td><p> ORDERS_NOT_PAID</p></td><td><p> Order cannot be processed</p></td></tr><tr><td><p> DUPLICATE_ORDERS</p></td><td><p> Duplicate order</p></td></tr><tr><td><p>MC_ORDER_ID_DUPLICATE</p></td><td><p>Merchant Order ID duplicated</p></td></tr><tr><td><p>MC_TRANS_ID_DUPLICATE</p></td><td><p>Merchant Transaction ID duplicated</p></td></tr><tr><td><p>CANCEL</p></td><td><p>Transaction is cancelled</p></td></tr><tr><td><p>TOKEN_EXISTED</p></td><td><p>Token has been created by this card</p></td></tr><tr><td><p>INVALID_INFO_FOR_CASHIN</p></td><td><p>Invalid order information for cash in transaction</p></td></tr><tr><td><p>INVALID_INFO_FOR_WHITELABEL</p></td><td><p>Invalid information for whitelabel transaction</p></td></tr><tr><td><p> INVALID_MERCHANT</p></td><td><p>Merchant is invalid</p></td></tr><tr><td><p> INVALID_REQUEST</p></td><td><p>Invalid request</p></td></tr><tr><td><p> INVALID_TOKEN</p></td><td><p> Invalid token</p></td></tr><tr><td><p> TOKEN_NOT_FOUND</p></td><td><p> Token not found</p></td></tr><tr><td><p> INVALID_CARD</p></td><td><p> Invalid card format</p></td></tr><tr><td><p> EXPIRED_SESSION</p></td><td><p> Session has expired</p></td></tr><tr><td><p>EXPIRED_ORDER</p></td><td><p>Order is expired</p></td></tr><tr><td><p> BLACKLISTED_BIN</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p> BLACKLISTED_IP</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p> BIN_VELOCITY</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p> IP_VELOCITY</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p> VALUE_EXCEEDED_LIMIT</p></td><td><p> Transaction is rejected by risk management.</p></td></tr><tr><td><p>MISSING_DATA</p></td><td><p>Transaction data is missing. For Refund API.</p></td></tr><tr><td><p>INVALID_DATA</p></td><td><p>Transaction data is invalid. For Refund API.</p></td></tr><tr><td><p>INVALID_AMOUNT</p></td><td><p>Transaction amount is invalid. For Refund API.</p></td></tr><tr><td><p>TRANSACTION_NOT_FOUND</p></td><td><p>Original transaction not found. For Refund API.</p></td></tr><tr><td><p>DUPLICATE_TRANSACTION</p></td><td><p>Duplicate transaction. For Refund API.</p></td></tr><tr><td><p>RF_OTHER_ERROR</p></td><td><p>Other error. For Refund API.</p></td></tr><tr><td><p>REFUND_TIMEOUT</p></td><td><p>Refund timeout. For Refund API.</p></td></tr><tr><td><p>ORIGINAL_TRANSACTION_FAIL</p></td><td><p>Original transaction is not successful. For Refund API.</p></td></tr><tr><td><p>EXCEEDING_REFUND_AMOUNT</p></td><td><p>Exceeding refund amount. For Refund API.</p></td></tr><tr><td><p>TOKEN_NOT_VERIFIED</p></td><td><p>Token has not been verified yet</p></td></tr><tr><td><p>VERIFYOTP_DUPLICATED</p></td><td><p>Verify OTP message duplicated</p></td></tr><tr><td><p>INVALID_ISSUER</p></td><td><p>Bank does not participate in service</p></td></tr><tr><td><p>ISS_NOT_MATCHED</p></td><td><p>Issuer is not matched</p></td></tr><tr><td><p>NOT_ALLOWED</p></td><td><p>Not allow to refund. For Refund API.</p></td></tr><tr><td><p> PENDING (HTTP 200)</p></td><td><p> PENDING</p></td><td><p> Transaction is pending</p></td></tr><tr><td><p>AUTH_ERROR (HTTP 401)</p></td><td><p>INVALID_ACCESS_TOKEN</p></td><td><p>Invalid access token</p></td></tr></tbody></table>

# 8. Appendix

## 8.1. APPENDIX A – ISSUING BANK CODE

<table><tbody><tr><td><p><strong>Issuing Bank Code</strong></p></td><td><p><strong>Issuing Bank Name</strong></p></td><td><p><strong>Vietnamese Bank Name</strong></p></td></tr><tr><td><p>ABB</p></td><td><p>An Binh Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP An Bình</p></td></tr><tr><td><p>ACB</p></td><td><p>Joint Stock Commercial Bank for Investment and Development of Vietnam</p></td><td><p>Ngân hàng TMCP Á Châu</p></td></tr><tr><td><p>BIDV</p></td><td><p>Bank for Investment and Development of Vietnam</p></td><td><p>Ngân hàng TMCP Đầu tư và Phát triển Việt Nam</p></td></tr><tr><td><p>BAB</p></td><td><p>Bac A Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Bắc Á</p></td></tr><tr><td><p>BVB</p></td><td><p>Bao Viet Joint Stock Commercial Bank</p></td><td><p>Ngân hàng TMCP Bảo Việt</p></td></tr><tr><td><p>CTG</p></td><td><p>Vietnam Joint Stock Commercial Bank for Industry and Trade (Vietinbank)</p></td><td><p>Ngân hàng TMCP Công Thương Việt Nam</p></td></tr><tr><td><p>EIB</p></td><td><p>Vietnam Export Import Commercial Joint Stock Bank (Eximbank)</p></td><td><p>Ngân hàng TMCP Xuất nhập khẩu Việt Nam</p></td></tr><tr><td><p>GPB</p></td><td><p>Global Petro Sole Member Limited Commercial Bank (GPBank)</p></td><td><p>Ngân hàng TMCP Dầu khí toàn cầu</p></td></tr><tr><td><p>HDB</p></td><td><p>Ho Chi Minh City Development Joint Stock Commercial Bank (HDBank)</p></td><td><p>Ngân hàng TMCP Phát triển TP. HCM</p></td></tr><tr><td><p>IVB</p></td><td><p>Indovina Bank Limited</p></td><td><p>Ngân hàng TNHH Indovina</p></td></tr><tr><td><p>KLB</p></td><td><p>Kien Long Commercial Join Stock Bank</p></td><td><p>Ngân hàng TMCP Kiên Long</p></td></tr><tr><td><p>LPB</p></td><td><p>Fortune Vietnam Joint Stock Commercial Bank</p></td><td><p>Ngân hàng TMCP Lộc Phát Việt Nam</p></td></tr><tr><td><p>MB</p></td><td><p>Military Commercial Joint Stock Bank (MBBank)</p></td><td><p>Ngân hàng TMCP Quân đội</p></td></tr><tr><td><p>MSB</p></td><td><p>Maritime Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Hàng hải Việt Nam</p></td></tr><tr><td><p>MBV</p></td><td><p>Modern Bank of Vietnam Limited</p></td><td><p>Ngân hàng TNHH Một thành viên Việt Nam Hiện Đại</p></td></tr><tr><td><p>NAB</p></td><td><p>Nam A Bank Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Nam Á</p></td></tr><tr><td><p>NVB</p></td><td><p>National Citizen Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Quốc Dân</p></td></tr><tr><td><p>OCB</p></td><td><p>Orient Commercial Bank JSC</p></td><td><p>Ngân hàng TMCP Phương Đông</p></td></tr><tr><td><p>OJB</p></td><td><p>Ocean Commercial One Member Limited Liability Bank</p></td><td><p>Ngân hàng Thương mại TNHH Một Thành Viên Đại Dương (OceanBank)</p></td></tr><tr><td><p>PBVN</p></td><td><p>Public Bank Vietnam Limited</p></td><td><p>Ngân hàng TNHH MTV Public Việt Nam</p></td></tr><tr><td><p>PGB</p></td><td><p>Prosperity and Growth Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Thịnh Vượng và Phát triển</p></td></tr><tr><td><p>PVCB</p></td><td><p>Vietnam Public Joint Stock Commercial Bank</p></td><td><p>Ngân hàng TMCP Đại Chúng Việt Nam</p></td></tr><tr><td><p>SCB</p></td><td><p>Sai Gon Joint Stock Commercial Bank</p></td><td><p>Ngân hàng TMCP Sài Gòn</p></td></tr><tr><td><p>SEAB</p></td><td><p>Southeast Asia Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Đông Nam Á</p></td></tr><tr><td><p>SHB</p></td><td><p>Saigon-Hanoi Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Sài Gòn – Hà Nội</p></td></tr><tr><td><p>SGB</p></td><td><p>Saigon Bank For Industry And Trade</p></td><td><p>Ngân hàng TMCP Sài Gòn Công Thương</p></td></tr><tr><td><p>STB</p></td><td><p>Saigon Thuong Tin Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Sài Gòn Thương Tín</p></td></tr><tr><td><p>SVB</p></td><td><p>Shinhan Bank Vietnam Limited</p></td><td><p>Ngân hàng TNHH MTV Shinhan Việt Nam</p></td></tr><tr><td><p>TCB</p></td><td><p>Viet Nam Technological and Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Kỹ Thương Việt Nam</p></td></tr><tr><td><p>TPB</p></td><td><p>Tien Phong Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Tiên Phong</p></td></tr><tr><td><p>UOB</p></td><td><p>United Overseas Bank (Vietnam) Limited</p></td><td><p>Ngân hàng TNHH Một Thành Viên United Overseas Bank (Việt Nam)</p></td></tr><tr><td><p>VAB</p></td><td><p>VietNam-Asia Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Việt Á</p></td></tr><tr><td><p>VARB</p></td><td><p>Vietnam Bank for Agriculture and Rural Development</p></td><td><p>Ngân hàng Nông nghiệp và Phát triển Nông thôn Việt Nam</p></td></tr><tr><td><p>VB</p></td><td><p>Vietnam Thuong Tin Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Việt Nam Thương Tín</p></td></tr><tr><td><p>VCB</p></td><td><p>Joint Stock Commercial Bank for Foreign Trade of Vietnam</p></td><td><p>Ngân hàng TMCP Ngoại Thương Việt Nam</p></td></tr><tr><td><p>VCCB</p></td><td><p>Viet Capital Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Bản Việt</p></td></tr><tr><td><p>VIB</p></td><td><p>Vietnam International Commercial Joint Stock Bank</p></td><td><p>Ngân hàng TMCP Quốc tế Việt Nam</p></td></tr><tr><td><p>VPB</p></td><td><p>Vietnam Prosperity Joint Stock Commercial Bank</p></td><td><p>Ngân hàng TMCP Việt Nam Thịnh vượng</p></td></tr><tr><td><p>VRB</p></td><td><p>Vietnam - Russia Joint Venture Bank</p></td><td><p>Ngân hàng Liên doanh Việt - Nga</p></td></tr><tr><td><p>PGB</p></td><td><p>Prosperity &amp; Growth Bank JSC (PGBank)</p></td><td><p>Ngân hàng TMCP Thịnh Vượng &amp; Phát triển</p></td></tr><tr><td><p>WOO</p></td><td><p>Woori Bank Vietnam Limited</p></td><td><p>Ngân hàng TNHH MTV Woori Việt Nam</p></td></tr><tr><td><p>SVB</p></td><td><p>Shinhan Bank Vietnam Limited</p></td><td><p>Ngân hàng Thương mại TNHH MTV Shinhan Việt Nam</p></td></tr><tr><td><p>VCCB</p></td><td><p>Viet Capital Commercial Joint Stock Bank</p></td><td><p>Ngân hàng Thương mại Cổ phần Bản Việt</p></td></tr><tr><td><p>VB</p></td><td><p>Vietnam Thuong Tin Commercial Joint Stock Bank</p></td><td><p>Ngân hàng Thương mại Cổ phần Việt Nam Thương Tín</p></td></tr><tr><td><p>CFC</p></td><td><p>VietCredit Finance Joint Stock Company</p></td><td><p>Công ty Tài chính Cổ phần Tín Việt</p></td></tr><tr><td><p>MAFC</p></td><td><p>Mirae Asset Finance Company (Vietnam) Limited</p></td><td><p>Công ty Tài chính TNHH MTV Mirae Asset (Việt Nam)</p></td></tr><tr><td><p>KEBHANAHN</p></td><td><p>KEB Hana Bank – Hanoi Branch</p></td><td><p>Ngân hàng KEB Hana – Chi nhánh Hà Nội</p></td></tr><tr><td><p>KEBHANAHCM</p></td><td><p>KEB Hana Bank – Ho Chi Minh City Branch</p></td><td><p>Ngân hàng KEB Hana – Chi nhánh Hồ Chí Minh</p></td></tr><tr><td><p>MCREDIT</p></td><td><p>MB SHINSEI Finance Limited Liability Company</p></td><td><p>Công ty Tài chính TNHH MB Shinsei</p></td></tr></tbody></table>
